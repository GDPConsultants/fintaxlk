<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">

  <!-- Theme & App -->
  <meta name="theme-color" content="#060d1a">
  <meta name="application-name" content="FinTax LK">
  <meta name="description" content="Sri Lanka Personal Finance & Tax Management App by GDP Consultants — Chartered Accountants. Track income, manage taxes, file returns for 2025/2026.">

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="FinTax LK">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152.png">
  <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192.png">

  <!-- Android / Chrome -->
  <meta name="mobile-web-app-capable" content="yes">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/icon-96.png">
  <link rel="shortcut icon" href="/icons/icon-96.png">

  <!-- Open Graph -->
  <meta property="og:title" content="FinTax LK — Personal Finance & Tax">
  <meta property="og:description" content="Sri Lanka Personal Finance & Tax Management by GDP Consultants Chartered Accountants">
  <meta property="og:image" content="/icons/icon-512.png">
  <meta property="og:type" content="website">

  <title>FinTax LK — Personal Finance & Tax</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0;}
    body{background:#060d1a;min-height:100vh;display:flex;align-items:flex-start;justify-content:center;}
    #root{width:100%;max-width:430px;}
    #loading{position:fixed;inset:0;background:#060d1a;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;transition:opacity 0.5s;}
    .spinner{width:44px;height:44px;border:3px solid #1e293b;border-top:3px solid #b8960c;border-radius:50%;animation:spin 0.8s linear infinite;}
    @keyframes spin{to{transform:rotate(360deg)}}
    .load-text{color:#64748b;font-size:13px;margin-top:16px;font-family:Georgia,serif;}
    .load-brand{color:#b8960c;font-size:18px;font-weight:800;font-family:Georgia,serif;margin-bottom:8px;}
  </style>
</head>
<body>
  <div id="loading">
    <div class="load-brand">FinTax LK</div>
    <div class="spinner"></div>
    <div class="load-text">Loading your finance app...</div>
  </div>
  <div id="root"></div>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel" data-presets="react">

const LOGO_B64 = "data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAH0AfQDASIAAhEBAxEB/8QAHQABAAIDAQEBAQAAAAAAAAAAAAcIBQYJBAMCAf/EAF4QAAEDAwIDBQMGCgQKBQoFBQEAAgMEBQYHERIhMQgTQVFhInGBFCMyQpGhCRUWUmJygpKxwTNDotEXJDRTY5OywtLhNoOzw/AYJTVEVFVzlKPTJjdFdfEnVnSV4v/EABoBAQACAwEAAAAAAAAAAAAAAAAEBQIDBgH/xAA6EQEAAQMCAwQIBQQCAQUAAAAAAQIDBAUREiExE0FRYSIycZGhscHRBhQjgeEVM1LwNEKCJDVikvH/2gAMAwEAAhEDEQA/ALloiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIvzLJHFGZJXtYwdXOOwHxToP0i1255nYqLdral1U8fVgbxD7en3rWrhqHWPJbQUMMLfzpSXn7BsB96r72qYtnlNe8+XNJoxLtfSEjr8TSxQs45pGRt83OACh2tym/1e4kuUzG+UW0f+zsViZpZZn8c0j5HHxc4kqsufiG3H9uiZ9vL7pVOm1f9qk1T36yw/0l1owR4CYE/YF45MvxyM7G5NP6sbz/AACh5fmSRkbeKR7WDzcdlFq/EN+fVpj4t0abb75lL/5aY3/7ef8AUP8A7k/LTHP/AG93+pf/AHKFnXS2M+lcaRvvmaP5r8i8WknYXShPuqG/3rH+u5f+Me6fuf0+z4ymwZnjZ/8A1Ej3wSf8K9EOUWCX6N0px+sS3+KhGOuoZP6Osp3/AKsoP8192kOG7SCPML2PxBkR61MfH7n9OtT0mU609xt9QQKevpZSegZM138CvUoBXso7rc6Pb5LX1MQH1WyHb7OikW/xF/nR7pa6tN/xqTkiimhzq+0+wmfBVN/0kex+1uyz9v1Don7NrqGaE/nRuDx9+x/irG1rWJc6zt7UavBvU927d0Xgtd6tdzA+RVsUrvzN9n/unmverOiumuOKmd4RKqZpnaYERFk8EREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERARF5blcKK205qK2oZDH4Fx5n0A6k+5eVVRTG9U7Q9iJmdoepeK7Xa3WqLvK6qZFuN2t33c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";

// ─── Brand & App Constants ────────────────────────────────────────────────────
const APP_NAME        = "FinTax LK";
const APP_TAGLINE     = "Personal Finance & Tax Management";
const APP_BRAND_LINE  = "2-in-1 Personal Finance & Tax App";
const FIRM_NAME       = "GDP Consultants — Chartered Accountants";
const TAX_YEAR        = "2025/2026";
const TAX_YEAR_FULL   = "01 April 2025 – 31 March 2026";
const FILING_DEADLINE = "30 November 2026";

// ─── Multi-Year Support ────────────────────────────────────────────────────────
const ALL_TAX_YEARS = ["2022/2023","2023/2024","2024/2025","2025/2026","2026/2027"];
const DEFAULT_YEAR  = "2025/2026";
const yearKey = yr => "fintax_v4_"+yr.replace("/","_"); // e.g. fintax_v4_2025_2026
const yearLabel = yr => {
  const [from,to] = yr.split("/");
  return { label:yr, filing:`30 Nov ${to}`, period:`01 Apr ${from} – 31 Mar ${to}`, short:yr.slice(2) };
};
// Per-year relief & slab — simplified for now (thresholds change each year)
const DEFAULT_DATA_FACTORY = () => ({
  transactions:[],
  incomeEntries:[],
  expenseEntries:[],
  bankAccounts:[],
  cashOpeningBalance:0,
  taxSettings:{ qualifyingPayments:0, apitPaid:0, residency:"resident_citizen", slDays:"", assessmentYear:TAX_YEAR },
  customCatsIncome:[],
  customCatsExpense:[],
  // ── v9 NEW FEATURE DATA ──
  epf:{ currentBalance:0, monthlyContrib:0, monthlySalary:0, salaryGrowthPct:5, targetAge:55, currentAge:30, voluntaryTopUp:0 },
  netWorthAssets:[], // {id,name,type,value}
  netWorthLiabilities:[], // {id,name,type,value}
  loans:[], // {id,name,principal,rate,termMonths,startDate}
  vat:{ annualTurnover:0 },
  investments:[], // {id,name,type,amount,rate,whtRate,date}
  rentalProperties:[], // {id,name,monthlyRent,expenses:[]}
  advanceTax:{ monthlyIncome:0 },
});
const APP_EMAIL       = "info@taxcalclator.lk";
const APP_WEB         = "www.taxcalclator.lk";
const APP_WHATSAPP    = "0719204903";
const IRD_PORTAL      = "https://ezpay.ird.gov.lk";

// ─── Google Drive Backup ───────────────────────────────────────────────────────
// 🔴 SETUP REQUIRED: Replace with your Google Cloud OAuth2 Client ID
// Steps: console.cloud.google.com → APIs → Drive API → Credentials → OAuth2 Web Client
// Authorized JS origins: https://fintaxlk.pages.dev AND https://app.taxcalculator.lk
const GOOGLE_CLIENT_ID = "1028598004568-84vri5p36qqarmp3oodnki3l3vqjcivp.apps.googleusercontent.com";
const DRIVE_SCOPE      = "https://www.googleapis.com/auth/drive.file";
const BACKUP_FILENAME_PREFIX = "FinTaxLK_Backup_";
// All localStorage keys to include in backup
const ALL_STORAGE_KEYS = [
  "fintax_sub_v4","fintax_profile_v4","fintax_lang","fintax_active_year",
  ...["2022/2023","2023/2024","2024/2025","2025/2026","2026/2027"].map(y=>"fintax_v4_"+y.replace("/","_"))
];

// ─── Multi-Language Translations ──────────────────────────────────────────────
const TRANSLATIONS = {
  en:{
    nav_dashboard:"Dashboard", nav_book:"Book", nav_income:"Income",
    nav_tax:"Tax", nav_reports:"Reports", nav_help:"Help",
    trial_ended:"Free Trial Ended", sub_expired:"Subscription Expired",
    trial_msg:"Your 30-day free trial has ended. Upgrade to continue.",
    expired_msg:"Your annual subscription has expired. Renew to regain access.",
    have_code:"Have an Activation Code? Enter Here", hide_code:"Hide Code Entry",
    activate:"Activate", save:"Save", cancel:"Cancel", add:"Add", edit:"Edit",
    delete:"Delete", close:"Close", language:"Language",
    lang_en:"English", lang_si:"සිංහල", lang_ta:"தமிழ்",
    device_transfer:"Switching Devices?",
    device_transfer_msg:"Already subscribed on another device? Request a free transfer code from us.",
    device_transfer_btn:"Request Device Transfer",
    device_transfer_info:"Contact GDP Consultants via WhatsApp to get a new activation code for your new device. Your subscription will be transferred at no extra cost.",
    total_balance:"Total Balance", settings:"Settings",
    onboard_welcome:"Welcome to FinTax LK",
    annual_plan:"ANNUAL PREMIUM PLAN", pay_btn:"Pay Rs.12,000 via PayHere",
    or_pay_online:"OR PAY ONLINE", processing:"⏳ Processing PayHere...",
    code_label:"Enter your GDP Consultants activation code:",
    code_hint:"Format: GDP-XXXX-XXXX · Received via WhatsApp or email after payment",
    offline_hint:"Paid via bank transfer or cash? WhatsApp us:",
    checking:"⏳", activated:"✅ Subscription activated! Loading your app...",
    reissue:"♻️ Reissue (Device Change)", reissue_confirm:"Reissue this code so user can activate on a new device?",
    nav_services:"Services",
    nav_tools:"Tools 🔧",
    services_title:"CA Services & More",
    services_subtitle:"Professional services from GDP Consultants — book instantly via WhatsApp",
    svc_ird:"IRD Notice Response",svc_ird_desc:"Received an IRD notice? We respond on your behalf.",svc_ird_price:"Rs.5,000–10,000",
    svc_vat:"VAT Registration",svc_vat_desc:"Get your business VAT-registered with IRD.",svc_vat_price:"Rs.8,000",
    svc_company:"Company Registration",svc_company_desc:"Register a private limited company end-to-end.",svc_company_price:"Rs.15,000",
    svc_audit:"Audit Certificate",svc_audit_desc:"Statutory audit certificate for your business.",svc_audit_price:"Rs.25,000",
    svc_amended:"Amended Return",svc_amended_desc:"Fix errors in a previously filed tax return.",svc_amended_price:"Rs.5,000",
    svc_payroll:"Payroll / APIT",svc_payroll_desc:"Monthly APIT payroll for you and your employees.",svc_payroll_price:"Rs.2,000/emp/mo",
    svc_book_btn:"Book via WhatsApp",
    tools_epf:"EPF Retirement Planner",
    tools_networth:"Net Worth Dashboard",
    tools_loan:"Loan & Mortgage Calculator",
    tools_vat:"VAT Threshold Monitor",
    tools_invest:"Investment & WHT Tracker",
    tools_advtax:"Advance Tax Planner",
    tools_rental:"Rental Property Manager",
    pro_gate:"🔒 Pro Plan Feature",
    biz_gate:"🔒 Business Plan Feature",
    unlock_cta:"Upgrade to unlock this feature",
    book_consult:"Book a Consultation",

    referral_title:"Earn Free Months — Refer a Friend",
    referral_desc:"For every friend who subscribes, you get 1 month FREE added to your account.",
    referral_how:"How it works:",
    referral_step1:"1. Share your personal referral link with friends",
    referral_step2:"2. They subscribe using your name as referral",
    referral_step3:"3. WhatsApp us — we add 1 free month to your account",
    referral_share:"Share My Referral",
    tier_title:"Choose Your Plan",
    tier_basic:"Basic",tier_pro:"Pro",tier_biz:"Business",
    tier_basic_price:"Rs.4,800/yr",tier_pro_price:"Rs.12,000/yr",tier_biz_price:"Rs.24,000/yr",
    tier_basic_desc:"App only — self-service",tier_pro_desc:"App + filing + 1hr consult",tier_biz_desc:"App + quarterly reviews + bookkeeping",
    savings_title:"💡 Tax Saving Opportunities",
    savings_none:"Great — you are maximising your current reliefs.",
  },
  si:{
    nav_dashboard:"සාරාංශය", nav_book:"ලේජරය", nav_income:"ආදායම",
    nav_tax:"බදු", nav_reports:"වාර්තා", nav_help:"උදව්",
    trial_ended:"නිදහස් අත්හදා බැලීම අවසන් විය", sub_expired:"දායකත්වය කල් ඉකුත් විය",
    trial_msg:"ඔබගේ දින 30 නිදහස් අත්හදා බැලීම අවසන් විය. ඉදිරියට යාමට ගෙවන්න.",
    expired_msg:"ඔබගේ වාර්ෂික දායකත්වය කල් ඉකුත් විය. නැවත ලබා ගැනීමට අළුත් කරන්න.",
    have_code:"සක්‍රිය කේතයක් ඇතිද? මෙහි ඇතුළු කරන්න", hide_code:"කේතය සඟවන්න",
    activate:"සක්‍රිය කරන්න", save:"සුරකින්න", cancel:"අවලංගු", add:"එකතු කරන්න",
    edit:"සංස්කරණය", delete:"මකන්න", close:"වසන්න", language:"භාෂාව",
    lang_en:"English", lang_si:"සිංහල", lang_ta:"தமிழ்",
    device_transfer:"උපාංගය මාරු කරනවාද?",
    device_transfer_msg:"වෙනත් උපාංගයකින් දායකත්වය ගෙවා ඇත්නම්? නොමිලේ මාරු කේතයක් ඉල්ලා සිටින්න.",
    device_transfer_btn:"උපාංග මාරුව ඉල්ලන්න",
    device_transfer_info:"WhatsApp හරහා GDP Consultants හා සම්බන්ධ වන්න. නව සක්‍රිය කේතයක් නොමිලේ ලබා දෙනු ඇත.",
    total_balance:"මුළු ශේෂය", settings:"සැකසීම්",
    onboard_welcome:"FinTax LK වෙත සාදරයෙන් පිළිගනිමු",
    annual_plan:"වාර්ෂික ප්‍රිමියම් සැලැස්ම", pay_btn:"PayHere හරහා රු.12,000 ගෙවන්න",
    or_pay_online:"හෝ මාර්ගගතව ගෙවන්න", processing:"⏳ PayHere සකසමින්...",
    code_label:"ඔබගේ GDP Consultants සක්‍රිය කේතය ඇතුළු කරන්න:",
    code_hint:"ආකෘතිය: GDP-XXXX-XXXX · WhatsApp හෝ email හරහා ලැබේ",
    offline_hint:"බැංකු හෝ මුදල් ගෙවූවිද? WhatsApp:",
    checking:"⏳", activated:"✅ දායකත්වය සක්‍රිය විය! යෙදුම ලෝඩ් වෙමින්...",
    reissue:"♻️ නැවත නිකුත් කරන්න (උපාංග මාරුව)", reissue_confirm:"නව උපාංගයකට සක්‍රිය කිරීමට මෙම කේතය නැවත සක්‍රිය කරන්නද?",
    nav_services:"සේවා",
    services_title:"CA සේවා",services_subtitle:"GDP Consultants හරහා WhatsApp ඔස්සේ වෙන්කර ගන්න",
    svc_ird:"IRD නිවේදනය",svc_ird_desc:"IRD නිවේදනයක් ලැබුණාද? අපි ඔබ වෙනුවෙන් පිළිතුරු දෙමු.",svc_ird_price:"රු.5,000–10,000",
    svc_vat:"VAT ලියාපදිංචිය",svc_vat_desc:"ව්‍යාපාරය VAT ලියාපදිංචි කරන්න.",svc_vat_price:"රු.8,000",
    svc_company:"සමාගම් ලියාපදිංචිය",svc_company_desc:"පෞද්ගලික සීමිත සමාගමක් ලියාපදිංචි කරන්න.",svc_company_price:"රු.15,000",
    svc_audit:"විගණන සහතිකය",svc_audit_desc:"ව්‍යාපාරය සඳහා ව්‍යවස්ථාපිත විගණනය.",svc_audit_price:"රු.25,000",
    svc_amended:"සංශෝධිත ප්‍රතිලාභය",svc_amended_desc:"කලින් ගොනු කළ බදු ප්‍රතිලාභයේ දෝෂ නිවැරදි කරන්න.",svc_amended_price:"රු.5,000",
    svc_payroll:"වැටුප් / APIT",svc_payroll_desc:"ඔබේ සේවකයන් සඳහා මාසික APIT.",svc_payroll_price:"රු.2,000/සේවක/මාසය",
    svc_book_btn:"WhatsApp ඔස්සේ",
    referral_title:"යොමු කිරීමෙන් නොමිලේ මාස ලබා ගන්න",
    referral_desc:"යොමු කෙනෙකු දායක වූ විට ඔබට නොමිලේ 1 මාසයක් ලැබේ.",
    referral_how:"ක්‍රමය:",referral_step1:"1. ඔබේ රෙෆරල් ලින්ක් හිතවතුන්ට යොමු කරන්න",referral_step2:"2. ඔවුන් ඔබේ නම දිය යුතුය",referral_step3:"3. WhatsApp ඔස්සේ දන්වන්න — නොමිලේ 1 මාසය",
    referral_share:"රෙෆරල් බෙදා ගන්න",
    tier_title:"සැලැස්ම තෝරන්න",tier_basic:"මූලික",tier_pro:"Pro",tier_biz:"ව්‍යාපාරික",
    tier_basic_price:"රු.4,800/වර්ෂ",tier_pro_price:"රු.12,000/වර්ෂ",tier_biz_price:"රු.24,000/වර්ෂ",
    tier_basic_desc:"App පමණයි",tier_pro_desc:"App + ගොනු කිරීම + 1 පැය",tier_biz_desc:"App + කාර්තු + ගිණුම් ලේඛනය",
    savings_title:"💡 බදු ඉතිරි කිරීමේ ඉඟි",savings_none:"ප්‍රශස්ත! ඔබ දැනට සියලු සහනාශ ලබා ගනිමින් සිටී.",
  },
  ta:{
    nav_dashboard:"டாஷ்போர்டு", nav_book:"ஏடு", nav_income:"வருமானம்",
    nav_tax:"வரி", nav_reports:"அறிக்கைகள்", nav_help:"உதவி",
    trial_ended:"இலவச சோதனை முடிந்தது", sub_expired:"சந்தா காலாவதியானது",
    trial_msg:"உங்கள் 30 நாள் இலவச சோதனை முடிந்தது. தொடர செலுத்தவும்.",
    expired_msg:"உங்கள் ஆண்டு சந்தா காலாவதியானது. மீண்டும் பெற புதுப்பிக்கவும்.",
    have_code:"செயல்படுத்தல் குறியீடு உள்ளதா? இங்கே உள்ளிடவும்", hide_code:"குறியீட்டை மறைக்கவும்",
    activate:"செயல்படுத்து", save:"சேமிக்கவும்", cancel:"ரத்து செய்", add:"சேர்க்கவும்",
    edit:"திருத்தவும்", delete:"நீக்கவும்", close:"மூடவும்", language:"மொழி",
    lang_en:"English", lang_si:"සිංහල", lang_ta:"தமிழ்",
    device_transfer:"சாதனம் மாற்றுகிறீர்களா?",
    device_transfer_msg:"வேறு சாதனத்தில் சந்தா செலுத்தினீர்களா? இலவச மாற்று குறியீடு கோரவும்.",
    device_transfer_btn:"சாதன மாற்று கோரவும்",
    device_transfer_info:"GDP Consultants-�ை WhatsApp வழி தொடர்பு கொள்ளவும். புதிய சாதனுக்கு இலவசமாக குறியீடு வழங்கப்படும்.",
    total_balance:"மொத்த இருப்பு", settings:"அமைப்புகள்",
    onboard_welcome:"FinTax LK-க்கு வரவேற்கிறோம்",
    annual_plan:"வருடாந்திர பிரீமியம் திட்டம்", pay_btn:"PayHere வழி ரூ.12,000 செலுத்தவும்",
    or_pay_online:"அல்லது ஆன்லைனில் செலுத்தவும்", processing:"⏳ PayHere செயலாக்கம்...",
    code_label:"உங்கள் GDP Consultants செயல்படுத்தல் குறியீட்டை உள்ளிடவும்:",
    code_hint:"வடிவம்: GDP-XXXX-XXXX · WhatsApp அல்லது மின்னஞ்சல் வழி கிடைக்கும்",
    offline_hint:"வங்கி அல்லது பணமாக செலுத்தினீர்களா? WhatsApp:",
    checking:"⏳", activated:"✅ சந்தா செயல்படுத்தப்பட்டது! செயலி ஏற்றுகிறது...",
    reissue:"♻️ மீண்டும் வழங்கு (சாதன மாற்று)", reissue_confirm:"புதிய சாதனத்தில் செயல்படுத்த இந்த குறியீட்டை மீண்டும் திறக்கவா?",
    nav_services:"சேவைகள்",
    services_title:"CA சேவைகள்",services_subtitle:"GDP Consultants - WhatsApp வழி பதிவு செய்யவும்",
    svc_ird:"IRD அறிவிப்பு பதில்",svc_ird_desc:"IRD அறிவிப்பு வந்தால் நாங்கள் பதிலிடுவோம்.",svc_ird_price:"ரூ.5,000–10,000",
    svc_vat:"VAT பதிவு",svc_vat_desc:"உங்கள் வணிகத்தை VAT பதிவு செய்யுங்கள்.",svc_vat_price:"ரூ.8,000",
    svc_company:"நிறுவன பதிவு",svc_company_desc:"தனியார் நிறுவனம் பதிவு செய்யவும்.",svc_company_price:"ரூ.15,000",
    svc_audit:"தணிக்கை சான்றிதழ்",svc_audit_desc:"சட்டபூர்வ தணிக்கை சான்றிதழ்.",svc_audit_price:"ரூ.25,000",
    svc_amended:"திருத்தப்பட்ட வரி",svc_amended_desc:"முன்பு தாக்கல் செய்த வரிப் படிவத்தில் திருத்தங்கள்.",svc_amended_price:"ரூ.5,000",
    svc_payroll:"சம்பளப்பட்டியல்",svc_payroll_desc:"ஊழியர்களுக்கான மாதாந்திர APIT.",svc_payroll_price:"ரூ.2,000/ஊழியர்/மாதம்",
    svc_book_btn:"WhatsApp வழி பதிவு",
    referral_title:"நண்பர்களை பரிந்துரையுங்கள்",referral_desc:"ஒவ்வொரு நண்பர் சந்தா செலுத்தும்போதும் 1 மாதம் இலவசம்.",
    referral_how:"எப்படி:",referral_step1:"1. நண்பர்களுக்கு பரிந்துரை இணைப்பை அனுப்பவும்",referral_step2:"2. அவர்கள் உங்கள் பெயரை குறிப்பிட வேண்டும்",referral_step3:"3. WhatsApp செய்யுங்கள் — 1 மாதம் இலவசம்",
    referral_share:"பரிந்துரை பகிர்",
    tier_title:"திட்டம் தேர்வு",tier_basic:"அடிப்படை",tier_pro:"Pro",tier_biz:"வணிகம்",
    tier_basic_price:"ரூ.4,800/ஆண்டு",tier_pro_price:"ரூ.12,000/ஆண்டு",tier_biz_price:"ரூ.24,000/ஆண்டு",
    tier_basic_desc:"செயலி மட்டும்",tier_pro_desc:"செயலி + தாக்கல் + 1 மணி",tier_biz_desc:"செயலி + காலாண்டு + கணக்கியல்",
    savings_title:"💡 வரி சேமிப்பு வாய்ப்புகள்",savings_none:"சிறப்பு! தற்போது அனைத்து நிவாரணங்களும் பெறுகிறீர்கள்.",
  },
};
const T=(lang,key)=>TRANSLATIONS[lang]?.[key]||TRANSLATIONS.en[key]||key;

// ─── Language Selector Component ───────────────────────────────────────────────
function LangSelector({lang,setLang,dark=false}){
  const opts=[["en","🇬🇧"],["si","🇱🇰 සි"],["ta","🇱🇰 த"]];
  return(
    <div style={{display:"flex",gap:4,alignItems:"center"}}>
      {opts.map(([l,label])=>(
        <button key={l} onClick={()=>setLang(l)}
          style={{padding:"3px 7px",fontSize:10,fontWeight:lang===l?"800":"500",
            background:lang===l?(dark?"#1a0050":"#0a2a1a"):"transparent",
            border:`1px solid ${lang===l?(dark?"#7c3aed":"#10b981"):"#334155"}`,
            borderRadius:6,color:lang===l?(dark?"#c4b5fd":"#6ee7b7"):"#64748b",
            cursor:"pointer",transition:"all 0.2s"}}>
          {label}
        </button>
      ))}
    </div>
  );
}

// ─── Year Selector Component ───────────────────────────────────────────────────
function YearSelector({activeYear,switchYear}){
  const [open,setOpen] = useState(false);
  return(
    <div style={{position:"relative"}}>
      <button onClick={()=>setOpen(o=>!o)} style={{background:"#1e293b",border:"1px solid #b8960c",borderRadius:6,padding:"4px 8px",color:"#f5d060",fontSize:10,fontWeight:"800",cursor:"pointer",display:"flex",alignItems:"center",gap:4}}>
        📅 {activeYear.slice(2)} {open?"▲":"▼"}
      </button>
      {open&&(
        <div style={{position:"absolute",top:"100%",right:0,zIndex:999,background:"#0d1829",border:"1px solid #b8960c",borderRadius:8,padding:4,minWidth:120,marginTop:2,boxShadow:"0 8px 24px rgba(0,0,0,0.8)"}}>
          <div style={{fontSize:9,color:"#b8960c",fontWeight:"800",padding:"4px 8px 2px",letterSpacing:0.5}}>TAX YEAR</div>
          {ALL_TAX_YEARS.map(yr=>(
            <button key={yr} onClick={()=>{switchYear(yr);setOpen(false);}}
              style={{display:"block",width:"100%",textAlign:"left",background:yr===activeYear?"#1e3a1a":"transparent",border:"none",borderRadius:5,padding:"6px 8px",color:yr===activeYear?"#34d399":"#94a3b8",fontSize:11,fontWeight:yr===activeYear?"800":"400",cursor:"pointer"}}>
              {yr===activeYear?"✓ ":""}{yr}
            </button>
          ))}
        </div>
      )}
    </div>
  );
}
const SUBSCRIPTION_PRICE  = 12_000;
const FREE_TRIAL_DAYS     = 30;
const PAYHERE_MERCHANT    = "1234567"; // Replace with real PayHere Merchant ID

// ═══════════════════════════════════════════════════════════════════════════════
// ─── PER-YEAR TAX CONFIG — Sri Lanka Inland Revenue Act & Amendments ─────────
// Sources: IRA No.24/2017 · Finance Act No.18/2021 · IRA Amendment No.45/2022 ·
//          Budget 2023 (Circular No. EF/TAX/2023/01) · Budget 2024 · Budget 2025
// ═══════════════════════════════════════════════════════════════════════════════
const TAX_YEAR_CONFIG = {

  // ── 2022/2023 ── Finance Act No.18 of 2021 + Inland Revenue Amendment Act No.45 of 2022
  // Personal relief raised to Rs.3,000,000 from April 2021. Amendment Act No.45/2022
  // introduced the 6-band progressive slab structure effective FY 2022/23.
  // Qualifying payments cap Rs.1,200,000; export income 15% flat.
  "2022/2023": {
    personalRelief:       3_000_000,
    qpCap:                1_200_000,
    maxRefund:              180_000,
    filingThreshold:      3_000_000,
    exportRate:                0.15,
    aitRate:                   0.10,
    apitMonthlyThreshold:   250_000,  // Employer APIT starts above Rs.250,000/month
    act: "IRA No.24/2017 + Amendment No.45/2022",
    // Progressive slabs on taxable income (after personal relief & QP deduction)
    // 6 bands × Rs.500,000 each, then 36% on balance
    slabs: [
      { min:0,         max:  500_000, rate:0.06, label:"First Rs.500,000 @ 6%"       },
      { min:  500_000, max:1_000_000, rate:0.12, label:"Next Rs.500,000 @ 12%"       },
      { min:1_000_000, max:1_500_000, rate:0.18, label:"Next Rs.500,000 @ 18%"       },
      { min:1_500_000, max:2_000_000, rate:0.24, label:"Next Rs.500,000 @ 24%"       },
      { min:2_000_000, max:2_500_000, rate:0.30, label:"Next Rs.500,000 @ 30%"       },
      { min:2_500_000, max:Infinity,  rate:0.36, label:"Balance above Rs.2.5M @ 36%" },
    ],
    notes: [
      "Personal relief Rs.3,000,000 applies to all resident taxpayers",
      "Mandatory AITR filing if gross income > Rs.3,000,000",
      "APIT: Employer deducts monthly from employment income > Rs.250,000/month",
      "Export/foreign-sourced income taxed at flat 15% (s.59 IRA)",
      "Qualifying payments (life insurance, EPF voluntary, approved charity): max Rs.1,200,000 deduction",
      "WHT on dividends: 15% | FD interest: 5% (creditable against final tax)",
    ],
  },

  // ── 2023/2024 ── Budget 2023 (presented Nov 2022) + IRD Circular EF/TAX/2023
  // Same slab structure as 2022/23. Key changes: SVAT adjustments, withholding
  // rate on interest revised from 5% to 5% (retained). No change to personal relief.
  // Compliance ruling: CGT on shares (listed) remains exempt; unlisted gains taxable.
  "2023/2024": {
    personalRelief:       3_000_000,
    qpCap:                1_200_000,
    maxRefund:              180_000,
    filingThreshold:      3_000_000,
    exportRate:                0.15,
    aitRate:                   0.10,
    apitMonthlyThreshold:   250_000,
    act: "IRA No.24/2017 + Amendment No.45/2022 (continued)",
    slabs: [
      { min:0,         max:  500_000, rate:0.06, label:"First Rs.500,000 @ 6%"       },
      { min:  500_000, max:1_000_000, rate:0.12, label:"Next Rs.500,000 @ 12%"       },
      { min:1_000_000, max:1_500_000, rate:0.18, label:"Next Rs.500,000 @ 18%"       },
      { min:1_500_000, max:2_000_000, rate:0.24, label:"Next Rs.500,000 @ 24%"       },
      { min:2_000_000, max:2_500_000, rate:0.30, label:"Next Rs.500,000 @ 30%"       },
      { min:2_500_000, max:Infinity,  rate:0.36, label:"Balance above Rs.2.5M @ 36%" },
    ],
    notes: [
      "Personal relief Rs.3,000,000 unchanged from 2022/23",
      "Mandatory AITR filing if gross income > Rs.3,000,000",
      "WHT on dividends: 15% | Interest income WHT: 5%",
      "Capital gains on disposal of listed shares: EXEMPT from IIT",
      "Unlisted share disposals: gains included in assessable income",
      "APIT employer monthly threshold: Rs.250,000/month salary",
      "Late filing penalty: 5% of tax + 1% per month (max 12 months)",
    ],
  },

  // ── 2024/2025 ── Budget 2024 (presented Nov 2023) — Significant restructuring
  // Personal relief REDUCED from Rs.3,000,000 to Rs.1,800,000 to broaden tax base.
  // New first slab: Rs.1,000,000 @ 6% (doubled from Rs.500,000) as partial offset.
  // Filing threshold also reduced to Rs.1,800,000 bringing more taxpayers into the net.
  // IRD Compliance Ruling 2024/01: Stricter transfer pricing documentation required.
  "2024/2025": {
    personalRelief:       1_800_000,
    qpCap:                1_200_000,
    maxRefund:              180_000,
    filingThreshold:      1_800_000,
    exportRate:                0.15,
    aitRate:                   0.10,
    apitMonthlyThreshold:   150_000,  // Threshold reduced — employer APIT from Rs.150k/month
    act: "Budget 2024 — IRA Amendment (effective April 1, 2024)",
    slabs: [
      { min:0,         max:1_000_000, rate:0.06, label:"First Rs.1,000,000 @ 6%"      },
      { min:1_000_000, max:1_500_000, rate:0.12, label:"Next Rs.500,000 @ 12%"        },
      { min:1_500_000, max:2_000_000, rate:0.18, label:"Next Rs.500,000 @ 18%"        },
      { min:2_000_000, max:2_500_000, rate:0.24, label:"Next Rs.500,000 @ 24%"        },
      { min:2_500_000, max:3_000_000, rate:0.30, label:"Next Rs.500,000 @ 30%"        },
      { min:3_000_000, max:Infinity,  rate:0.36, label:"Balance above Rs.3.0M @ 36%"  },
    ],
    notes: [
      "⚠️ Personal relief REDUCED to Rs.1,800,000 (was Rs.3,000,000 in 2022/23–2023/24)",
      "Mandatory AITR filing if gross income > Rs.1,800,000 (more taxpayers now required)",
      "Employer APIT deduction now applies from Rs.150,000/month salary (threshold lowered)",
      "First slab widened to Rs.1,000,000 @ 6% to partially offset reduced relief",
      "WHT on dividends: 15% | Interest: 5% — creditable against final IIT",
      "Export/foreign income: 15% flat rate maintained",
      "Capital gains on disposal of shares in unlisted companies remain assessable",
    ],
  },

  // ── 2025/2026 ── Budget 2025 (Act No.2 of 2025) — same structure as 2024/25
  "2025/2026": {
    personalRelief:       1_800_000,
    qpCap:                1_200_000,
    maxRefund:              180_000,
    filingThreshold:      1_800_000,
    exportRate:                0.15,
    aitRate:                   0.10,
    apitMonthlyThreshold:   150_000,
    act: "Act No. 2 of 2025",
    slabs: [
      { min:0,         max:1_000_000, rate:0.06, label:"First Rs.1,000,000 @ 6%"      },
      { min:1_000_000, max:1_500_000, rate:0.12, label:"Next Rs.500,000 @ 12%"        },
      { min:1_500_000, max:2_000_000, rate:0.18, label:"Next Rs.500,000 @ 18%"        },
      { min:2_000_000, max:2_500_000, rate:0.24, label:"Next Rs.500,000 @ 24%"        },
      { min:2_500_000, max:3_000_000, rate:0.30, label:"Next Rs.500,000 @ 30%"        },
      { min:3_000_000, max:Infinity,  rate:0.36, label:"Balance above Rs.3.0M @ 36%"  },
    ],
    notes: [
      "Personal relief Rs.1,800,000 (unchanged from 2024/25)",
      "Mandatory AITR filing if gross income > Rs.1,800,000",
      "APIT employer threshold: Rs.150,000/month",
      "Qualifying payments deduction: max Rs.1,200,000",
      "Refund on APIT excess: capped at Rs.180,000 per year",
    ],
  },

  // ── 2026/2027 ── Subject to Budget 2026 (structure assumed same as 2025/26)
  "2026/2027": {
    personalRelief:       1_800_000,
    qpCap:                1_200_000,
    maxRefund:              180_000,
    filingThreshold:      1_800_000,
    exportRate:                0.15,
    aitRate:                   0.10,
    apitMonthlyThreshold:   150_000,
    act: "Budget 2026 (Provisional — subject to amendment)",
    slabs: [
      { min:0,         max:1_000_000, rate:0.06, label:"First Rs.1,000,000 @ 6%"      },
      { min:1_000_000, max:1_500_000, rate:0.12, label:"Next Rs.500,000 @ 12%"        },
      { min:1_500_000, max:2_000_000, rate:0.18, label:"Next Rs.500,000 @ 18%"        },
      { min:2_000_000, max:2_500_000, rate:0.24, label:"Next Rs.500,000 @ 24%"        },
      { min:2_500_000, max:3_000_000, rate:0.30, label:"Next Rs.500,000 @ 30%"        },
      { min:3_000_000, max:Infinity,  rate:0.36, label:"Balance above Rs.3.0M @ 36%"  },
    ],
    notes: [
      "Rates subject to Budget 2026 — verify with IRD before filing",
    ],
  },
};

// ─── Helper: get config for active year (falls back to latest known) ───────────
const getTaxCfg = yr => TAX_YEAR_CONFIG[yr] || TAX_YEAR_CONFIG["2025/2026"];

// YEAR_RELIEF derived from TAX_YEAR_CONFIG — must be after TAX_YEAR_CONFIG declaration
const YEAR_RELIEF = Object.fromEntries(ALL_TAX_YEARS.map(y=>[y,(TAX_YEAR_CONFIG[y]||TAX_YEAR_CONFIG["2025/2026"]).personalRelief]));

// Legacy constants (used in non-year-specific contexts / backwards compat)
const PERSONAL_RELIEF     = 1_800_000;
const QP_CAP              = 1_200_000;
const MAX_REFUND          = 180_000;
const MANDATORY_THRESHOLD = 1_800_000;
const EXPORT_TAX_RATE     = 0.15;
const AIT_RATE            = 0.10;
// IIT_SLABS kept for backwards compat — computeTax now uses year-specific slabs
const IIT_SLABS = TAX_YEAR_CONFIG["2025/2026"].slabs;

// Freelancer allowable expense categories
const FREELANCER_EXPENSE_CATS = [
  "Home Office Rent","Equipment & Technology","Software & Subscriptions","Travel & Transport",
  "Professional Development","Marketing & Advertising","Professional Fees","Bank Charges",
  "Communication (Phone/Internet)","Stationery & Printing","Repairs & Maintenance","Other Business Expense"
];

const INCOME_CATS_SALARIED   = ["Employment","Rental","Investment","Export/Foreign","Other Income"];
const INCOME_CATS_FREELANCER = ["Freelance/Contract","Business Income","Rental","Investment","Export/Foreign","Other Income"];

const TXN_CATS_INCOME  = ["Salary/Employment","Freelance Receipt","Business Receipt","Rental Receipt","Investment/Dividend","Export Receipt","Refund","Other Receipt"];
const TXN_CATS_EXPENSE = ["Business Expense","Personal Expense","Tax Payment","Rent Payment","Food & Groceries","Transport","Medical","Education","Entertainment","Utilities","Loan/EMI","Other Expense"];

const SL_BANKS = ["Bank of Ceylon","People's Bank","Commercial Bank","Hatton National Bank","Sampath Bank","NDB Bank","Nations Trust Bank","DFCC Bank","Seylan Bank","Pan Asia Bank","Regional Development Bank","Other"];

const RESIDENCY_OPTS = [
  { v:"resident_citizen",         l:"Resident Citizen",         short:"RC",   desc:"183+ days in SL · Worldwide income · Full personal relief" },
  { v:"resident_non_citizen",     l:"Resident Non-Citizen",     short:"RNC",  desc:"Non-SL citizen · 183+ days · Full relief applies" },
  { v:"non_resident_citizen",     l:"Non-Resident Citizen",     short:"NRC",  desc:"SL citizen · <183 days · SL-source income · Relief applies" },
  { v:"non_resident_non_citizen", l:"Non-Resident Non-Citizen", short:"NRNC", desc:"Non-citizen · <183 days · SL-source only · NO relief" },
];

// ─── Helpers ───────────────────────────────────────────────────────────────────
const fmt   = n => "Rs. " + Math.abs(n??0).toLocaleString("en-LK",{minimumFractionDigits:2,maximumFractionDigits:2});
const fmtC  = n => { const a=Math.abs(n??0); return a>=1e6?"Rs."+(a/1e6).toFixed(2)+"M":a>=1000?"Rs."+(a/1000).toFixed(1)+"K":"Rs."+a.toFixed(0); };
const today = () => new Date().toISOString().slice(0,10);
const uid   = () => Math.random().toString(36).slice(2,9);
const daysDiff = (d1,d2) => Math.floor((new Date(d1)-new Date(d2))/86400000);

function computeTax(profile, incomeEntries, expenseEntries, taxSettings, activeYear) {
  // ── Resolve year-specific tax configuration ──────────────────────────────────
  const yr  = activeYear || taxSettings?.assessmentYear || DEFAULT_YEAR;
  const cfg = getTaxCfg(yr);

  const isFreelancer = profile?.employmentType === "freelancer";
  const residency    = taxSettings?.residency || "resident_citizen";
  const isNRNC       = residency === "non_resident_non_citizen";
  const relief       = isNRNC ? 0 : cfg.personalRelief;
  const qpRelief     = isNRNC ? 0 : Math.min(taxSettings?.qualifyingPayments||0, cfg.qpCap);

  // Income totals by category
  const incByCat = {};
  incomeEntries.forEach(e => { incByCat[e.category] = (incByCat[e.category]||0) + e.amount; });
  const totalGross   = Object.values(incByCat).reduce((s,v)=>s+v,0);
  const exportIncome = incByCat["Export/Foreign"] || 0;
  const slIncome     = totalGross - exportIncome;

  // Freelancer: deduct allowable business expenses
  let allowableExpenses = 0;
  let expenseBreakdown  = {};
  if(isFreelancer){
    expenseEntries.filter(e=>e.isBusiness).forEach(e=>{
      allowableExpenses += e.amount;
      expenseBreakdown[e.category] = (expenseBreakdown[e.category]||0) + e.amount;
    });
  }

  const netIncome  = slIncome - allowableExpenses;
  const taxable    = Math.max(0, netIncome - relief - qpRelief);

  // ── Apply year-specific progressive slabs ───────────────────────────────────
  let gradTax=0;
  const breakdown=[];
  for(const s of cfg.slabs){
    if(taxable<=s.min) break;
    const chunk=Math.min(taxable-s.min, s.max===Infinity ? taxable-s.min : s.max-s.min);
    const t=chunk*s.rate;
    gradTax+=t;
    breakdown.push({label:s.label, rate:s.rate, chunk, tax:t});
  }

  const exportTax  = exportIncome * cfg.exportRate;
  const grossTax   = gradTax + exportTax;
  const apitPaid   = taxSettings?.apitPaid || 0;
  // Refund is capped at cfg.maxRefund for salaried (APIT excess)
  const refundDue  = !isFreelancer ? Math.min(Math.max(0, apitPaid - grossTax), cfg.maxRefund) : 0;
  const netTax     = Math.max(0, grossTax - apitPaid);

  // Mandatory filing check
  const mustFile   = totalGross > cfg.filingThreshold;

  // Quarterly advance tax for freelancers (25% each quarter — s.72 IRA)
  const quarterlyTax = isFreelancer ? netTax/4 : 0;

  return {
    taxable, slIncome, netIncome, relief, qpRelief, grossTax, exportTax, apitPaid, netTax,
    breakdown, isNRNC, incByCat, totalGross, exportIncome, allowableExpenses, expenseBreakdown,
    quarterlyTax, isFreelancer, refundDue, mustFile,
    // Year config summary (for UI display)
    cfg, yr,
    personalRelief: cfg.personalRelief, qpCap: cfg.qpCap, maxRefund: cfg.maxRefund,
  };
}

function computePenalty(netTax, filingDate) {
  if(!filingDate || netTax<=0) return { lateFee:0, monthly:0, total:0, months:0, isLate:false };
  const due   = new Date("2026-11-30");
  const filed = new Date(filingDate);
  if(filed<=due) return { lateFee:0, monthly:0, total:0, months:0, isLate:false };
  const months  = Math.ceil((filed-due)/(30.44*86400000));
  const lateFee = netTax*0.05;
  const monthly = netTax*0.01*months;
  return { lateFee, monthly, total:lateFee+monthly, months, isLate:true };
}

// ─── Storage ───────────────────────────────────────────────────────────────────
async function load(key,shared=false){try{const v=localStorage.getItem(key);return v?JSON.parse(v):null;}catch{return null;}}
async function save(key,val,shared=false){try{localStorage.setItem(key,JSON.stringify(val));}catch{}}
async function sdel(key,shared=false){try{localStorage.removeItem(key);}catch{}}

// ─── Activation Code Helpers ───────────────────────────────────────────────────
function genCode(){
  const chars="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
  const seg=n=>Array.from({length:n},()=>chars[Math.floor(Math.random()*chars.length)]).join("");
  return "GDP-"+seg(4)+"-"+seg(4);
}
async function saveCode(code,meta){
  const existing=(await load("fintax_codes",true))||{};
  existing[code]={...meta,used:false,createdAt:new Date().toISOString()};
  await save("fintax_codes",existing,true);
}
async function validateCode(code){
  const codes=(await load("fintax_codes",true))||{};
  const entry=codes[code?.trim().toUpperCase()];
  if(!entry) return {valid:false,reason:"Code not found. Check with GDP Consultants."};
  if(entry.used) return {valid:false,reason:"Code already activated on another device."};
  return {valid:true,entry};
}
async function markCodeUsed(code,usedBy){
  const codes=(await load("fintax_codes",true))||{};
  if(codes[code]) codes[code]={...codes[code],used:true,usedAt:new Date().toISOString(),usedBy};
  await save("fintax_codes",codes,true);
}

// ─── Admin Notifications ───────────────────────────────────────────────────────
async function notifyAdmin(type, data){
  try{
    const key=`admin_notif_${uid()}`;
    const notif={ id:key, type, data, timestamp:new Date().toISOString() };
    await save(key, notif, true); // shared=true so admin can see
    // Also append to admin log list
    const log=(await load("admin_notif_log",true))||[];
    log.push(notif);
    await save("admin_notif_log", log.slice(-200), true); // keep last 200
  }catch(e){}
}

// ─── ROOT APP ──────────────────────────────────────────────────────────────────
function App(){
// ── PWA: inject manifest + register service worker ───────────────────────────
  useEffect(()=>{
    // Embedded icons as data URIs (GDP Consultants logo)
    const ICON192="data:image/png;base64,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";
    const ICON512="data:image/png;base64,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Fmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJFmb40ee3rz900XwU8aPPb15+6aL4KDTJZm7bXpO4u+hfgoE8aPPb15+6aL4KjPG2Kb7jTE9XibE1d4fdqzc8IqOiZHv7jGsb5LAGjRrWjgBy7UHioiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIg/9k=";

    // Build manifest blob
    const manifest={
      name:"FinTax LK",
      short_name:"FinTax LK",
      description:"Personal Finance & Tax Management for Sri Lanka. IIT computation, unified ledger, IRD compliance. By GDP Consultants — Chartered Accountants.",
      start_url:"/",
      display:"standalone",
      background_color:"#0D1829",
      theme_color:"#B8860C",
      orientation:"portrait",
      lang:"en",
      categories:["finance","productivity"],
      icons:[
        {src:ICON192,sizes:"192x192",type:"image/png",purpose:"any maskable"},
        {src:ICON512,sizes:"512x512",type:"image/png",purpose:"any maskable"},
      ]
    };
    const blob=new Blob([JSON.stringify(manifest)],{type:"application/manifest+json"});
    const blobUrl=URL.createObjectURL(blob);

    // Inject <link rel="manifest">
    let link=document.querySelector("link[rel='manifest']");
    if(!link){ link=document.createElement("link"); link.rel="manifest"; document.head.appendChild(link); }
    link.href=blobUrl;

    // Inject theme-color meta
    let meta=document.querySelector("meta[name='theme-color']");
    if(!meta){ meta=document.createElement("meta"); meta.name="theme-color"; document.head.appendChild(meta); }
    meta.content="#B8860C";

    // Inject apple-touch-icon
    let apple=document.querySelector("link[rel='apple-touch-icon']");
    if(!apple){ apple=document.createElement("link"); apple.rel="apple-touch-icon"; document.head.appendChild(apple); }
    apple.href=ICON192;

    // Set page title
    document.title="FinTax LK — Finance & Tax Manager";

    // Register service worker (sw.js must be in public/ root)
    if("serviceWorker" in navigator){
      navigator.serviceWorker.register("/sw.js").catch(()=>{/* sw optional */});
    }

    return()=>URL.revokeObjectURL(blobUrl);
  },[]);
  // ─────────────────────────────────────────────────────────────────────────────

  const [screen,setScreen]   = useState("boot");
  const [tab,setTab]         = useState("dashboard");
  const [sub,setSub]         = useState(null);
  const [profile,setProfile] = useState(null);
  const [adminMode,setAdminMode]   = useState(false);
  const [adminPinScreen,setAdminPinScreen] = useState(false); // PIN entry gate
  const [logoTaps,setLogoTaps]     = useState(0);
  const logoTapTimer = useRef(null);
  const [lang,setLangState]  = useState("en");
  const [activeYear,setActiveYear] = useState(DEFAULT_YEAR);

  const setLang = useCallback(async(l)=>{ setLangState(l); await save("fintax_lang",l); },[]);
  const t = (key)=>T(lang,key);

  const [data,setData] = useState(DEFAULT_DATA_FACTORY());

  useEffect(()=>{
    (async()=>{
      const[savedSub,savedProfile,savedLang,savedYear]=await Promise.all([load("fintax_sub_v4"),load("fintax_profile_v4"),load("fintax_lang"),load("fintax_active_year")]);
      if(savedLang) setLangState(savedLang);
      const yr=savedYear||DEFAULT_YEAR;
      if(savedYear) setActiveYear(yr);
      const stored=await load(yearKey(yr));
      if(stored) setData(stored);
      if(savedProfile) setProfile(savedProfile);
      if(savedSub){ setSub(savedSub); setScreen(savedProfile?"main":"onboard"); }
      else{
        const trial={startDate:today(),plan:"trial"};
        setSub(trial); await save("fintax_sub_v4",trial);
        setScreen(savedProfile?"main":"onboard");
      }
    })();
  },[]);

  // When year changes, load that year's data
  useEffect(()=>{
    (async()=>{
      const stored=await load(yearKey(activeYear));
      setData(stored||DEFAULT_DATA_FACTORY());
    })();
  },[activeYear]);

  const update=useCallback((patch)=>{
    setData(prev=>{ const next={...prev,...patch}; save(yearKey(activeYear),next); return next; });
  },[activeYear]);

  const switchYear=useCallback(async(yr)=>{
    setActiveYear(yr);
    await save("fintax_active_year",yr);
  },[]);

  const saveProfile=useCallback(async(p)=>{
    setProfile(p); await save("fintax_profile_v4",p);
    // Auto-create bank account
    if(p.bankName&&p.accountNo){
      setData(prev=>{
        const exists=prev.bankAccounts.find(a=>a.accountNo===p.accountNo);
        if(exists) return prev;
        const acc={id:uid(),name:p.accountLabel||"Main Account",bank:p.bankName,accountNo:p.accountNo,accountType:p.accountType,opening:parseFloat(p.openingBankBalance)||0};
        const next={...prev,bankAccounts:[...prev.bankAccounts,acc],cashOpeningBalance:parseFloat(p.openingCashBalance)||0};
        save("fintax_v4",next); return next;
      });
    }
    // Admin notification: new user
    await notifyAdmin("REGISTRATION",{name:p.name,mobile:p.mobile,tin:p.tin,nic:p.nic,employmentType:p.employmentType,city:p.city});
    setScreen("main");
  },[]);

  const activatePaid=useCallback(async(source="payhere",codeUsed=null)=>{
    const s={startDate:today(),plan:"paid",expiryDate:new Date(Date.now()+365*86400000).toISOString().slice(0,10),paidAt:new Date().toISOString(),activatedVia:source};
    setSub(s); await save("fintax_sub_v4",s);
    await notifyAdmin("PAYMENT_RECEIVED",{name:profile?.name,mobile:profile?.mobile,amount:SUBSCRIPTION_PRICE,plan:"Annual",paidAt:s.paidAt,expiryDate:s.expiryDate,activatedVia:source,code:codeUsed||""});
  },[profile]);

  const activateWithCode=useCallback(async(code)=>{
    const result=await validateCode(code);
    if(!result.valid) return {ok:false,reason:result.reason};
    await markCodeUsed(code.trim().toUpperCase(),{name:profile?.name,mobile:profile?.mobile,activatedAt:new Date().toISOString()});
    await activatePaid("activation_code",code.trim().toUpperCase());
    return {ok:true};
  },[profile,activatePaid]);

  // Secret admin: tap logo 7× in 3s → opens PIN screen
  const handleLogoTap=()=>{
    setLogoTaps(t=>t+1);
    clearTimeout(logoTapTimer.current);
    logoTapTimer.current=setTimeout(()=>setLogoTaps(0),3000);
    if(logoTaps>=6){ setLogoTaps(0); setAdminPinScreen(true); }
  };

  if(screen==="boot") return <Splash/>;
  if(adminPinScreen) return <AdminPinGate
    onSuccess={()=>{ setAdminPinScreen(false); setAdminMode(true); }}
    onCancel={()=>{ setAdminPinScreen(false); setLogoTaps(0); }}
  />;
  if(adminMode) return <AdminPanel onExit={()=>setAdminMode(false)} lang={lang} setLang={setLang}/>;
  if(screen==="onboard") return <Onboarding onComplete={saveProfile} existing={profile} lang={lang} setLang={setLang}/>;


  const trialDaysLeft=sub?.plan==="trial"?Math.max(0,FREE_TRIAL_DAYS-daysDiff(today(),sub.startDate)):null;
  const isLocked=(sub?.plan==="trial"&&daysDiff(today(),sub.startDate)>=FREE_TRIAL_DAYS)||(sub?.plan==="paid"&&daysDiff(today(),sub.expiryDate)>0);
  if(isLocked) return <Paywall onPay={activatePaid} onActivateCode={activateWithCode} reason={sub?.plan==="trial"?"trial":"expired"} profile={profile} lang={lang} setLang={setLang}/>;

  // Derived
  const cashBalance  = (data.cashOpeningBalance||0) + data.transactions.filter(t=>t.medium==="cash").reduce((s,t)=>s+(t.type==="income"?t.amount:-t.amount),0);
  const bankBalance  = acc=>(acc.opening||0)+data.transactions.filter(t=>t.medium==="bank"&&t.accountId===acc.id).reduce((s,t)=>s+(t.type==="income"?t.amount:-t.amount),0);
  const totalBankBal = data.bankAccounts.reduce((s,a)=>s+bankBalance(a),0);
  const incomeCats   = profile?.employmentType==="freelancer"?INCOME_CATS_FREELANCER:INCOME_CATS_SALARIED;
  const tax          = computeTax(profile, data.incomeEntries, data.expenseEntries, data.taxSettings, activeYear);

  const props={data,update,profile,setProfile:saveProfile,tax,cashBalance,totalBankBal,bankBalance,trialDaysLeft,onUpgrade:activatePaid,onActivateCode:activateWithCode,sub,incomeCats,handleLogoTap,lang,setLang,t,activeYear,switchYear};

  return(
    <div style={S.phone}>
      <style>{`
        @keyframes pulseGold {
          0%,100%{box-shadow:0 0 0 0 rgba(184,150,12,0.7);transform:scale(1)}
          50%{box-shadow:0 0 0 8px rgba(184,150,12,0);transform:scale(1.06)}
        }
        @keyframes pulseCyan {
          0%,100%{box-shadow:0 0 0 0 rgba(6,182,212,0.7);transform:scale(1)}
          50%{box-shadow:0 0 0 8px rgba(6,182,212,0);transform:scale(1.06)}
        }
        @keyframes shimmer {
          0%{background-position:-200% center}
          100%{background-position:200% center}
        }
        @keyframes bounceArrow {
          0%,100%{transform:translateY(0)}
          50%{transform:translateY(4px)}
        }
        .pulse-gold { animation: pulseGold 1.6s ease-in-out infinite; }
        .pulse-cyan { animation: pulseCyan 1.6s ease-in-out infinite; }
      `}</style>
      <StatusBar trialDaysLeft={trialDaysLeft} profile={profile} onEditProfile={()=>setScreen("onboard")} onLogoTap={handleLogoTap} lang={lang} setLang={setLang} activeYear={activeYear} switchYear={switchYear}/>
      <div style={S.screen}>
        {tab==="dashboard"&&<Dashboard   {...props}/>}
        {tab==="book"     &&<TransactionBook {...props}/>}
        {tab==="income"   &&<IncomePage   {...props}/>}
        {tab==="tax"      &&<TaxPage      {...props}/>}
        {tab==="reports"  &&<ReportsPage  {...props}/>}
        {tab==="services" &&<ServicesPage {...props}/>}
        {tab==="tools"   &&<ToolsPage   {...props}/>}
        {tab==="help"&&<HelpPage {...props}/>}
      </div>
      <NavBar tab={tab} setTab={setTab} profile={profile} lang={lang}/>
    </div>
  );
}

// ─── ONBOARDING ────────────────────────────────────────────────────────────────
function Onboarding({onComplete,existing,lang="en",setLang}){
  const [step,setStep]=useState(0);
  const [p,setP]=useState(existing||{
    name:"",mobile:"",nic:"",tin:"",email:"",employmentType:"",
    address1:"",address2:"",city:"",district:"",
    bankName:"",branch:"",accountLabel:"",accountNo:"",accountType:"Savings",
    openingBankBalance:"0",openingCashBalance:"0",
    residency:"resident_citizen",slDays:"",
  });
  const set=f=>setP(prev=>({...prev,...f}));

  const steps=[
    {title:"Personal Info",     icon:"👤"},
    {title:"Work Type",         icon:"💼"},
    {title:"Address",           icon:"🏠"},
    {title:"Bank & Cash",       icon:"🏦"},
    {title:"Tax Profile",       icon:"📋"},
  ];
  const valid=[
    p.name&&p.mobile,
    !!p.employmentType,
    p.address1&&p.city,
    p.bankName&&p.accountNo&&p.accountLabel,
    true,
  ];

  return(
    <div style={S.phone}>
      {/* Header */}
      <div style={{background:"linear-gradient(135deg,#030710,#0a1228)",padding:"16px 16px 0"}}>
        <div style={{display:"flex",alignItems:"center",gap:10,marginBottom:12}}>
          <img src={LOGO_B64} alt="" style={{width:44,height:44,borderRadius:"50%",border:"2px solid #b8960c"}}/>
          <div style={{flex:1}}>
            <div style={{fontSize:17,fontWeight:"900",color:"#f5d060",letterSpacing:0.5}}>{APP_NAME}</div>
            <div style={{fontSize:9,color:"#b8960c",letterSpacing:0.5}}>{APP_BRAND_LINE.toUpperCase()}</div>
          </div>
          {setLang&&<LangSelector lang={lang} setLang={setLang}/>}
        </div>
        <div style={{display:"flex",gap:3,marginBottom:0}}>
          {steps.map((s,i)=>(
            <div key={i} style={{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:3}}>
              <div style={{width:"100%",height:3,borderRadius:2,background:i<=step?"#b8960c":"#1e293b",transition:"background 0.3s"}}/>
              <div style={{fontSize:8,color:i===step?"#f5d060":"#334155",fontWeight:i===step?"700":"400"}}>{s.icon}{i===step?" "+s.title:""}</div>
            </div>
          ))}
        </div>
      </div>

      <div style={{flex:1,overflowY:"auto",padding:"20px 16px 100px"}}>

        {step===0&&<>
          <div style={S.onbTitle}>👤 Personal Details</div>
          <div style={S.onbSub}>Your information appears on all tax reports and filings</div>
          <FI label="Full Name *" value={p.name} onChange={v=>set({name:v})} placeholder="As per NIC / Passport"/>
          <FI label="Mobile Number *" type="tel" value={p.mobile} onChange={v=>set({mobile:v})} placeholder="07X XXXXXXX"/>
          <FI label="NIC Number" value={p.nic} onChange={v=>set({nic:v})} placeholder="e.g. 901234567V or 199012345678"/>
          <FI label="TIN Number" value={p.tin} onChange={v=>set({tin:v})} placeholder="IRD Tax Identification Number"/>
          <FI label="Email Address" type="email" value={p.email} onChange={v=>set({email:v})} placeholder="your@email.com"/>
        </>}

        {step===1&&<>
          <div style={S.onbTitle}>💼 Employment Type</div>
          <div style={S.onbSub}>This determines your tax calculation method per the IRD Act</div>
          <div style={{display:"flex",flexDirection:"column",gap:10,marginBottom:16}}>
            {[
              { v:"salaried", icon:"🏢", title:"Salaried Employee", desc:"Employed by a company. APIT deducted monthly by employer. Standard employment income rules. Tax computed on salary + other income." },
              { v:"freelancer", icon:"💻", title:"Freelancer / Self-Employed", desc:"Independent contractor, sole trader, or professional. Business income rules apply. Allowable business expenses deductible. Advance tax quarterly." },
            ].map(opt=>(
              <div key={opt.v} onClick={()=>set({employmentType:opt.v})}
                style={{...S.empCard,...(p.employmentType===opt.v?S.empCardA:{})}}>
                <div style={{display:"flex",gap:14,alignItems:"flex-start"}}>
                  <span style={{fontSize:32}}>{opt.icon}</span>
                  <div style={{flex:1}}>
                    <div style={{fontSize:15,fontWeight:"800",color:p.employmentType===opt.v?"#f5d060":"#f1f5f9",marginBottom:4}}>{opt.title}</div>
                    <div style={{fontSize:11,color:"#94a3b8",lineHeight:1.6}}>{opt.desc}</div>
                  </div>
                  <div style={{width:18,height:18,borderRadius:"50%",border:"2px solid "+(p.employmentType===opt.v?"#b8960c":"#334155"),background:p.employmentType===opt.v?"#b8960c":"transparent",flexShrink:0,marginTop:4}}/>
                </div>
              </div>
            ))}
          </div>
          {p.employmentType==="freelancer"&&(
            <div style={{background:"#0a1a0a",border:"1px solid #064e3b",borderRadius:10,padding:"12px"}}>
              <div style={{fontSize:12,color:"#6ee7b7",fontWeight:"700",marginBottom:6}}>🧮 Freelancer Tax Rules (IRD Act No.2/2025)</div>
              {["Business expenses are deductible from gross income","Advance tax due quarterly (25% per quarter)","No APIT — you manage your own tax payments","Export/foreign income taxed at flat 15%","Maintain proper books of accounts (required by IRD)"].map(r=><div key={r} style={{fontSize:11,color:"#64748b",padding:"2px 0"}}>• {r}</div>)}
            </div>
          )}
          {p.employmentType==="salaried"&&(
            <div style={{background:"#0a1a0a",border:"1px solid #064e3b",borderRadius:10,padding:"12px"}}>
              <div style={{fontSize:12,color:"#6ee7b7",fontWeight:"700",marginBottom:6}}>🧮 Salaried Employee Tax Rules</div>
              {["APIT deducted monthly by employer from salary","Employment income + other income (rental, investment)","Personal relief Rs.1,800,000/year","Qualifying payments deductible up to Rs.1,200,000","File AITR if total income exceeds Rs.1,800,000"].map(r=><div key={r} style={{fontSize:11,color:"#64748b",padding:"2px 0"}}>• {r}</div>)}
            </div>
          )}
        </>}

        {step===2&&<>
          <div style={S.onbTitle}>🏠 Contact & Address</div>
          <div style={S.onbSub}>Registered address for IRD correspondence</div>
          <FI label="Address Line 1 *" value={p.address1} onChange={v=>set({address1:v})} placeholder="House No. / Street"/>
          <FI label="Address Line 2"   value={p.address2} onChange={v=>set({address2:v})} placeholder="Area / Village (Optional)"/>
          <FI label="City *"    value={p.city}     onChange={v=>set({city:v})}     placeholder="e.g. Colombo"/>
          <FI label="District"  value={p.district} onChange={v=>set({district:v})} placeholder="e.g. Colombo"/>
          <div style={{background:"#0a1a14",border:"1px solid #064e3b",borderRadius:10,padding:"10px 12px",marginTop:8}}>
            <div style={{fontSize:11,color:"#6ee7b7",fontWeight:"700"}}>💡 IRD Tip</div>
            <div style={{fontSize:11,color:"#94a3b8",marginTop:4,lineHeight:1.6}}>Ensure this matches your IRD-registered address. Update at ird.gov.lk or your nearest IRD office if different.</div>
          </div>
        </>}

        {step===3&&<>
          <div style={S.onbTitle}>🏦 Bank & Cash Details</div>
          <div style={S.onbSub}>Opening balances as at 01 April 2025 (start of tax year)</div>
          <div style={{background:"#1a1200",border:"1px solid #b8960c",borderRadius:10,padding:"12px",marginBottom:16}}>
            <div style={{fontSize:12,color:"#f5d060",fontWeight:"700",marginBottom:6}}>💵 Opening Cash Balance</div>
            <FI label="Cash in Hand on 01 Apr 2025 (Rs.)" type="number" value={p.openingCashBalance} onChange={v=>set({openingCashBalance:v})} placeholder="e.g. 50000"/>
          </div>
          <div style={{background:"#0a1a3a",border:"1px solid #1d4ed8",borderRadius:10,padding:"12px",marginBottom:8}}>
            <div style={{fontSize:12,color:"#93c5fd",fontWeight:"700",marginBottom:10}}>🏦 Primary Bank Account</div>
            <div style={{marginBottom:10}}><label style={S.lbl}>Bank Name *</label><select value={p.bankName} onChange={e=>set({bankName:e.target.value})} style={S.inp}><option value="">Select Bank...</option>{SL_BANKS.map(b=><option key={b}>{b}</option>)}</select></div>
            <FI label="Branch"         value={p.branch}       onChange={v=>set({branch:v})}       placeholder="e.g. Colombo Fort"/>
            <FI label="Account Label *" value={p.accountLabel} onChange={v=>set({accountLabel:v})} placeholder="e.g. Savings Account"/>
            <FI label="Account Number *" value={p.accountNo}   onChange={v=>set({accountNo:v})}   placeholder="Full account number"/>
            <div style={{marginBottom:10}}><label style={S.lbl}>Account Type</label><select value={p.accountType} onChange={e=>set({accountType:e.target.value})} style={S.inp}>{["Savings","Current","Fixed Deposit"].map(t=><option key={t}>{t}</option>)}</select></div>
            <FI label="Bank Opening Balance on 01 Apr 2025 (Rs.)" type="number" value={p.openingBankBalance} onChange={v=>set({openingBankBalance:v})} placeholder="e.g. 250000"/>
          </div>
          <div style={{background:"#1a0000",border:"1px solid #ef4444",borderRadius:10,padding:"10px 12px"}}>
            <div style={{fontSize:11,color:"#f87171",fontWeight:"700"}}>🔒 Security Notice</div>
            <div style={{fontSize:11,color:"#94a3b8",marginTop:4}}>All data is stored only on your device. GDP Consultants never transmits your financial information to any external server.</div>
          </div>
        </>}

        {step===4&&<>
          <div style={S.onbTitle}>📋 Tax Profile</div>
          <div style={S.onbSub}>Your residency status determines applicable tax rules</div>
          <FI label="Days in Sri Lanka This Year" type="number" value={p.slDays} onChange={v=>set({slDays:v})} placeholder="e.g. 250 (183+ days = Resident)"/>
          {p.slDays&&(
            <div style={{fontSize:11,color:parseInt(p.slDays)>=183?"#34d399":"#f59e0b",marginBottom:12,padding:"8px 10px",background:parseInt(p.slDays)>=183?"#0a2a1a":"#1a1000",borderRadius:8,border:"1px solid "+(parseInt(p.slDays)>=183?"#064e3b":"#92400e")}}>
              {parseInt(p.slDays)>=183?"✓ RESIDENT for tax purposes (183+ days)":"⚠️ NON-RESIDENT for tax purposes (<183 days)"}
            </div>
          )}
          <div style={{marginBottom:10}}><div style={{...S.lbl,marginBottom:8}}>Residency Status *</div>
            {RESIDENCY_OPTS.map(o=>(
              <div key={o.v} onClick={()=>set({residency:o.v})} style={{...S.resOpt,...(p.residency===o.v?S.resOptA:{})}}>
                <div style={{display:"flex",alignItems:"flex-start",gap:10}}>
                  <div style={{width:15,height:15,borderRadius:"50%",border:"2px solid "+(p.residency===o.v?"#b8960c":"#334155"),background:p.residency===o.v?"#b8960c":"transparent",flexShrink:0,marginTop:2}}/>
                  <div><div style={{fontSize:12,fontWeight:"700",color:p.residency===o.v?"#f5d060":"#e2e8f0"}}>{o.l} <span style={{fontSize:9,background:"#1e293b",padding:"1px 5px",borderRadius:3,color:"#64748b"}}>{o.short}</span></div><div style={{fontSize:10,color:"#64748b"}}>{o.desc}</div></div>
                </div>
              </div>
            ))}
          </div>
        </>}
      </div>

      <div style={{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:430,background:"#030710",borderTop:"1px solid #1e293b",padding:"12px 16px",boxSizing:"border-box",display:"flex",gap:10}}>
        {step>0&&<button style={{...S.secBtn,flex:1}} onClick={()=>setStep(s=>s-1)}>← Back</button>}
        {step<4?(
          <button style={{...S.submitBtn,flex:2,opacity:valid[step]?1:0.5}} onClick={()=>{if(valid[step])setStep(s=>s+1);}} disabled={!valid[step]}>
            Next Step →
          </button>
        ):(
          <button style={{...S.submitBtn,flex:2,background:"linear-gradient(135deg,#b8960c,#f5d060)",color:"#111"}} onClick={()=>onComplete(p)}>
            ✓ Launch {APP_NAME}
          </button>
        )}
      </div>
    </div>
  );
}

// ─── SPLASH ────────────────────────────────────────────────────────────────────
function Splash(){
  return(
    <div style={{...S.phone,justifyContent:"center",alignItems:"center",gap:0,background:"linear-gradient(160deg,#030710,#0a1228)"}}>
      <img src={LOGO_B64} alt="" style={{width:90,height:90,borderRadius:"50%",border:"3px solid #b8960c",marginBottom:16}}/>
      <div style={{fontSize:26,fontWeight:"900",color:"#f5d060",letterSpacing:1}}>{APP_NAME}</div>
      <div style={{fontSize:11,color:"#b8960c",marginTop:4,letterSpacing:1}}>{APP_BRAND_LINE.toUpperCase()}</div>
      <div style={{fontSize:10,color:"#334155",marginTop:6}}>{FIRM_NAME}</div>
      <div style={{marginTop:28,display:"flex",gap:4}}>
        {[0,1,2].map(i=><div key={i} style={{width:6,height:6,borderRadius:"50%",background:i===0?"#b8960c":"#1e293b",animation:`pulse${i} 1.2s ${i*0.2}s infinite`}}/>)}
      </div>
    </div>
  );
}

// ─── PAYWALL ───────────────────────────────────────────────────────────────────
function Paywall({onPay,onActivateCode,reason,profile,lang,setLang}){
  const [loading,setLoading]=useState(false);
  const [showCode,setShowCode]=useState(false);
  const [showTransfer,setShowTransfer]=useState(false);
  const [codeInput,setCodeInput]=useState("");
  const [codeStatus,setCodeStatus]=useState(null); // null | "checking" | "ok" | "error"
  const [codeMsg,setCodeMsg]=useState("");

  const handlePay=()=>{setLoading(true);setTimeout(()=>{setLoading(false);onPay();},2000);};

  const handleCodeSubmit=async()=>{
    if(!codeInput.trim()) return;
    setCodeStatus("checking"); setCodeMsg("");
    const result=await onActivateCode(codeInput.trim().toUpperCase());
    if(result.ok){
      setCodeStatus("ok"); setCodeMsg(T(lang,"activated"));
    } else {
      setCodeStatus("error"); setCodeMsg("❌ "+result.reason);
    }
  };

  return(
    <div style={{...S.phone,overflowY:"auto",padding:20,justifyContent:"flex-start",alignItems:"center",background:"linear-gradient(160deg,#060d1a,#0a0a00)"}}>
      {/* Language selector top-right */}
      <div style={{position:"absolute",top:12,right:12,zIndex:10}}>
        <LangSelector lang={lang} setLang={setLang}/>
      </div>
      <img src={LOGO_B64} alt="" style={{width:72,height:72,borderRadius:"50%",border:"2px solid #b8960c",marginBottom:14,marginTop:28}}/>
      <div style={{fontSize:20,fontWeight:"800",color:"#f1f5f9",textAlign:"center",marginBottom:4}}>{reason==="trial"?T(lang,"trial_ended"):T(lang,"sub_expired")}</div>
      <div style={{fontSize:12,color:"#64748b",textAlign:"center",marginBottom:20,lineHeight:1.6,maxWidth:300}}>
        {reason==="trial"?T(lang,"trial_msg"):T(lang,"expired_msg")}
      </div>

      {/* Activation Code Section — shown first / prominent */}
      <div style={{width:"100%",boxSizing:"border-box",marginBottom:10}}>
        <button onClick={()=>{setShowCode(v=>!v);setCodeStatus(null);setCodeMsg("");setShowTransfer(false);}}
          style={{width:"100%",padding:"12px",background:showCode?"#1a1200":"linear-gradient(135deg,#064e3b,#065f46)",border:"2px solid "+(showCode?"#b8960c":"#10b981"),borderRadius:12,color:showCode?"#b8960c":"#6ee7b7",fontWeight:"800",fontSize:14,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8}}>
          🔑 {showCode?T(lang,"hide_code"):T(lang,"have_code")}
        </button>
        {showCode&&(
          <div style={{background:"#0a1a14",border:"2px solid #10b981",borderTop:"none",borderRadius:"0 0 12px 12px",padding:"16px"}}>
            <div style={{fontSize:11,color:"#6ee7b7",fontWeight:"700",marginBottom:4}}>{T(lang,"code_label")}</div>
            <div style={{fontSize:10,color:"#64748b",marginBottom:10}}>{T(lang,"code_hint")}</div>
            <div style={{display:"flex",gap:8,marginBottom:8}}>
              <input
                value={codeInput}
                onChange={e=>setCodeInput(e.target.value.toUpperCase())}
                onKeyDown={e=>{if(e.key==="Enter")handleCodeSubmit();}}
                placeholder="GDP-XXXX-XXXX"
                maxLength={12}
                style={{...S.inp,flex:1,fontFamily:"monospace",fontSize:15,fontWeight:"700",letterSpacing:2,textAlign:"center",marginBottom:0,background:"#0a2a1a",borderColor:"#10b981"}}
              />
              <button onClick={handleCodeSubmit} disabled={!codeInput.trim()||codeStatus==="checking"||codeStatus==="ok"}
                style={{background:codeStatus==="checking"?"#334155":"#10b981",color:"#fff",border:"none",borderRadius:8,padding:"0 16px",fontWeight:"800",fontSize:13,cursor:"pointer",flexShrink:0,minWidth:72}}>
                {codeStatus==="checking"?T(lang,"checking"):T(lang,"activate")}
              </button>
            </div>
            {codeMsg&&(
              <div style={{fontSize:12,fontWeight:"700",color:codeStatus==="ok"?"#34d399":"#f87171",padding:"8px 10px",background:codeStatus==="ok"?"#0a2a1a":"#1a0000",borderRadius:8,border:"1px solid "+(codeStatus==="ok"?"#064e3b":"#7f1d1d")}}>
                {codeMsg}
              </div>
            )}
            <div style={{fontSize:10,color:"#475569",marginTop:8,textAlign:"center"}}>
              {T(lang,"offline_hint")} <span style={{color:"#34d399"}}>{APP_WHATSAPP}</span>
            </div>
          </div>
        )}
      </div>

      {/* Device Transfer Section */}
      <div style={{width:"100%",boxSizing:"border-box",marginBottom:14}}>
        <button onClick={()=>{setShowTransfer(v=>!v);setShowCode(false);}}
          style={{width:"100%",padding:"10px",background:showTransfer?"#0a1525":"transparent",border:"1px solid #334155",borderRadius:10,color:"#64748b",fontWeight:"700",fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:6}}>
          📱 {T(lang,"device_transfer")}
        </button>
        {showTransfer&&(
          <div style={{background:"#0a1525",border:"1px solid #1e3a5f",borderTop:"none",borderRadius:"0 0 10px 10px",padding:"14px"}}>
            <div style={{fontSize:12,color:"#93c5fd",fontWeight:"700",marginBottom:6}}>📱 {T(lang,"device_transfer")}</div>
            <div style={{fontSize:11,color:"#64748b",lineHeight:1.7,marginBottom:10}}>{T(lang,"device_transfer_info")}</div>
            <a href={`https://wa.me/94${APP_WHATSAPP.replace(/^0/,"")}?text=Hello GDP Consultants, I need to transfer my FinTax LK subscription to a new device. My name is ${encodeURIComponent(profile?.name||"")} and my registered mobile is ${profile?.mobile||""}.`}
              target="_blank"
              style={{display:"block",background:"#064e3b",color:"#6ee7b7",border:"1px solid #10b981",borderRadius:8,padding:"10px",fontWeight:"700",fontSize:12,textDecoration:"none",textAlign:"center"}}>
              💬 {T(lang,"device_transfer_btn")} via WhatsApp
            </a>
            <div style={{fontSize:10,color:"#334155",marginTop:8,textAlign:"center"}}>
              Admin will generate a new code for your new device — free of charge
            </div>
          </div>
        )}
      </div>

      {/* Tiered Plans */}
      <div style={{width:"100%",marginBottom:14}}>
        <div style={{textAlign:"center",fontSize:13,fontWeight:"800",color:"#f1f5f9",marginBottom:10}}>Choose Your Plan</div>
        <div style={{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6}}>
          {[
            {name:"Basic",price:"Rs.4,800",sub:"/yr",badge:"",features:["App only","Self-service","All calculations"],color:"#475569",border:"#334155"},
            {name:"Pro",price:"Rs.12,000",sub:"/yr",badge:"✨ POPULAR",features:["App + filing","1hr consult","Free trial"],color:"#b8960c",border:"#b8960c"},
            {name:"Business",price:"Rs.24,000",sub:"/yr",badge:"",features:["Quarterly reviews","Bookkeeping","Priority support"],color:"#a78bfa",border:"#6d28d9"},
          ].map(p=>(
            <div key={p.name} style={{background:"#0a0d1a",border:"2px solid "+p.border,borderRadius:10,padding:"10px 8px",textAlign:"center",position:"relative"}}>
              {p.badge&&<div style={{position:"absolute",top:-8,left:"50%",transform:"translateX(-50%)",background:"#b8960c",color:"#111",fontSize:8,fontWeight:"800",padding:"2px 6px",borderRadius:4,whiteSpace:"nowrap"}}>{p.badge}</div>}
              <div style={{fontSize:12,fontWeight:"800",color:p.color,marginBottom:4}}>{p.name}</div>
              <div style={{fontSize:16,fontWeight:"900",color:"#f1f5f9"}}>{p.price}</div>
              <div style={{fontSize:10,color:"#64748b",marginBottom:8}}>{p.sub}</div>
              {p.features.map(f=><div key={f} style={{fontSize:9,color:"#94a3b8",padding:"1px 0"}}>✓ {f}</div>)}
            </div>
          ))}
        </div>
        <div style={{fontSize:10,color:"#475569",textAlign:"center",marginTop:8}}>
          All plans include a 30-day free trial · WhatsApp us to select Basic or Business
        </div>
      </div>

      {/* Divider */}
      <div style={{display:"flex",alignItems:"center",gap:10,width:"100%",marginBottom:14}}>
        <div style={{flex:1,height:1,background:"#1e293b"}}/>
        <div style={{fontSize:11,color:"#475569",fontWeight:"600"}}>{T(lang,"or_pay_online")}</div>
        <div style={{flex:1,height:1,background:"#1e293b"}}/>
      </div>

      {/* Price Card */}
      <div style={{...S.card,border:"1px solid #b8960c",width:"100%",boxSizing:"border-box",background:"linear-gradient(160deg,#0d0d00,#1a1500)",marginBottom:16}}>
        <div style={{textAlign:"center",color:"#b8960c",fontSize:11,fontWeight:"800",letterSpacing:1,marginBottom:8}}>{T(lang,"annual_plan")}</div>
        <div style={{textAlign:"center",fontSize:36,fontWeight:"900",color:"#f5d060"}}>Rs.12,000<span style={{fontSize:13,color:"#64748b",fontWeight:"400"}}>/year</span></div>
        <div style={{textAlign:"center",fontSize:11,color:"#34d399",fontWeight:"700",margin:"8px 0 14px",padding:"6px",background:"#0a2a1a",borderRadius:8}}>🎁 Includes FREE Tax Return Filing + Tax Advisor Consultation</div>
        {["✓ Unlimited Cash & Bank Transactions","✓ Salaried & Freelancer Tax Computation","✓ Business Expense Deductions","✓ Penalty Calculator & Compliance Alerts","✓ Downloadable Tax Report (PDF)","✓ IRD Filing Guidance","✓ FREE Annual Tax Return Filing","✓ FREE 1-Hour Tax Advisor Consultation","✓ 30-Day Free Trial Included"].map(f=>(
          <div key={f} style={{fontSize:12,color:f.includes("FREE")?"#34d399":"#94a3b8",padding:"4px 0",fontWeight:f.includes("FREE")?"700":"400"}}>{f}</div>
        ))}
      </div>
      <button style={{...S.submitBtn,background:loading?"#374151":"linear-gradient(135deg,#b8960c,#f5d060)",color:loading?"#9ca3af":"#111",fontSize:15,padding:"14px",width:"100%",borderRadius:12,marginBottom:10}} onClick={handlePay} disabled={loading}>
        {loading?T(lang,"processing"):T(lang,"pay_btn")}
      </button>
      <div style={{fontSize:10,color:"#475569",textAlign:"center",marginBottom:16}}>Secured by PayHere · Merchant ID: {PAYHERE_MERCHANT}</div>
      <ContactLinks small/>
    </div>
  );
}


// ─── ADMIN PIN GATE ────────────────────────────────────────────────────────────
// Default PIN is 7749 (GDP → G=7, D=4... using 7-7-4-9 pattern).
// Admin can change it from inside the Admin Dashboard.
const ADMIN_PIN_KEY = "fintax_admin_pin";
const DEFAULT_ADMIN_PIN = "7749";

function AdminPinGate({onSuccess, onCancel}){
  const [pin, setPin]         = useState("");
  const [shake, setShake]     = useState(false);
  const [attempts, setAttempts] = useState(0);
  const [locked, setLocked]   = useState(false);
  const [lockTimer, setLockTimer] = useState(0);
  const timerRef = useRef(null);

  // Lockout countdown
  useEffect(()=>{
    if(locked && lockTimer > 0){
      timerRef.current = setTimeout(()=>setLockTimer(t=>t-1), 1000);
    } else if(locked && lockTimer === 0){
      setLocked(false);
      setAttempts(0);
    }
    return ()=>clearTimeout(timerRef.current);
  },[locked, lockTimer]);

  const handleDigit = async(d) => {
    if(locked) return;
    const next = pin + d;
    setPin(next);
    if(next.length === 4){
      // Retrieve stored PIN (or default)
      const stored = await load(ADMIN_PIN_KEY) || DEFAULT_ADMIN_PIN;
      if(next === stored){
        setPin("");
        onSuccess();
      } else {
        // Wrong PIN
        setShake(true);
        setTimeout(()=>{ setShake(false); setPin(""); }, 600);
        const newAttempts = attempts + 1;
        setAttempts(newAttempts);
        if(newAttempts >= 3){
          setLocked(true);
          setLockTimer(30); // 30s lockout after 3 wrong attempts
        }
      }
    }
  };

  const handleBackspace = () => { if(!locked) setPin(p=>p.slice(0,-1)); };

  const dots = [0,1,2,3].map(i=>(
    <div key={i} style={{
      width:14, height:14, borderRadius:"50%",
      background: i < pin.length ? "#7c3aed" : "transparent",
      border: "2px solid " + (i < pin.length ? "#7c3aed" : "#334155"),
      transition:"all 0.15s",
    }}/>
  ));

  const btnStyle = (d) => ({
    width:72, height:72, borderRadius:36,
    background: locked ? "#0a0f1a" : "linear-gradient(135deg,#0f172a,#1e293b)",
    border:"1px solid #334155",
    color: locked ? "#334155" : "#e2e8f0",
    fontSize:22, fontWeight:"700",
    cursor: locked ? "not-allowed" : "pointer",
    display:"flex", flexDirection:"column",
    alignItems:"center", justifyContent:"center",
    lineHeight:1,
  });

  const SUB = {"2":"ABC","3":"DEF","4":"GHI","5":"JKL","6":"MNO","7":"PQRS","8":"TUV","9":"WXYZ"};

  return(
    <div style={{...S.phone, justifyContent:"center", alignItems:"center", background:"#060d1a"}}>
      <div style={{
        width:"100%", maxWidth:320, padding:"40px 24px",
        display:"flex", flexDirection:"column", alignItems:"center",
        animation: shake ? "pinShake 0.5s ease" : "none",
      }}>
        {/* Logo & Title */}
        <div style={{fontSize:40, marginBottom:8}}>🔐</div>
        <div style={{fontSize:18, fontWeight:"800", color:"#c4b5fd", marginBottom:4}}>Admin Access</div>
        <div style={{fontSize:11, color:"#475569", marginBottom:32}}>GDP Consultants — FinTax LK</div>

        {/* PIN dots */}
        <div style={{display:"flex", gap:16, marginBottom:32}}>
          {dots}
        </div>

        {/* Lockout message */}
        {locked && (
          <div style={{background:"#1a0000", border:"1px solid #ef4444", borderRadius:10, padding:"10px 20px", marginBottom:20, textAlign:"center"}}>
            <div style={{fontSize:12, fontWeight:"700", color:"#ef4444"}}>🔒 Too many attempts</div>
            <div style={{fontSize:11, color:"#94a3b8", marginTop:4}}>Try again in {lockTimer}s</div>
          </div>
        )}

        {/* Attempt warning */}
        {!locked && attempts > 0 && (
          <div style={{fontSize:11, color:"#f59e0b", marginBottom:16}}>
            ⚠️ {3 - attempts} attempt{3-attempts!==1?"s":""} remaining
          </div>
        )}

        {/* Dial Pad */}
        <div style={{display:"grid", gridTemplateColumns:"repeat(3,72px)", gap:12, marginBottom:16}}>
          {["1","2","3","4","5","6","7","8","9"].map(d=>(
            <button key={d} onClick={()=>handleDigit(d)} style={btnStyle(d)}>
              <span>{d}</span>
              {SUB[d]&&<span style={{fontSize:8, color:"#475569", letterSpacing:"0.5px", marginTop:2}}>{SUB[d]}</span>}
            </button>
          ))}
          {/* Bottom row: blank, 0, backspace */}
          <div/>
          <button onClick={()=>handleDigit("0")} style={btnStyle("0")}>
            <span>0</span>
          </button>
          <button onClick={handleBackspace} style={{...btnStyle("⌫"), background:"transparent", border:"none", color:"#7c3aed", fontSize:26}}>
            ⌫
          </button>
        </div>

        {/* Cancel */}
        <button onClick={onCancel} style={{background:"none", border:"none", color:"#475569", fontSize:13, cursor:"pointer", marginTop:8, padding:"8px 20px"}}>
          Cancel
        </button>
      </div>

      {/* Shake animation */}
      <style>{`
        @keyframes pinShake {
          0%,100%{transform:translateX(0)}
          20%{transform:translateX(-10px)}
          40%{transform:translateX(10px)}
          60%{transform:translateX(-8px)}
          80%{transform:translateX(8px)}
        }
      `}</style>
    </div>
  );
}

// ─── ADMIN PANEL ───────────────────────────────────────────────────────────────
function AdminPanel({onExit,lang,setLang}){
  const [log,setLog]=useState([]);
  const [codes,setCodes]=useState({});
  const [loading,setLoading]=useState(true);
  const [view,setView]=useState("codes"); // codes | all | reg | pay | pin
  const [newCode,setNewCode]=useState(null);
  const [noteInput,setNoteInput]=useState("");
  const [generating,setGenerating]=useState(false);
  const [copyMsg,setCopyMsg]=useState("");
  // PIN change state
  const [pinStep,setPinStep]=useState("current"); // current | new | confirm
  const [pinCurrent,setPinCurrent]=useState("");
  const [pinNew,setPinNew]=useState("");
  const [pinConfirm,setPinConfirm]=useState("");
  const [pinMsg,setPinMsg]=useState({type:"",text:""});

  const refreshData=async()=>{
    const [l,c]=await Promise.all([load("admin_notif_log",true),load("fintax_codes",true)]);
    setLog(l||[]); setCodes(c||{}); setLoading(false);
  };
  useEffect(()=>{refreshData();},[]);

  // PIN change handlers
  const handlePinChange=async()=>{
    const stored=await load(ADMIN_PIN_KEY)||DEFAULT_ADMIN_PIN;
    if(pinCurrent!==stored){ setPinMsg({type:"error",text:"Current PIN is incorrect."}); setPinCurrent(""); return; }
    if(pinNew.length!==4||!/^\d{4}$/.test(pinNew)){ setPinMsg({type:"error",text:"New PIN must be exactly 4 digits."}); return; }
    if(pinNew!==pinConfirm){ setPinMsg({type:"error",text:"PINs don't match. Try again."}); setPinConfirm(""); return; }
    await save(ADMIN_PIN_KEY,pinNew);
    setPinMsg({type:"success",text:"✅ PIN changed successfully!"});
    setPinCurrent(""); setPinNew(""); setPinConfirm(""); setPinStep("current");
  };

  const registrations=log.filter(n=>n.type==="REGISTRATION");
  const payments=log.filter(n=>n.type==="PAYMENT_RECEIVED");
  const totalRevenue=payments.reduce((s,p)=>s+(p.data?.amount||0),0);
  const displayed=view==="all"?[...log].reverse():view==="reg"?[...registrations].reverse():[...payments].reverse();

  const allCodes=Object.entries(codes).map(([code,meta])=>({code,...meta})).sort((a,b)=>b.createdAt?.localeCompare(a.createdAt));
  const unusedCodes=allCodes.filter(c=>!c.used);
  const usedCodes=allCodes.filter(c=>c.used);

  const handleGenerate=async()=>{
    setGenerating(true);
    const code=genCode();
    const meta={note:noteInput.trim()||"Manual activation",amount:SUBSCRIPTION_PRICE};
    await saveCode(code,meta);
    setNewCode(code);
    setNoteInput("");
    await refreshData();
    setGenerating(false);
  };

  const handleDeleteCode=async(code)=>{
    const c=(await load("fintax_codes",true))||{};
    delete c[code];
    await save("fintax_codes",c,true);
    await refreshData();
  };

  const handleReissueCode=async(code)=>{
    if(!window.confirm(T(lang,"reissue_confirm"))) return;
    const c=(await load("fintax_codes",true))||{};
    if(c[code]){
      c[code]={...c[code],used:false,usedAt:null,usedBy:null,reissuedAt:new Date().toISOString()};
      await save("fintax_codes",c,true);
      await refreshData();
    }
  };

  const copyToClipboard=(text)=>{
    navigator.clipboard?.writeText(text).then(()=>{setCopyMsg("Copied!");setTimeout(()=>setCopyMsg(""),1500);}).catch(()=>{setCopyMsg(text);});
  };

  return(
    <div style={S.phone}>
      {/* Admin Header */}
      <div style={{background:"linear-gradient(135deg,#0a0020,#1a0040)",padding:"14px 16px",borderBottom:"1px solid #7c3aed",flexShrink:0}}>
        <div style={{display:"flex",justifyContent:"space-between",alignItems:"center"}}>
          <div>
            <div style={{fontSize:16,fontWeight:"800",color:"#c4b5fd"}}>🔐 Admin Dashboard</div>
            <div style={{fontSize:10,color:"#7c3aed"}}>GDP Consultants — {APP_NAME}</div>
          </div>
          <div style={{display:"flex",gap:8,alignItems:"center"}}>
            <LangSelector lang={lang} setLang={setLang} dark/>
            <button style={{background:"#1e0050",border:"1px solid #7c3aed",color:"#a78bfa",borderRadius:8,padding:"6px 12px",fontSize:12,cursor:"pointer"}} onClick={onExit}>✕ Exit</button>
          </div>
        </div>
      </div>

      <div style={{padding:"14px",overflowY:"auto",flex:1,paddingBottom:24}}>

        {/* KPI Row */}
        <div style={S.cardRow}>
          <div style={{...S.card,flex:1,textAlign:"center",border:"1px solid #10b981",padding:"10px 6px"}}>
            <div style={{fontSize:20,fontWeight:"800",color:"#34d399"}}>{registrations.length}</div>
            <div style={{fontSize:9,color:"#64748b"}}>Users</div>
          </div>
          <div style={{...S.card,flex:1,textAlign:"center",border:"1px solid #f59e0b",padding:"10px 6px"}}>
            <div style={{fontSize:20,fontWeight:"800",color:"#fbbf24"}}>{payments.length}</div>
            <div style={{fontSize:9,color:"#64748b"}}>Paid</div>
          </div>
          <div style={{...S.card,flex:1,textAlign:"center",border:"1px solid #10b981",padding:"10px 6px"}}>
            <div style={{fontSize:14,fontWeight:"800",color:"#6ee7b7"}}>{unusedCodes.length}</div>
            <div style={{fontSize:9,color:"#64748b"}}>Active Codes</div>
          </div>
          <div style={{...S.card,flex:1,textAlign:"center",border:"1px solid #b8960c",padding:"10px 6px"}}>
            <div style={{fontSize:13,fontWeight:"800",color:"#f5d060"}}>{fmtC(totalRevenue)}</div>
            <div style={{fontSize:9,color:"#64748b"}}>Revenue</div>
          </div>
        </div>

        {/* Tab Navigation */}
        <div style={{display:"flex",gap:5,marginBottom:14,flexWrap:"wrap"}}>
          {[["codes","🔑 Codes"],["all","📋 All"],["reg","👤 Users"],["pay","💳 Payments"],["pin","🔒 PIN"]].map(([v,l])=>(
            <button key={v} style={{...S.tBtn,flexShrink:0,...(view===v?{background:"#1a0050",borderColor:"#7c3aed",color:"#c4b5fd"}:{})}} onClick={()=>{setView(v);setPinMsg({type:"",text:""});}}>{l}</button>
          ))}
          <button style={{...S.tBtn,marginLeft:"auto",fontSize:10}} onClick={refreshData}>🔄 Refresh</button>
        </div>

        {/* ═══ CODES TAB ═══ */}
        {view==="codes"&&(
          <>
            {/* Generate Code */}
            <div style={{...S.card,border:"2px solid #7c3aed",background:"linear-gradient(160deg,#0a0020,#1a0040)",marginBottom:14}}>
              <div style={{fontSize:13,fontWeight:"800",color:"#c4b5fd",marginBottom:12}}>🔑 Generate Activation Code</div>
              <div style={{fontSize:11,color:"#7c3aed",marginBottom:10,lineHeight:1.6}}>
                Generate a unique code for a subscriber who paid via bank transfer, cash, or any offline method. Send the code to the user via WhatsApp/email — they enter it in the app to activate their subscription.
              </div>
              <div style={{marginBottom:10}}>
                <label style={{...S.lbl,color:"#a78bfa"}}>Note / Customer Name (optional)</label>
                <input value={noteInput} onChange={e=>setNoteInput(e.target.value)} placeholder="e.g. Kamal Perera - Bank Transfer 18/07/2025" style={{...S.inp,background:"#0a0020",borderColor:"#4c1d95",color:"#e2e8f0"}}/>
              </div>
              <button onClick={handleGenerate} disabled={generating} style={{width:"100%",padding:"12px",background:generating?"#1e0050":"linear-gradient(135deg,#7c3aed,#a78bfa)",border:"none",borderRadius:10,color:"#fff",fontWeight:"800",fontSize:14,cursor:"pointer"}}>
                {generating?"⏳ Generating...":"⚡ Generate New Activation Code"}
              </button>

              {/* Newly generated code — prominent display */}
              {newCode&&(
                <div style={{marginTop:14,background:"#050010",border:"2px solid #a78bfa",borderRadius:12,padding:"16px",textAlign:"center"}}>
                  <div style={{fontSize:11,color:"#a78bfa",fontWeight:"700",marginBottom:8,letterSpacing:1}}>✅ CODE GENERATED — SEND TO SUBSCRIBER</div>
                  <div style={{fontSize:28,fontWeight:"900",color:"#f5d060",letterSpacing:4,fontFamily:"monospace",marginBottom:12}}>{newCode}</div>
                  <button onClick={()=>copyToClipboard(newCode)} style={{background:"#7c3aed",color:"#fff",border:"none",borderRadius:8,padding:"8px 20px",fontWeight:"700",fontSize:13,cursor:"pointer",marginBottom:8,width:"100%"}}>
                    📋 {copyMsg||"Tap to Copy Code"}
                  </button>
                  <a href={`https://wa.me/94?text=Dear Customer, your FinTax LK activation code is: ${newCode}%0AEnter this code in the app to activate your 1-year subscription.%0AThank you - GDP Consultants`} target="_blank"
                    style={{display:"block",background:"#064e3b",color:"#6ee7b7",border:"1px solid #10b981",borderRadius:8,padding:"8px 20px",fontWeight:"700",fontSize:13,textDecoration:"none",marginBottom:4}}>
                    💬 Send via WhatsApp
                  </a>
                  <div style={{fontSize:10,color:"#475569",marginTop:6}}>Code is saved and ready. User enters it in the app → 1-year access granted automatically.</div>
                </div>
              )}
            </div>

            {/* Unused Codes */}
            {unusedCodes.length>0&&(
              <div style={S.card}>
                <div style={{...S.cardTitle,color:"#a78bfa"}}>⏳ Active (Unused) Codes — {unusedCodes.length}</div>
                {unusedCodes.map(c=>(
                  <div key={c.code} style={{padding:"10px 0",borderBottom:"1px solid #1e293b"}}>
                    <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}}>
                      <div style={{flex:1}}>
                        <div style={{fontSize:16,fontWeight:"900",color:"#f5d060",fontFamily:"monospace",letterSpacing:2}}>{c.code}</div>
                        <div style={{fontSize:10,color:"#64748b",marginTop:2}}>{c.note||"No note"} · {c.createdAt?new Date(c.createdAt).toLocaleDateString("en-LK"):""}</div>
                      </div>
                      <div style={{display:"flex",gap:6,flexShrink:0}}>
                        <button onClick={()=>copyToClipboard(c.code)} style={{background:"#1e293b",color:"#94a3b8",border:"1px solid #334155",borderRadius:6,padding:"4px 8px",fontSize:10,cursor:"pointer"}}>📋</button>
                        <button onClick={()=>handleDeleteCode(c.code)} style={{background:"#7f1d1d",color:"#fca5a5",border:"none",borderRadius:6,padding:"4px 8px",fontSize:10,cursor:"pointer"}}>🗑</button>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            )}

            {/* Used Codes */}
            {usedCodes.length>0&&(
              <div style={{...S.card,opacity:0.85}}>
                <div style={{...S.cardTitle,color:"#64748b"}}>✅ Used Codes — {usedCodes.length}</div>
                <div style={{fontSize:10,color:"#334155",marginBottom:8}}>♻️ Use "Reissue" to allow a subscriber to activate on a NEW device (device transfer)</div>
                {usedCodes.map(c=>(
                  <div key={c.code} style={{padding:"10px 0",borderBottom:"1px solid #1e293b"}}>
                    <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}}>
                      <div style={{flex:1}}>
                        <div style={{fontSize:13,fontWeight:"700",color:"#475569",fontFamily:"monospace",letterSpacing:1,textDecoration:"line-through"}}>{c.code}</div>
                        <div style={{fontSize:10,color:"#334155"}}>{c.note||""} · Used by: {c.usedBy?.name||c.usedBy?.mobile||"Unknown"} · {c.usedAt?new Date(c.usedAt).toLocaleDateString("en-LK"):""}</div>
                        {c.reissuedAt&&<div style={{fontSize:9,color:"#7c3aed"}}>♻️ Reissued: {new Date(c.reissuedAt).toLocaleDateString("en-LK")}</div>}
                      </div>
                      <button onClick={()=>handleReissueCode(c.code)}
                        style={{background:"#1a0040",color:"#a78bfa",border:"1px solid #7c3aed",borderRadius:6,padding:"4px 8px",fontSize:9,cursor:"pointer",flexShrink:0,fontWeight:"700"}}>
                        {T(lang,"reissue")}
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            )}

            {allCodes.length===0&&<Empty icon="🔑" text="No activation codes yet. Generate one above."/>}
          </>
        )}

        {/* ═══ OTHER TABS ═══ */}
        {view!=="codes"&&(
          loading?<div style={{color:"#64748b",fontSize:13,textAlign:"center",padding:20}}>Loading...</div>:
          displayed.length===0?<Empty icon="📭" text="No entries yet"/>:displayed.map(n=>(
            <div key={n.id} style={{...S.card,border:"1px solid "+(n.type==="PAYMENT_RECEIVED"?"#f59e0b":"#10b981"),marginBottom:8}}>
              <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:6}}>
                <span style={{fontSize:12,fontWeight:"700",color:n.type==="PAYMENT_RECEIVED"?"#fbbf24":"#34d399"}}>
                  {n.type==="REGISTRATION"?"👤 New Registration":"💳 Payment / Activation"}
                </span>
                <span style={{fontSize:9,color:"#475569"}}>{new Date(n.timestamp).toLocaleString("en-LK")}</span>
              </div>
              {n.type==="REGISTRATION"&&(
                <>
                  <div style={{fontSize:12,color:"#e2e8f0"}}><b>{n.data?.name}</b> · {n.data?.mobile}</div>
                  {n.data?.tin&&<div style={{fontSize:11,color:"#64748b"}}>TIN: {n.data.tin}</div>}
                  {n.data?.nic&&<div style={{fontSize:11,color:"#64748b"}}>NIC: {n.data.nic}</div>}
                  <div style={{fontSize:11,color:"#64748b"}}>{n.data?.city} · {n.data?.employmentType==="freelancer"?"💻 Freelancer":"🏢 Salaried"}</div>
                </>
              )}
              {n.type==="PAYMENT_RECEIVED"&&(
                <>
                  <div style={{fontSize:12,color:"#e2e8f0"}}><b>{n.data?.name}</b> · {n.data?.mobile}</div>
                  <div style={{fontSize:13,color:"#fbbf24",fontWeight:"700"}}>{fmt(n.data?.amount||0)} · via {n.data?.activatedVia||"PayHere"}</div>
                  {n.data?.code&&<div style={{fontSize:11,color:"#a78bfa"}}>Code: {n.data.code}</div>}
                  <div style={{fontSize:11,color:"#64748b"}}>Expires: {n.data?.expiryDate}</div>
                </>
              )}
            </div>
          ))
        )}
        {/* ═══ PIN TAB ═══ */}
        {view==="pin"&&(
          <div>
            <div style={{...S.card,border:"2px solid #7c3aed",background:"linear-gradient(160deg,#0a0020,#1a0040)",marginBottom:14}}>
              <div style={{fontSize:13,fontWeight:"800",color:"#c4b5fd",marginBottom:4}}>🔒 Change Admin PIN</div>
              <div style={{fontSize:11,color:"#7c3aed",marginBottom:14,lineHeight:1.6}}>
                Your PIN protects the admin dashboard. Default PIN is <strong style={{color:"#f5d060",letterSpacing:2}}>7749</strong>. Change it immediately if you haven't already.
              </div>
              {pinMsg.text&&(
                <div style={{background:pinMsg.type==="success"?"#052a22":"#1a0000",border:`1px solid ${pinMsg.type==="success"?"#10b981":"#ef4444"}`,borderRadius:8,padding:"10px 12px",marginBottom:12,fontSize:12,color:pinMsg.type==="success"?"#6ee7b7":"#fca5a5",fontWeight:"600"}}>
                  {pinMsg.text}
                </div>
              )}
              <label style={{...S.lbl,color:"#a78bfa"}}>Current PIN</label>
              <input type="password" inputMode="numeric" maxLength={4} value={pinCurrent}
                onChange={e=>setPinCurrent(e.target.value.replace(/\D/g,"").slice(0,4))}
                placeholder="Enter current PIN"
                style={{...S.inp,background:"#0a0020",borderColor:"#4c1d95",color:"#e2e8f0",letterSpacing:8,fontSize:18,marginBottom:12}}/>
              <label style={{...S.lbl,color:"#a78bfa"}}>New PIN (4 digits)</label>
              <input type="password" inputMode="numeric" maxLength={4} value={pinNew}
                onChange={e=>setPinNew(e.target.value.replace(/\D/g,"").slice(0,4))}
                placeholder="Choose a new 4-digit PIN"
                style={{...S.inp,background:"#0a0020",borderColor:"#4c1d95",color:"#e2e8f0",letterSpacing:8,fontSize:18,marginBottom:12}}/>
              <label style={{...S.lbl,color:"#a78bfa"}}>Confirm New PIN</label>
              <input type="password" inputMode="numeric" maxLength={4} value={pinConfirm}
                onChange={e=>setPinConfirm(e.target.value.replace(/\D/g,"").slice(0,4))}
                placeholder="Re-enter new PIN"
                style={{...S.inp,background:"#0a0020",borderColor:"#4c1d95",color:"#e2e8f0",letterSpacing:8,fontSize:18,marginBottom:16}}/>
              <button onClick={handlePinChange}
                style={{width:"100%",padding:"12px",background:"linear-gradient(135deg,#7c3aed,#a78bfa)",border:"none",borderRadius:10,color:"#fff",fontWeight:"800",fontSize:14,cursor:"pointer"}}>
                🔐 Save New PIN
              </button>
            </div>
            <div style={{...S.card,background:"#050010",border:"1px solid #1e1040"}}>
              <div style={{fontSize:11,fontWeight:"700",color:"#7c3aed",marginBottom:8}}>🛡️ Security Tips</div>
              {["Change the default PIN 7749 immediately","Use a PIN only you know — avoid 1234 or birthdays","PIN is stored on this device only","3 wrong attempts locks the screen for 30 seconds"].map((tip,i)=>(
                <div key={i} style={{fontSize:11,color:"#475569",padding:"3px 0",lineHeight:1.5}}>• {tip}</div>
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

// ─── STATUS BAR ────────────────────────────────────────────────────────────────
function StatusBar({trialDaysLeft,profile,onEditProfile,onLogoTap,lang,setLang,activeYear,switchYear}){
  return(
    <div style={S.statusBar}>
      <div style={{display:"flex",alignItems:"center",gap:8}} onClick={onLogoTap}>
        <img src={LOGO_B64} alt="" style={{width:24,height:24,borderRadius:"50%",border:"1.5px solid #b8960c",cursor:"pointer"}}/>
        <div>
          <div style={{fontSize:11,color:"#b8960c",fontWeight:"800",letterSpacing:0.5}}>{APP_NAME}</div>
          <div style={{fontSize:8,color:"#334155",letterSpacing:0.3}}>{APP_BRAND_LINE}</div>
        </div>
      </div>
      <div style={{display:"flex",alignItems:"center",gap:5}}>
        <YearSelector activeYear={activeYear} switchYear={switchYear}/>
        <LangSelector lang={lang} setLang={setLang}/>
        {trialDaysLeft!==null&&<span style={{fontSize:9,background:trialDaysLeft<=7?"#7f1d1d":"#1a3a1a",color:trialDaysLeft<=7?"#fca5a5":"#6ee7b7",padding:"2px 6px",borderRadius:4,fontWeight:"700"}}>{trialDaysLeft}d FREE</span>}
        <button style={{background:"#0d1829",border:"1px solid #1e293b",color:"#64748b",borderRadius:6,padding:"3px 7px",fontSize:10,cursor:"pointer"}} onClick={onEditProfile}>✏️</button>
      </div>
    </div>
  );
}

// ─── NAV BAR ───────────────────────────────────────────────────────────────────
function NavBar({tab,setTab,lang}){
  const FINANCE_TABS = new Set(["tools"]);
  const tabs=[
    {id:"dashboard",icon:"🏠",key:"nav_dashboard", group:"tax"},
    {id:"tax",      icon:"📋",key:"nav_tax",        group:"tax"},
    {id:"reports",  icon:"📊",key:"nav_reports",    group:"tax"},
    {id:"book",     icon:"📒",key:"nav_book",       group:"tax"},
    {id:"income",   icon:"📥",key:"nav_income",     group:"tax"},
    {id:"tools",    icon:"🔧",key:"nav_tools",      group:"finance"},
    {id:"services", icon:"💼",key:"nav_services",   group:"tax"},
    {id:"help",     icon:"🆘",key:"nav_help",       group:"tax"},
  ];
  const isFinanceTab = FINANCE_TABS.has(tab);
  // Nav background shifts subtly when in finance mode
  return(
    <nav style={{...S.nav, background:isFinanceTab?"#03111a":"#030710", borderTopColor:isFinanceTab?"#0e3a52":"#1e293b"}}>
      {tabs.map(tb=>{
        const isActive = tab===tb.id;
        const isFinance = tb.group==="finance";
        const activeColor = isFinance?"#06b6d4":"#b8960c";
        const activeBg    = isFinance?"#071a28":"#0a1228";
        return(
          <button key={tb.id}
            style={{...S.navBtn,...(isActive?{background:activeBg,borderTop:`2px solid ${activeColor}`}:{borderTop:"2px solid transparent"})}}
            onClick={()=>setTab(tb.id)}>
            <span style={{fontSize:18}}>{tb.icon}</span>
            <span style={{fontSize:8,marginTop:1,color:isActive?activeColor:"#475569"}}>{T(lang,tb.key)}</span>
          </button>
        );
      })}
    </nav>
  );
}

// ─── DASHBOARD ─────────────────────────────────────────────────────────────────
function Dashboard({cashBalance,totalBankBal,tax,data,profile,trialDaysLeft,onUpgrade,bankBalance,activeYear,switchYear}){
  const recentTxns=[...data.transactions].sort((a,b)=>b.date.localeCompare(a.date)).slice(0,5);
  const res=RESIDENCY_OPTS.find(o=>o.v===data.taxSettings?.residency);
  const isFreelancer=profile?.employmentType==="freelancer";
  return(
    <div style={S.page}>
      {/* Profile & Brand Header */}
      {profile&&(
        <div style={{...S.card,border:"1px solid #1e3a5f",background:"linear-gradient(135deg,#0a0d1a,#111827)",marginBottom:12,padding:"14px"}}>
          <div style={{display:"flex",gap:12,alignItems:"flex-start"}}>
            <img src={LOGO_B64} alt="" style={{width:48,height:48,borderRadius:"50%",border:"2px solid #b8960c",flexShrink:0}}/>
            <div style={{flex:1,minWidth:0}}>
              <div style={{fontSize:8,color:"#b8960c",fontWeight:"800",letterSpacing:1,marginBottom:2}}>{APP_BRAND_LINE.toUpperCase()}</div>
              <div style={{fontSize:16,fontWeight:"800",color:"#f1f5f9",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}>{profile.name}</div>
              <div style={{fontSize:10,color:"#64748b"}}>📞 {profile.mobile}{profile.tin?" · TIN: "+profile.tin:""}</div>
              <div style={{display:"flex",gap:6,marginTop:5,flexWrap:"wrap"}}>
                <span style={{fontSize:9,background:isFreelancer?"#1a1000":"#0a1a3a",color:isFreelancer?"#f59e0b":"#93c5fd",padding:"2px 7px",borderRadius:4,fontWeight:"700",border:"1px solid "+(isFreelancer?"#92400e":"#1d4ed8")}}>
                  {isFreelancer?"💻 Freelancer":"🏢 Salaried Employee"}
                </span>
                <span style={{fontSize:9,background:"#1e293b",color:"#94a3b8",padding:"2px 7px",borderRadius:4}}>{res?.short} · {res?.l}</span>
              </div>
            </div>
            <div style={S.yearBadge}>{TAX_YEAR}</div>
          </div>
          {profile.bankName&&(
            <div style={{marginTop:10,paddingTop:10,borderTop:"1px solid #1e293b",display:"flex",gap:8,alignItems:"center"}}>
              <span style={{fontSize:16}}>🏦</span>
              <div style={{fontSize:11,color:"#94a3b8"}}>{profile.bankName} · {profile.accountType} · ****{profile.accountNo?.slice(-4)}</div>
            </div>
          )}
        </div>
      )}

      {trialDaysLeft!==null&&trialDaysLeft<=10&&(
        <div style={{background:"linear-gradient(135deg,#78350f,#92400e)",border:"1px solid #f59e0b",borderRadius:12,padding:"10px 14px",marginBottom:12,display:"flex",justifyContent:"space-between",alignItems:"center"}}>
          <div>
            <div style={{color:"#fbbf24",fontWeight:"700",fontSize:12}}>⚠️ {trialDaysLeft===0?"Trial ends today!":trialDaysLeft+" free days left"}</div>
            <div style={{color:"#d97706",fontSize:10}}>Rs.12,000/yr · Includes FREE tax filing!</div>
          </div>
          <button style={{background:"#f59e0b",color:"#111",border:"none",borderRadius:8,padding:"6px 10px",fontSize:11,fontWeight:"800",cursor:"pointer"}} onClick={onUpgrade}>Upgrade</button>
        </div>
      )}

      {/* Balance Row */}
      <div style={S.cardRow}>
        <div style={{...S.balCard,background:"linear-gradient(135deg,#0f4c35,#10b981)"}}>
          <div style={S.balLabel}>💵 Cash</div>
          <div style={S.balAmt}>{fmtC(cashBalance)}</div>
          <div style={S.balSub}>In Hand</div>
        </div>
        <div style={{...S.balCard,background:"linear-gradient(135deg,#1a1a3a,#1d4ed8)"}}>
          <div style={S.balLabel}>🏦 Bank</div>
          <div style={S.balAmt}>{fmtC(totalBankBal)}</div>
          <div style={S.balSub}>{data.bankAccounts.length} acct(s)</div>
        </div>
        <div style={{...S.balCard,background:"linear-gradient(135deg,#3a1a00,#b45309)"}}>
          <div style={S.balLabel}>💼 Income</div>
          <div style={S.balAmt}>{fmtC(tax.totalGross)}</div>
          <div style={S.balSub}>Gross {TAX_YEAR}</div>
        </div>
      </div>

      {/* Freelancer special card */}
      {isFreelancer&&(
        <div style={{...S.card,border:"1px solid #f59e0b",background:"linear-gradient(160deg,#1a1000,#2a1800)"}}>
          <div style={{...S.cardTitle,color:"#fbbf24"}}>💻 Freelancer Summary</div>
          <TRow l="Gross Business Income"   v={fmt(tax.totalGross)}        c="#e2e8f0"/>
          <TRow l="Allowable Expenses"      v={"("+fmt(tax.allowableExpenses)+")"} c="#34d399"/>
          <TRow l="Net Business Income"     v={fmt(tax.netIncome)}         c="#fbbf24" bold/>
          <div style={S.divider}/>
          <TRow l="Quarterly Advance Tax"   v={fmt(tax.quarterlyTax)}      c="#f87171"/>
          <div style={{fontSize:10,color:"#64748b",marginTop:4}}>Pay quarterly to IRD: Q1 Aug 2025 · Q2 Nov 2025 · Q3 Feb 2026 · Q4 May 2026</div>
        </div>
      )}

      {/* Tax Card */}
      <div style={{...S.card,border:"1px solid #b8960c",background:"linear-gradient(160deg,#0d0d00,#1a1500)"}}>
        <div style={{...S.cardTitle,color:"#f5d060"}}>📋 Tax Liability — {TAX_YEAR}</div>
        <TRow l="Personal Relief"  v={"("+fmt(tax.relief)+")"} c="#34d399"/>
        <TRow l="Taxable Income"   v={fmt(tax.taxable)}         c="#f5d060" bold/>
        <TRow l="Gross Tax"        v={fmt(tax.grossTax)}        c="#f87171"/>
        <TRow l="APIT / Paid"      v={"("+fmt(tax.apitPaid)+")"} c="#34d399"/>
        <div style={S.divider}/>
        <TRow l="Balance Tax Due"  v={fmt(tax.netTax)} c={tax.netTax>0?"#f87171":"#34d399"} bold size={15}/>
        <div style={{fontSize:10,color:"#64748b",marginTop:6}}>Deadline: {FILING_DEADLINE} · {IRD_PORTAL}</div>
      </div>

      {/* Tax Deadline Calendar */}
      <div style={{...S.card,border:"1px solid #1e3a5f",background:"#060d1a",marginBottom:12}}>
        <div style={{...S.cardTitle,color:"#93c5fd"}}>📅 Key Tax Dates — {TAX_YEAR}</div>
        {(()=>{
          const now=new Date();
          const dates=[
            {label:"Q1 Advance Tax",date:"2025-08-20",icon:"⏰",color:"#f59e0b"},
            {label:"Q2 Advance Tax",date:"2025-11-20",icon:"⏰",color:"#f59e0b"},
            {label:"Q3 Advance Tax",date:"2026-02-20",icon:"⏰",color:"#f59e0b"},
            {label:"Q4 Advance Tax",date:"2026-05-20",icon:"⏰",color:"#f59e0b"},
            {label:"Tax Return Deadline",date:"2026-11-30",icon:"📋",color:"#f87171"},
          ];
          return dates.map(({label,date,icon,color})=>{
            const d=new Date(date);
            const diff=Math.ceil((d-now)/(1000*60*60*24));
            const passed=diff<0;
            return(
              <div key={date} style={{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px 0",borderBottom:"1px solid #1e293b"}}>
                <div style={{display:"flex",gap:6,alignItems:"center"}}>
                  <span style={{fontSize:14}}>{icon}</span>
                  <div>
                    <div style={{fontSize:11,color:passed?"#475569":color,fontWeight:"700"}}>{label}</div>
                    <div style={{fontSize:10,color:"#334155"}}>{date}</div>
                  </div>
                </div>
                <div style={{fontSize:11,fontWeight:"800",color:passed?"#475569":diff===0?"#ef4444":diff<=30?"#f87171":diff<=90?"#f59e0b":"#34d399",textAlign:"right"}}>
                  {passed?"✓ Done":diff===0?"TODAY!":diff+" days"}
                </div>
              </div>
            );
          });
        })()}
        <a href={`https://wa.me/94${APP_WHATSAPP.replace(/^0/,"")}?text=Hi GDP Consultants, I need a reminder for upcoming tax dates.`} target="_blank"
          style={{display:"block",marginTop:10,fontSize:11,color:"#34d399",textAlign:"center",textDecoration:"none",fontWeight:"700"}}>
          💬 WhatsApp us for tax reminders
        </a>
      </div>

      {recentTxns.length>0&&(
        <div style={S.card}>
          <div style={S.cardTitle}>🕐 Recent Transactions</div>
          {recentTxns.map(t=>(
            <div key={t.id} style={S.txnRow}>
              <div style={{flex:1}}>
                <div style={S.txnDesc}>{t.description}</div>
                <div style={S.txnDate}>{t.date} · {t.medium==="cash"?"💵 Cash":"🏦 Bank"} · {t.category}</div>
              </div>
              <div style={{color:t.type==="income"?"#34d399":"#f87171",fontWeight:"700",fontSize:13}}>
                {t.type==="income"?"+":"-"}{fmtC(t.amount)}
              </div>
            </div>
          ))}
        </div>
      )}

      <div style={S.footerCard}>
        <img src={LOGO_B64} alt="" style={{width:32,height:32,borderRadius:"50%",border:"1.5px solid #b8960c"}}/>
        <div style={{flex:1}}>
          <div style={{fontSize:10,color:"#b8960c",fontWeight:"700"}}>{FIRM_NAME}</div>
          <ContactLinks small/>
        </div>
      </div>
    </div>
  );
}

// ─── UNIFIED TRANSACTION BOOK ──────────────────────────────────────────────────
function TransactionBook({data,update,cashBalance,totalBankBal,bankBalance,profile}){
  const [showForm,setShowForm]=useState(false);
  const [filterMedium,setFilterMedium]=useState("all");
  const [filterType,setFilterType]=useState("all");
  const [filterMonth,setFilterMonth]=useState("");
  const [form,setForm]=useState({medium:"cash",type:"income",amount:"",category:TXN_CATS_INCOME[0],description:"",date:today(),ref:"",accountId:"",isBusiness:false,photo:null});
  const [showCustomCat,setShowCustomCat]=useState(false);
  const [customCatInput,setCustomCatInput]=useState("");
  const [showManageCats,setShowManageCats]=useState(false);
  const [showPayslip,setShowPayslip]=useState(false);
  const [showImport,setShowImport]=useState(false);
  const [viewPhoto,setViewPhoto]=useState(null);
  const photoRef=useRef(null);
  const set=p=>setForm(f=>({...f,...p}));
  const isFreelancer=profile?.employmentType==="freelancer";

  // Custom categories stored in data
  const customCatsIncome  = data.customCatsIncome  || [];
  const customCatsExpense = data.customCatsExpense || [];
  const allIncomeCats  = [...TXN_CATS_INCOME,  ...customCatsIncome];
  const allExpenseCats = [...TXN_CATS_EXPENSE, ...customCatsExpense];
  const currentCats = form.type==="income" ? allIncomeCats : allExpenseCats;

  const addCustomCategory=()=>{
    const name=customCatInput.trim();
    if(!name) return;
    if(form.type==="income"){
      if(allIncomeCats.includes(name)){setCustomCatInput("");setShowCustomCat(false);set({category:name});return;}
      update({customCatsIncome:[...customCatsIncome, name]});
    } else {
      if(allExpenseCats.includes(name)){setCustomCatInput("");setShowCustomCat(false);set({category:name});return;}
      update({customCatsExpense:[...customCatsExpense, name]});
    }
    set({category:name});
    setCustomCatInput("");
    setShowCustomCat(false);
  };

  const deleteCustomCat=(type,cat)=>{
    if(type==="income") update({customCatsIncome:customCatsIncome.filter(c=>c!==cat)});
    else                update({customCatsExpense:customCatsExpense.filter(c=>c!==cat)});
  };

  const add=()=>{
    if(!form.amount||!form.description)return;
    if(form.medium==="bank"&&!form.accountId&&data.bankAccounts.length>0)return;
    const entry={...form,id:uid(),amount:parseFloat(form.amount)};
    update({transactions:[...data.transactions,entry]});
    if(isFreelancer&&form.type==="expense"&&form.isBusiness){
      update({expenseEntries:[...(data.expenseEntries||[]),{id:entry.id,category:entry.category,amount:entry.amount,description:entry.description,date:entry.date,isBusiness:true}]});
    }
    setForm({medium:"cash",type:"income",amount:"",category:TXN_CATS_INCOME[0],description:"",date:today(),ref:"",accountId:data.bankAccounts[0]?.id||"",isBusiness:false,photo:null});
    setShowCustomCat(false);
    setShowForm(false);
  };
  const del=id=>{
    update({transactions:data.transactions.filter(t=>t.id!==id),expenseEntries:(data.expenseEntries||[]).filter(e=>e.id!==id)});
  };

  let txns=[...data.transactions].sort((a,b)=>b.date.localeCompare(a.date));
  if(filterMedium!=="all") txns=txns.filter(t=>t.medium===filterMedium);
  if(filterType!=="all")   txns=txns.filter(t=>t.type===filterType);
  if(filterMonth)          txns=txns.filter(t=>t.date.startsWith(filterMonth));

  const totIn =txns.filter(t=>t.type==="income").reduce((s,t)=>s+t.amount,0);
  const totOut=txns.filter(t=>t.type==="expense").reduce((s,t)=>s+t.amount,0);

  return(
    <div style={S.page}>
      {showPayslip&&<PayslipScanner onClose={()=>setShowPayslip(false)} onExtracted={(ex)=>{
        update({incomeEntries:[...data.incomeEntries,{id:uid(),category:"Salary",amount:parseFloat(ex.gross)||0,apitAmount:parseFloat(ex.apit)||0,description:`Salary slip — EPF: ${ex.epf||0} ETF: ${ex.etf||0}`,month:ex.month}]});
        setShowPayslip(false);
      }}/>}
      {showImport&&<BankImportModal data={data} update={update} onClose={()=>setShowImport(false)}/>}
      {viewPhoto&&(
        <div style={{position:"fixed",inset:0,background:"rgba(0,0,0,0.95)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}} onClick={()=>setViewPhoto(null)}>
          <img src={viewPhoto} alt="receipt" style={{maxWidth:"95%",maxHeight:"85vh",borderRadius:8,objectFit:"contain"}}/>
          <div style={{color:"#94a3b8",fontSize:12,marginTop:12}}>Tap to close</div>
        </div>
      )}

      <div style={S.pageHdr}><div style={S.pageTitle}>📒 Transaction Ledger</div><button
  className={(!showForm && data.transactions.length===0) ? "pulse-gold" : ""}
  style={{...S.addBtn, ...((!showForm && data.transactions.length===0)?{background:"linear-gradient(135deg,#1a2a04,#2a4008)",borderColor:"#f5d060",color:"#f5d060",fontWeight:"800"}:{})}}
  onClick={()=>{setShowForm(!showForm);setShowCustomCat(false);}}>
  {showForm ? "✕ Cancel" : (data.transactions.length===0 ? "✨ Add First Transaction" : "+ Add")}
</button></div>

      {/* Scan / Import Row */}
      <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:12}}>
        <button onClick={()=>setShowPayslip(true)} style={{padding:"10px",background:"linear-gradient(135deg,#064e3b,#065f46)",border:"1px solid #10b981",borderRadius:10,color:"#6ee7b7",fontWeight:"700",fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:6}}>
          📸 Scan Payslip
        </button>
        <button onClick={()=>setShowImport(true)} style={{padding:"10px",background:"linear-gradient(135deg,#0a1a3a,#1d4ed8)",border:"1px solid #3b82f6",borderRadius:10,color:"#93c5fd",fontWeight:"700",fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:6}}>
          📂 Import Bank CSV
        </button>
      </div>

      {/* Balance Summary */}
      <div style={S.cardRow}>
        <MStat label="💵 Cash"   value={fmtC(cashBalance)}  color="#10b981"/>
        <MStat label="🏦 Bank"   value={fmtC(totalBankBal)} color="#3b82f6"/>
        <MStat label="📥 Net"    value={fmtC(totIn-totOut)} color={totIn-totOut>=0?"#34d399":"#f87171"}/>
      </div>

      {/* Empty state guide — blinking arrow pointing at Add button */}
      {data.transactions.length===0&&!showForm&&(
        <div style={{background:"linear-gradient(135deg,#0a1a04,#0d2208)",border:"2px dashed #f5d060",borderRadius:12,padding:"16px 14px",marginBottom:14,textAlign:"center"}}>
          <div style={{fontSize:24,marginBottom:8}}>👆</div>
          <div style={{fontSize:13,fontWeight:"700",color:"#f5d060",marginBottom:4}}>Start here! Add your first transaction</div>
          <div style={{fontSize:11,color:"#94a3b8",lineHeight:1.6}}>Record income, expenses, bank receipts — everything in one place.<br/>Your tax calculation updates automatically.</div>
          <div style={{fontSize:20,marginTop:10,animation:"bounceArrow 1s ease-in-out infinite"}}>☝️</div>
        </div>
      )}
      {/* Add Transaction Form */}
      {showForm&&(
        <div style={{...S.card,border:"1px solid #b8960c",background:"linear-gradient(160deg,#0d0d00,#1c1a08)",marginBottom:14}}>
          <div style={{...S.cardTitle,color:"#f5d060"}}>➕ New Transaction</div>

          {/* Medium: Cash or Bank */}
          <div style={{marginBottom:12}}>
            <div style={S.lbl}>Transaction Medium</div>
            <div style={{display:"flex",gap:8}}>
              {[{v:"cash",l:"💵 Cash",c:"green"},{v:"bank",l:"🏦 Bank",c:"blue"}].map(o=>(
                <button key={o.v} onClick={()=>set({medium:o.v,accountId:o.v==="bank"?(data.bankAccounts[0]?.id||""):""})} style={{flex:1,padding:"10px",borderRadius:8,cursor:"pointer",fontSize:13,fontWeight:"700",border:"1px solid",...(form.medium===o.v?(o.c==="green"?{background:"#064e3b",borderColor:"#10b981",color:"#6ee7b7"}:{background:"#0a1a3a",borderColor:"#1d4ed8",color:"#93c5fd"}):{background:"#0f172a",borderColor:"#334155",color:"#94a3b8"})}}>
                  {o.l}
                </button>
              ))}
            </div>
            {form.medium==="cash"&&<div style={{fontSize:10,color:"#64748b",marginTop:4}}>Current cash balance: {fmt(cashBalance)}</div>}
            {form.medium==="bank"&&data.bankAccounts.length>0&&(
              <div style={{marginTop:8}}>
                <select value={form.accountId} onChange={e=>set({accountId:e.target.value})} style={S.inp}>
                  {data.bankAccounts.map(a=><option key={a.id} value={a.id}>{a.name} — {a.bank} ({fmtC(bankBalance(a))})</option>)}
                </select>
              </div>
            )}
            {form.medium==="bank"&&data.bankAccounts.length===0&&<div style={{fontSize:11,color:"#f59e0b",marginTop:6}}>⚠️ No bank accounts. Add one during profile setup.</div>}
          </div>

          {/* Type: Income or Expense */}
          <div style={{marginBottom:12}}>
            <div style={S.lbl}>Transaction Type</div>
            <div style={{display:"flex",gap:8}}>
              <button onClick={()=>{set({type:"income",category:allIncomeCats[0],isBusiness:false});setShowCustomCat(false);}} style={{flex:1,padding:"9px",borderRadius:8,cursor:"pointer",fontSize:12,fontWeight:"700",border:"1px solid",...(form.type==="income"?{background:"#064e3b",borderColor:"#10b981",color:"#6ee7b7"}:{background:"#0f172a",borderColor:"#334155",color:"#94a3b8"})}}>↑ Income / Receipt</button>
              <button onClick={()=>{set({type:"expense",category:allExpenseCats[0],isBusiness:false});setShowCustomCat(false);}} style={{flex:1,padding:"9px",borderRadius:8,cursor:"pointer",fontSize:12,fontWeight:"700",border:"1px solid",...(form.type==="expense"?{background:"#7f1d1d",borderColor:"#ef4444",color:"#fca5a5"}:{background:"#0f172a",borderColor:"#334155",color:"#94a3b8"})}}>↓ Expense / Payment</button>
            </div>
          </div>

          <FI label="Date" type="date" value={form.date} onChange={v=>set({date:v})}/>
          <FI label="Amount (Rs.)" type="number" value={form.amount} onChange={v=>set({amount:v})} placeholder="0.00"/>

          {/* Category with Add Custom button */}
          <div style={{marginBottom:10}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4}}>
              <label style={S.lbl}>Category</label>
              <button onClick={()=>setShowCustomCat(v=>!v)} style={{fontSize:10,background:showCustomCat?"#b8960c":"#1e293b",color:showCustomCat?"#111":"#b8960c",border:"1px solid #b8960c",borderRadius:6,padding:"2px 8px",cursor:"pointer",fontWeight:"700"}}>
                {showCustomCat?"✕ Cancel":"+ Custom"}
              </button>
            </div>
            <select value={form.category} onChange={e=>set({category:e.target.value})} style={S.inp}>
              <optgroup label="— Default Categories —">
                {(form.type==="income"?TXN_CATS_INCOME:TXN_CATS_EXPENSE).map(o=><option key={o} value={o}>{o}</option>)}
              </optgroup>
              {(form.type==="income"?customCatsIncome:customCatsExpense).length>0&&(
                <optgroup label="— My Custom Categories —">
                  {(form.type==="income"?customCatsIncome:customCatsExpense).map(o=><option key={o} value={o}>★ {o}</option>)}
                </optgroup>
              )}
            </select>

            {/* Inline custom category input */}
            {showCustomCat&&(
              <div style={{background:"#0a1a14",border:"1px solid #b8960c",borderRadius:8,padding:"10px 12px",marginTop:8}}>
                <div style={{fontSize:11,color:"#b8960c",fontWeight:"700",marginBottom:6}}>✏️ Create New {form.type==="income"?"Income":"Expense"} Category</div>
                <div style={{display:"flex",gap:6}}>
                  <input
                    value={customCatInput}
                    onChange={e=>setCustomCatInput(e.target.value)}
                    onKeyDown={e=>{if(e.key==="Enter")addCustomCategory();}}
                    placeholder="e.g. School Fees, Side Income..."
                    style={{...S.inp,flex:1,marginBottom:0}}
                  />
                  <button onClick={addCustomCategory} disabled={!customCatInput.trim()} style={{background:customCatInput.trim()?"#b8960c":"#334155",color:customCatInput.trim()?"#111":"#64748b",border:"none",borderRadius:8,padding:"0 14px",fontWeight:"800",fontSize:13,cursor:"pointer",flexShrink:0}}>
                    Add
                  </button>
                </div>
                <div style={{fontSize:10,color:"#64748b",marginTop:6}}>Press Enter or tap Add. Your category is saved for future transactions.</div>
              </div>
            )}
          </div>

          <FI label="Description *" value={form.description} onChange={v=>set({description:v})} placeholder="e.g. Monthly salary, Office rent..."/>
          <FI label="Reference No." value={form.ref} onChange={v=>set({ref:v})} placeholder="Optional"/>

          {/* Freelancer business expense flag */}
          {isFreelancer&&form.type==="expense"&&(
            <div onClick={()=>set({isBusiness:!form.isBusiness})} style={{display:"flex",gap:10,alignItems:"center",padding:"10px 12px",background:form.isBusiness?"#0a2a1a":"#0a0f1a",border:"1px solid "+(form.isBusiness?"#10b981":"#334155"),borderRadius:8,cursor:"pointer",marginBottom:10}}>
              <div style={{width:18,height:18,borderRadius:4,background:form.isBusiness?"#10b981":"transparent",border:"2px solid "+(form.isBusiness?"#10b981":"#334155"),display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:12,flexShrink:0}}>{form.isBusiness?"✓":""}</div>
              <div>
                <div style={{fontSize:12,fontWeight:"700",color:form.isBusiness?"#34d399":"#94a3b8"}}>Business Expense (Tax Deductible)</div>
                <div style={{fontSize:10,color:"#475569"}}>Check this to deduct from taxable income (IRD allowable)</div>
              </div>
            </div>
          )}

          {/* Receipt Photo */}
          <div style={{marginBottom:12}}>
            <div style={{fontSize:11,color:"#64748b",fontWeight:"700",marginBottom:6}}>📎 Receipt Photo (optional)</div>
            {form.photo?(
              <div style={{position:"relative",display:"inline-block"}}>
                <img src={form.photo} alt="receipt" style={{width:80,height:80,objectFit:"cover",borderRadius:8,border:"2px solid #10b981",cursor:"pointer"}} onClick={()=>setViewPhoto(form.photo)}/>
                <button onClick={()=>set({photo:null})} style={{position:"absolute",top:-6,right:-6,width:20,height:20,background:"#ef4444",border:"none",borderRadius:"50%",color:"#fff",fontSize:11,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"}}>✕</button>
                <div style={{fontSize:9,color:"#34d399",marginTop:4}}>Tap to view full</div>
              </div>
            ):(
              <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6}}>
                <button onClick={()=>{const i=photoRef.current;i.setAttribute("capture","environment");i.click();}}
                  style={{padding:"8px",background:"#0f2d1f",border:"1px solid #10b981",borderRadius:8,color:"#6ee7b7",fontSize:11,fontWeight:"700",cursor:"pointer"}}>📷 Camera</button>
                <button onClick={()=>{photoRef.current.removeAttribute("capture");photoRef.current.click();}}
                  style={{padding:"8px",background:"#0a1a3a",border:"1px solid #334155",borderRadius:8,color:"#93c5fd",fontSize:11,fontWeight:"700",cursor:"pointer"}}>🖼️ Gallery</button>
                <input ref={photoRef} type="file" accept="image/*" style={{display:"none"}} onChange={e=>{
                  const f=e.target.files[0];
                  if(!f)return;
                  // Compress to max ~500px wide before storing as base64
                  const reader=new FileReader();
                  reader.onload=ev=>{
                    const img=new Image();
                    img.onload=()=>{
                      const canvas=document.createElement("canvas");
                      const maxW=500;
                      const scale=Math.min(1,maxW/img.width);
                      canvas.width=img.width*scale; canvas.height=img.height*scale;
                      canvas.getContext("2d").drawImage(img,0,0,canvas.width,canvas.height);
                      set({photo:canvas.toDataURL("image/jpeg",0.7)});
                    };
                    img.src=ev.target.result;
                  };
                  reader.readAsDataURL(f);
                }}/>
              </div>
            )}
          </div>

          <button style={S.submitBtn} onClick={add}>✓ Save Transaction</button>
        </div>
      )}

      {/* Manage Custom Categories Panel */}
      {(customCatsIncome.length>0||customCatsExpense.length>0)&&(
        <div style={{marginBottom:10}}>
          <button onClick={()=>setShowManageCats(v=>!v)} style={{width:"100%",background:"#0a0f1a",border:"1px solid #334155",borderRadius:8,padding:"7px 12px",color:"#64748b",fontSize:11,cursor:"pointer",textAlign:"left"}}>
            🏷️ My Custom Categories ({customCatsIncome.length} income · {customCatsExpense.length} expense) {showManageCats?"▲":"▼"}
          </button>
          {showManageCats&&(
            <div style={{...S.card,marginTop:4,background:"#0a0f1a"}}>
              {customCatsIncome.length>0&&(
                <>
                  <div style={{fontSize:10,color:"#6ee7b7",fontWeight:"700",marginBottom:6}}>📥 INCOME</div>
                  {customCatsIncome.map(c=>(
                    <div key={c} style={{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px 0",borderBottom:"1px solid #1e293b"}}>
                      <span style={{fontSize:12,color:"#e2e8f0"}}>★ {c}</span>
                      <button onClick={()=>deleteCustomCat("income",c)} style={{background:"#7f1d1d",border:"none",color:"#fca5a5",borderRadius:5,padding:"2px 8px",fontSize:10,cursor:"pointer"}}>Delete</button>
                    </div>
                  ))}
                </>
              )}
              {customCatsExpense.length>0&&(
                <div style={{marginTop:customCatsIncome.length>0?10:0}}>
                  <div style={{fontSize:10,color:"#fca5a5",fontWeight:"700",marginBottom:6}}>📤 EXPENSE</div>
                  {customCatsExpense.map(c=>(
                    <div key={c} style={{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px 0",borderBottom:"1px solid #1e293b"}}>
                      <span style={{fontSize:12,color:"#e2e8f0"}}>★ {c}</span>
                      <button onClick={()=>deleteCustomCat("expense",c)} style={{background:"#7f1d1d",border:"none",color:"#fca5a5",borderRadius:5,padding:"2px 8px",fontSize:10,cursor:"pointer"}}>Delete</button>
                    </div>
                  ))}
                </div>
              )}
            </div>
          )}
        </div>
      )}

      {/* Filters */}
      <div style={{display:"flex",gap:6,marginBottom:10,flexWrap:"wrap"}}>
        <input type="month" style={{...S.fIn,flex:"1 1 100px"}} value={filterMonth} onChange={e=>setFilterMonth(e.target.value)} placeholder="Month"/>
        <select style={{...S.fIn,flex:"1 1 80px"}} value={filterMedium} onChange={e=>setFilterMedium(e.target.value)}>
          <option value="all">All</option><option value="cash">💵 Cash</option><option value="bank">🏦 Bank</option>
        </select>
        <select style={{...S.fIn,flex:"1 1 80px"}} value={filterType} onChange={e=>setFilterType(e.target.value)}>
          <option value="all">All</option><option value="income">Income</option><option value="expense">Expense</option>
        </select>
      </div>

      {txns.length===0?<Empty icon="📒" text="No transactions yet"/>:txns.map(t=>(
        <div key={t.id} style={S.entryCard}>
          <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}}>
            <div style={{flex:1}}>
              <div style={{display:"flex",gap:5,alignItems:"center",flexWrap:"wrap"}}>
                <Badge type={t.type==="income"?"in":"out"}/>
                <span style={{fontSize:9,background:t.medium==="cash"?"#0f2d1f":"#0a1a3a",color:t.medium==="cash"?"#6ee7b7":"#93c5fd",padding:"1px 5px",borderRadius:3,fontWeight:"700"}}>{t.medium==="cash"?"💵":"🏦"}</span>
                <span style={{fontSize:10,color:"#64748b"}}>{t.date}</span>
                {t.ref&&<span style={{fontSize:9,color:"#475569"}}>#{t.ref}</span>}
                {t.isBusiness&&<span style={{fontSize:9,background:"#1a1000",color:"#f59e0b",padding:"1px 4px",borderRadius:3,border:"1px solid #92400e"}}>Biz Exp</span>}
                {t.photo&&<span onClick={()=>setViewPhoto(t.photo)} style={{fontSize:9,background:"#0a1a3a",color:"#60a5fa",padding:"1px 5px",borderRadius:3,border:"1px solid #1d4ed8",cursor:"pointer"}}>📎 Receipt</span>}
              </div>
              <div style={S.entryDesc}>{t.description}</div>
              <div style={S.entryMeta}>{t.category}{t.accountId&&data.bankAccounts.find(a=>a.id===t.accountId)?" · "+data.bankAccounts.find(a=>a.id===t.accountId).name:""}</div>
            </div>
            <div style={{textAlign:"right",flexShrink:0,paddingLeft:8,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:4}}>
              <div style={{color:t.type==="income"?"#34d399":"#f87171",fontWeight:"700",fontSize:14}}>{t.type==="income"?"+":"-"}{fmtC(t.amount)}</div>
              {t.photo&&<img src={t.photo} alt="" style={{width:36,height:36,objectFit:"cover",borderRadius:5,border:"1px solid #334155",cursor:"pointer"}} onClick={()=>setViewPhoto(t.photo)}/>}
              <button style={S.delBtn} onClick={()=>del(t.id)}>🗑</button>
            </div>
          </div>
        </div>
      ))}
    </div>
  );
}

// ─── INCOME PAGE ───────────────────────────────────────────────────────────────
function IncomePage({data,update,tax,profile,incomeCats,activeYear}){
  const [showForm,setShowForm]=useState(false);
  const [showScanner,setShowScanner]=useState(false);
  const [form,setForm]=useState({category:incomeCats[0],amount:"",description:"",month:today().slice(0,7),apitAmount:""});
  const add=()=>{
    if(!form.amount||!form.description)return;
    update({incomeEntries:[...data.incomeEntries,{...form,id:uid(),amount:parseFloat(form.amount),apitAmount:parseFloat(form.apitAmount)||0}]});
    setForm({category:incomeCats[0],amount:"",description:"",month:today().slice(0,7),apitAmount:""});
    setShowForm(false);
  };
  const del=id=>update({incomeEntries:data.incomeEntries.filter(e=>e.id!==id)});
  const isFreelancer=profile?.employmentType==="freelancer";

  return(
    <div style={S.page}>
      {showScanner&&<PayslipScanner onClose={()=>setShowScanner(false)} onExtracted={(ex)=>{
        update({incomeEntries:[...data.incomeEntries,{id:uid(),category:"Salary",amount:parseFloat(ex.gross)||0,apitAmount:parseFloat(ex.apit)||0,description:`Salary slip — EPF: ${ex.epf||0} ETF: ${ex.etf||0}`,month:ex.month}]});
        setShowScanner(false);
      }}/>}
      <div style={S.pageHdr}><div style={S.pageTitle}>📥 Income — {activeYear}</div><button
  className={(!showForm && data.incomeEntries.length===0) ? "pulse-gold" : ""}
  style={{...S.addBtn,...((!showForm && data.incomeEntries.length===0)?{background:"linear-gradient(135deg,#1a2a04,#2a4008)",borderColor:"#f5d060",color:"#f5d060",fontWeight:"800"}:{})}}
  onClick={()=>setShowForm(!showForm)}>
  {showForm ? "✕" : (data.incomeEntries.length===0 ? "✨ Add Income" : "+ Add")}
</button></div>

      {!isFreelancer&&(
        <button onClick={()=>setShowScanner(true)} style={{width:"100%",padding:"11px",background:"linear-gradient(135deg,#064e3b,#065f46)",border:"1px solid #10b981",borderRadius:10,color:"#6ee7b7",fontWeight:"800",fontSize:13,cursor:"pointer",marginBottom:12,display:"flex",alignItems:"center",justifyContent:"center",gap:8}}>
          📸 Scan Payslip (Auto-fill from photo)
        </button>
      )}

      {isFreelancer&&(
        <div style={{...S.card,border:"1px solid #f59e0b",background:"linear-gradient(160deg,#1a1000,#2a1800)"}}>
          <div style={{...S.cardTitle,color:"#fbbf24"}}>💻 Freelancer Tax Summary</div>
          <TRow l="Gross Income"         v={fmt(tax.totalGross)}        c="#e2e8f0"/>
          <TRow l="Business Expenses"    v={"("+fmt(tax.allowableExpenses)+")"} c="#34d399"/>
          <TRow l="Net Income"           v={fmt(tax.netIncome)}         c="#fbbf24" bold/>
          <TRow l="Personal Relief"      v={"("+fmt(tax.relief)+")"} c="#34d399"/>
          <TRow l="Taxable Income"       v={fmt(tax.taxable)}           c="#f5d060" bold/>
          <TRow l="Tax Liability"        v={fmt(tax.grossTax)}          c="#f87171"/>
          <div style={S.divider}/>
          <TRow l="Quarterly Advance Tax" v={fmt(tax.quarterlyTax)} c="#f59e0b"/>
        </div>
      )}

      <div style={S.card}>
        <div style={S.cardTitle}>Annual Income Breakdown</div>
        {incomeCats.map(cat=>{
          const amt=tax.incByCat[cat]||0;
          const pct=tax.totalGross>0?(amt/tax.totalGross*100):0;
          return(
            <div key={cat} style={{marginBottom:10}}>
              <div style={S.row}>
                <span style={{color:"#cbd5e1",fontSize:12}}>{catIcon(cat)} {cat}</span>
                <span style={{color:"#34d399",fontSize:12,fontWeight:"600"}}>{fmt(amt)}</span>
              </div>
              {cat==="Export/Foreign"&&amt>0&&<div style={{fontSize:10,color:"#f59e0b",marginBottom:2}}>⚡ 15% flat tax applies</div>}
              <div style={{background:"#1e293b",borderRadius:4,height:5}}><div style={{height:5,borderRadius:4,background:"linear-gradient(90deg,#10b981,#34d399)",width:`${pct}%`,transition:"width 0.5s"}}/></div>
            </div>
          );
        })}
        <div style={S.divider}/>
        <div style={{...S.row,fontWeight:"700"}}><span style={{color:"#fbbf24"}}>Total Gross</span><span style={{color:"#fbbf24"}}>{fmt(tax.totalGross)}</span></div>
        {tax.totalGross>=MANDATORY_THRESHOLD&&<div style={{fontSize:10,color:"#f59e0b",marginTop:6}}>⚠️ Must file return by {FILING_DEADLINE}</div>}
      </div>

      {showForm&&(
        <FormCard title="Add Income Entry">
          <FS label="Income Type" value={form.category} options={incomeCats} onChange={v=>setForm(f=>({...f,category:v}))}/>
          {form.category==="Export/Foreign"&&<div style={{background:"#1a1000",border:"1px solid #f59e0b",borderRadius:8,padding:"8px",marginBottom:10,fontSize:11,color:"#fbbf24"}}>⚡ 15% flat tax on net profits (Act No.2/2025). Foreign tax credit available.</div>}
          <FI label="Month" type="month" value={form.month} onChange={v=>setForm(f=>({...f,month:v}))}/>
          <FI label="Gross Amount (Rs.)" type="number" value={form.amount} onChange={v=>setForm(f=>({...f,amount:v}))} placeholder="0.00"/>
          <FI label="Description / Source" value={form.description} onChange={v=>setForm(f=>({...f,description:v}))} placeholder="e.g. ABC Company monthly salary"/>
          {!isFreelancer&&<FI label="APIT Deducted (Rs.)" type="number" value={form.apitAmount} onChange={v=>setForm(f=>({...f,apitAmount:v}))} placeholder="From salary slip"/>}
          <button style={S.submitBtn} onClick={add}>✓ Save Income</button>
        </FormCard>
      )}

      {/* Freelancer Expenses */}
      {isFreelancer&&(data.expenseEntries||[]).length>0&&(
        <div style={S.card}>
          <div style={S.cardTitle}>🧾 Allowable Business Expenses</div>
          {Object.entries(tax.expenseBreakdown).map(([cat,amt])=>(
            <div key={cat} style={S.row}><span style={{color:"#94a3b8",fontSize:12}}>{cat}</span><span style={{color:"#34d399",fontSize:12,fontWeight:"600"}}>{fmt(amt)}</span></div>
          ))}
          <div style={S.divider}/>
          <TRow l="Total Deductible Expenses" v={fmt(tax.allowableExpenses)} c="#34d399" bold/>
        </div>
      )}

      {incomeCats.map(cat=>{
        const rows=data.incomeEntries.filter(e=>e.category===cat);
        if(!rows.length)return null;
        return(
          <div key={cat} style={S.card}>
            <div style={S.cardTitle}>{catIcon(cat)} {cat}</div>
            {rows.sort((a,b)=>b.month.localeCompare(a.month)).map(e=>(
              <div key={e.id} style={S.txnRow}>
                <div style={{flex:1}}><div style={S.txnDesc}>{e.description}</div><div style={S.txnDate}>{e.month}{e.apitAmount?` · APIT: ${fmtC(e.apitAmount)}`:""}</div></div>
                <div style={{textAlign:"right"}}><div style={{color:"#34d399",fontWeight:"700",fontSize:13}}>{fmt(e.amount)}</div><button style={S.delBtn} onClick={()=>del(e.id)}>🗑</button></div>
              </div>
            ))}
          </div>
        );
      })}
      {data.incomeEntries.length===0&&<Empty icon="📥" text="No income entries yet"/>}
    </div>
  );
}

// ─── TAX PAGE ──────────────────────────────────────────────────────────────────
function TaxPage({data,update,tax,profile,activeYear}){
  const ts=data.taxSettings;
  const sv=p=>update({taxSettings:{...ts,...p}});
  const [filingDate,setFilingDate]=useState("");
  const [showNotes,setShowNotes]=useState(false);
  const penalty=computePenalty(tax.netTax,filingDate);
  const isFreelancer=profile?.employmentType==="freelancer";
  const cfg=tax.cfg||getTaxCfg(activeYear);
  const yr=activeYear||DEFAULT_YEAR;

  // Year-change hint when viewing historical years
  const isHistorical=["2022/2023","2023/2024","2024/2025"].includes(yr);

  return(
    <div style={S.page}>
      <div style={S.pageTitle}>📋 Tax — {yr}</div>
      <div style={{fontSize:10,color:"#64748b",marginBottom:10}}>{cfg.act} · {isFreelancer?"Freelancer / Self-Employed Rules":"Salaried Employee Rules"}</div>

      {/* Year-specific IRD rules panel */}
      <div style={{background:isHistorical?"linear-gradient(135deg,#0a1a2a,#0d2040)":"linear-gradient(135deg,#0a1a0a,#0d2210)",borderRadius:12,border:isHistorical?"1px solid #1d4ed8":"1px solid #065f46",padding:12,marginBottom:12}}>
        <div onClick={()=>setShowNotes(!showNotes)} style={{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}}>
          <div>
            <div style={{fontSize:11,fontWeight:700,color:isHistorical?"#93c5fd":"#6ee7b7"}}>{isHistorical?"📜 Historical Assessment":"📋 Current Assessment"} · {yr}</div>
            <div style={{fontSize:10,color:"#475569",marginTop:2}}>Personal Relief: {fmt(cfg.personalRelief)} · QP Cap: {fmt(cfg.qpCap)}</div>
          </div>
          <span style={{color:"#475569",fontSize:14}}>{showNotes?"▲":"▼"}</span>
        </div>
        {showNotes&&(
          <div style={{marginTop:10,paddingTop:10,borderTop:"1px solid #1e293b"}}>
            <div style={{fontSize:10,fontWeight:700,color:"#64748b",marginBottom:6,textTransform:"uppercase",letterSpacing:"0.5px"}}>Compliance Rules & Notes — {yr}</div>
            {(cfg.notes||[]).map((n,i)=>(
              <div key={i} style={{fontSize:11,color:n.startsWith("⚠️")?"#fbbf24":"#94a3b8",padding:"3px 0",lineHeight:1.5}}>• {n}</div>
            ))}
            {/* Tax slabs table */}
            <div style={{marginTop:10,fontSize:10,fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:4}}>Tax Slabs — {yr}</div>
            {cfg.slabs.map((s,i)=>(
              <div key={i} style={{display:"flex",justifyContent:"space-between",padding:"2px 0"}}>
                <span style={{fontSize:10,color:"#94a3b8"}}>{s.label}</span>
                <span style={{fontSize:10,fontWeight:700,color:"#f5d060"}}>{(s.rate*100).toFixed(0)}%</span>
              </div>
            ))}
          </div>
        )}
      </div>

      {/* Employment type badge */}
      <div style={{...S.card,border:"1px solid "+(isFreelancer?"#f59e0b":"#1d4ed8"),background:isFreelancer?"linear-gradient(135deg,#1a1000,#2a1800)":"linear-gradient(135deg,#0a1a3a,#0f2040)",marginBottom:12}}>
        <div style={{display:"flex",gap:10,alignItems:"center"}}>
          <span style={{fontSize:28}}>{isFreelancer?"💻":"🏢"}</span>
          <div>
            <div style={{fontSize:14,fontWeight:"800",color:isFreelancer?"#fbbf24":"#93c5fd"}}>{isFreelancer?"Freelancer / Self-Employed":"Salaried Employee"}</div>
            <div style={{fontSize:11,color:"#64748b"}}>{isFreelancer?"Business income rules · Expense deductions apply · Quarterly advance tax":"Employment income · APIT deducted at source · Standard reliefs"}</div>
          </div>
        </div>
      </div>

      {/* Residency */}
      <div style={S.card}>
        <div style={S.cardTitle}>🌍 Residency Status</div>
        {RESIDENCY_OPTS.map(o=>(
          <div key={o.v} onClick={()=>sv({residency:o.v})} style={{...S.resOpt,...(ts.residency===o.v?S.resOptA:{})}}>
            <div style={{display:"flex",alignItems:"flex-start",gap:10}}>
              <div style={{width:14,height:14,borderRadius:"50%",border:"2px solid "+(ts.residency===o.v?"#b8960c":"#334155"),background:ts.residency===o.v?"#b8960c":"transparent",flexShrink:0,marginTop:2}}/>
              <div><div style={{fontSize:12,fontWeight:"600",color:ts.residency===o.v?"#f5d060":"#e2e8f0"}}>{o.l}</div><div style={{fontSize:10,color:"#64748b"}}>{o.desc}</div></div>
            </div>
          </div>
        ))}
      </div>

      {/* Deductions */}
      <FormCard title="🧾 Reliefs & Deductions">
        <div style={{background:"#0a1a0a",border:"1px solid #10b981",borderRadius:8,padding:"8px",marginBottom:10,fontSize:11,color:"#6ee7b7"}}>Personal Relief: <b>{fmt(tax.relief)}</b>{tax.isNRNC?" (NRNC — No relief applies)":""}</div>
        {!tax.isNRNC&&(
          <>
            <FI label="Qualifying Payments (Rs.)" type="number" value={ts.qualifyingPayments||""} onChange={v=>sv({qualifyingPayments:parseFloat(v)||0})} placeholder="Max Rs.1,200,000"/>
            <div style={{fontSize:10,color:"#64748b",marginBottom:8}}>Life insurance, charity donations, unit trust investments, voluntary EPF/ETF. Cap: Rs.1,200,000</div>
            <div style={{fontSize:11,color:"#34d399",marginBottom:10}}>Relief applied: {fmt(tax.qpRelief)}</div>
          </>
        )}
        {!isFreelancer&&<FI label="APIT Paid at Source (Rs.)" type="number" value={ts.apitPaid||""} onChange={v=>sv({apitPaid:parseFloat(v)||0})} placeholder="Total from salary slips"/>}
        {isFreelancer&&<div style={{background:"#1a1000",border:"1px solid #f59e0b",borderRadius:8,padding:"8px",marginBottom:10,fontSize:11,color:"#fbbf24"}}>💻 Freelancers: Enter all business expenses in the Transaction Ledger and mark them as "Business Expense (Tax Deductible)" — they will be auto-deducted from your taxable income.</div>}
      </FormCard>

      {/* Full Tax Computation */}
      <div style={{...S.card,border:"1px solid #b8960c",background:"linear-gradient(160deg,#0d0d00,#1a1500)"}}>
        <div style={{...S.cardTitle,color:"#f5d060"}}>🧮 Full Tax Computation</div>
        <TRow l="1. Total Gross Income"     v={fmt(tax.totalGross)}          c="#e2e8f0"/>
        {isFreelancer&&<TRow l="   Less: Business Expenses" v={"("+fmt(tax.allowableExpenses)+")"} c="#34d399"/>}
        {isFreelancer&&<TRow l="2. Net Business Income"     v={fmt(tax.netIncome)}  c="#e2e8f0"/>}
        {tax.exportIncome>0&&<TRow l="   Less: Export Income"   v={"("+fmt(tax.exportIncome)+")"} c="#f59e0b"/>}
        <TRow l={isFreelancer?"3. SL-Source Net Income":"2. SL-Source Income"} v={fmt(tax.slIncome-(isFreelancer?tax.allowableExpenses:0))} c="#e2e8f0"/>
        <TRow l="Less: Personal Relief"    v={"("+fmt(tax.relief)+")"} c="#34d399"/>
        {!tax.isNRNC&&<TRow l="Less: QP Deductions"     v={"("+fmt(tax.qpRelief)+")"} c="#34d399"/>}
        <TRow l="Taxable Income"           v={fmt(tax.taxable)}  c="#f5d060" bold/>
        <div style={S.divider}/>
        <div style={{color:"#64748b",fontSize:11,marginBottom:6}}>Graduated IIT Rates:</div>
        {tax.breakdown.length===0?<div style={{color:"#475569",fontSize:12,paddingLeft:12,marginBottom:6}}>No tax — income within personal relief threshold</div>:tax.breakdown.map((b,i)=>(
          <div key={i} style={{...S.row,paddingLeft:12}}><span style={{color:"#94a3b8",fontSize:11}}>{b.label}</span><span style={{color:"#a78bfa",fontSize:11}}>{fmt(b.tax)}</span></div>
        ))}
        {tax.exportIncome>0&&<><div style={S.divider}/><TRow l="Export/Foreign Tax (15% flat)" v={fmt(tax.exportTax)} c="#f59e0b"/></>}
        <div style={S.divider}/>
        <TRow l="Gross Tax Liability" v={fmt(tax.grossTax)} c="#f87171" bold/>
        {!isFreelancer&&<TRow l="Less: APIT Paid"    v={"("+fmt(tax.apitPaid)+")"} c="#34d399"/>}
        <div style={S.divider}/>
        <TRow l="Balance Tax Payable / (Refund)" v={fmt(tax.netTax)} c={tax.netTax>0?"#f87171":"#34d399"} bold size={15}/>
        {isFreelancer&&tax.quarterlyTax>0&&(
          <div style={{marginTop:10,padding:"10px",background:"#1a1000",borderRadius:8,border:"1px solid #f59e0b"}}>
            <div style={{fontSize:11,color:"#fbbf24",fontWeight:"700",marginBottom:4}}>⏰ Quarterly Advance Tax Schedule</div>
            {[["Q1 — Aug 2025",0],["Q2 — Nov 2025",1],["Q3 — Feb 2026",2],["Q4 — May 2026",3]].map(([q])=>(
              <div key={q} style={{display:"flex",justifyContent:"space-between",fontSize:11,padding:"2px 0",color:"#94a3b8"}}><span>{q}</span><span style={{color:"#f59e0b",fontWeight:"700"}}>{fmt(tax.quarterlyTax)}</span></div>
            ))}
          </div>
        )}
      </div>

      {/* Penalty Calculator */}
      <div style={{...S.card,border:"1px solid #ef4444",background:"linear-gradient(160deg,#1a0000,#2d0000)"}}>
        <div style={{...S.cardTitle,color:"#f87171"}}>⚠️ Late Filing Penalty Calculator</div>
        <FI label="Your Planned / Actual Filing Date" type="date" value={filingDate} onChange={v=>setFilingDate(v)}/>
        <div style={{background:"#0d0000",borderRadius:8,padding:"10px 12px"}}>
          {!filingDate?<div style={{color:"#475569",fontSize:12}}>Enter a filing date to calculate penalties</div>:!penalty.isLate?(
            <div style={{color:"#34d399",fontSize:12,fontWeight:"700"}}>✓ On time! No penalty. Deadline: {FILING_DEADLINE}</div>
          ):(
            <>
              <TRow l={`Late Fee (5%)`}                    v={fmt(penalty.lateFee)} c="#f87171"/>
              <TRow l={`Monthly (1% × ${penalty.months}m)`} v={fmt(penalty.monthly)} c="#f87171"/>
              <div style={S.divider}/>
              <TRow l="Total Penalty"   v={fmt(penalty.total)}             c="#f87171" bold/>
              <TRow l="Tax + Penalty"   v={fmt(tax.netTax+penalty.total)}  c="#fbbf24" bold size={14}/>
              <div style={{fontSize:10,color:"#f87171",marginTop:6}}>⚠️ File immediately to stop penalty accruing!</div>
            </>
          )}
        </div>
        <div style={{fontSize:10,color:"#64748b",marginTop:8}}>Penalty: 5% late fee + 1%/month after {FILING_DEADLINE}</div>
      </div>

      {/* Tax Savings Tips */}
      {(()=>{
        const tips=[];
        const qpUsed=tax.isNRNC?1200000:(data.taxSettings?.qualifyingPayments||0);
        const qpRoom=1200000-qpUsed;
        if(!tax.isNRNC&&qpRoom>0) tips.push({icon:"🛡️",tip:`Qualifying Payments: You can still claim up to ${fmt(qpRoom)} more via life insurance, EPF top-ups, or approved charity donations — saving up to ${fmt(qpRoom*0.06)} in tax.`});
        if(!isFreelancer&&tax.grossTax>0) tips.push({icon:"📊",tip:"Convert to freelancer/self-employed status to deduct all legitimate business expenses before tax — potentially reducing taxable income significantly."});
        if(isFreelancer&&tax.allowableExpenses===0) tips.push({icon:"🧾",tip:"Record your business expenses (internet, equipment, software, travel) in the Transaction Ledger — each rupee reduces your taxable income directly."});
        if(tax.totalGross>5000000) tips.push({icon:"💱",tip:"If you have export or foreign-source income, it is taxed at a flat 15% rate — much lower than the top 36% domestic rate. Segregate these income streams."});
        if(tax.netTax>100000) tips.push({icon:"💡",tip:`Consider spreading large deductible expenses to maximise your current-year relief. Contact GDP Consultants for a personalised tax planning session.`});
        return(
          <div style={{...S.card,border:"1px solid #10b981",background:"linear-gradient(160deg,#021a0e,#041a12)",marginBottom:12}}>
            <div style={{...S.cardTitle,color:"#34d399"}}>💡 Tax Saving Opportunities</div>
            {tips.length===0?(
              <div style={{fontSize:12,color:"#34d399",fontWeight:"700"}}>✅ Great — you are maximising your current reliefs.</div>
            ):tips.map((t,i)=>(
              <div key={i} style={{display:"flex",gap:8,padding:"8px 0",borderBottom:"1px solid #0a2a1a"}}>
                <span style={{fontSize:18,flexShrink:0}}>{t.icon}</span>
                <div style={{fontSize:12,color:"#94a3b8",lineHeight:1.6}}>{t.tip}</div>
              </div>
            ))}
            <a href={`https://wa.me/94${APP_WHATSAPP.replace(/^0/,"")}?text=Hi, I'd like a personalised tax planning session from GDP Consultants.`} target="_blank"
              style={{display:"block",marginTop:10,background:"#064e3b",border:"1px solid #10b981",borderRadius:8,padding:"10px",color:"#6ee7b7",fontWeight:"700",fontSize:12,textDecoration:"none",textAlign:"center"}}>
              💬 Book a Tax Planning Consultation
            </a>
          </div>
        );
      })()}

      {/* IIT Slab Reference */}
      <div style={{...S.card,background:"#0d0d12",border:"1px solid #334155"}}>
        <div style={{...S.cardTitle,color:"#b8960c"}}>📊 2025/26 IIT Slabs (After Personal Relief)</div>
        {[["First Rs.1,000,000","6%","#10b981"],["Rs.1,000,001–1,500,000","18%","#f59e0b"],["Rs.1,500,001–2,000,000","24%","#f97316"],["Rs.2,000,001–2,500,000","30%","#ef4444"],["Above Rs.2,500,000","36%","#dc2626"],["Export/Foreign Services","15% flat","#a78bfa"]].map(([l,r,c])=>(
          <div key={l} style={{display:"flex",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #1e293b"}}><span style={{color:"#cbd5e1",fontSize:12}}>{l}</span><span style={{color:c,fontWeight:"700",fontSize:12}}>{r}</span></div>
        ))}
      </div>
    </div>
  );
}

// ─── REPORTS PAGE ──────────────────────────────────────────────────────────────
function ReportsPage({data,tax,cashBalance,totalBankBal,profile,bankBalance,activeYear}){
  const [view,setView]=useState("annual");
  const [downloading,setDownloading]=useState(false);
  const [allYearsData,setAllYearsData]=useState({});
  const isFreelancer=profile?.employmentType==="freelancer";

  // Load all years for comparison when comparison tab opened
  useEffect(()=>{
    if(view!=="compare") return;
    (async()=>{
      const results={};
      for(const yr of ALL_TAX_YEARS){
        const d=await load(yearKey(yr));
        if(d) results[yr]=d;
      }
      setAllYearsData(results);
    })();
  },[view]);

  const months={};
  data.transactions.forEach(t=>{
    const m=t.date.slice(0,7);
    if(!months[m])months[m]={r:0,p:0};
    if(t.type==="income")months[m].r+=t.amount; else months[m].p+=t.amount;
  });
  const mList=Object.keys(months).sort().reverse();

  const downloadReport=()=>{
    setDownloading(true);
    const incRows=Object.entries(tax.incByCat).map(([c,a])=>`<tr><td>${c}</td><td class="amt">${fmt(a)}</td></tr>`).join("");
    const mRows=mList.map(m=>`<tr><td>${m}</td><td class="g">${fmt(months[m].r)}</td><td class="r">${fmt(months[m].p)}</td><td class="${months[m].r-months[m].p>=0?"g":"r"}">${fmt(months[m].r-months[m].p)}</td></tr>`).join("");
    const expRows=isFreelancer?Object.entries(tax.expenseBreakdown).map(([c,a])=>`<tr><td>${c}</td><td class="amt">${fmt(a)}</td></tr>`).join(""):"";
    const html=`<!DOCTYPE html><html><head><meta charset="UTF-8"><title>${APP_NAME} — Tax Report ${TAX_YEAR}</title>
<style>*{box-sizing:border-box;margin:0;padding:0}body{font-family:Georgia,serif;background:#fff;color:#1a1a2e;padding:24px}
.header{display:flex;justify-content:space-between;align-items:flex-start;border-bottom:3px solid #b8960c;padding-bottom:16px;margin-bottom:20px}
.logo-area{display:flex;gap:14px;align-items:center}.logo-area img{width:70px;height:70px;border-radius:50%;border:2px solid #b8960c}
.firm{font-size:18px;font-weight:800;color:#1a1a2e}.sub{font-size:11px;color:#b8960c;font-weight:700;letter-spacing:1px;margin-top:2px}
.badge{display:inline-block;background:${isFreelancer?"#f59e0b":"#1d4ed8"};color:#fff;padding:3px 10px;border-radius:4px;font-size:11px;font-weight:700;margin-top:6px}
.app-brand{font-size:13px;color:#b8960c;font-weight:700;margin-bottom:2px}.app-tag{font-size:10px;color:#64748b}
.profile-box{background:#f8f9fa;border:1px solid #e2e8f0;border-radius:10px;padding:14px;margin-bottom:20px;display:grid;grid-template-columns:1fr 1fr;gap:8px}
.pf{font-size:12px;color:#374151}.pf span{color:#1a1a2e;font-weight:700}
table{width:100%;border-collapse:collapse;margin-bottom:20px;font-size:12px}
th{background:#1a1a2e;color:#fff;padding:9px 12px;text-align:left;font-size:11px;letter-spacing:0.5px}
td{padding:8px 12px;border-bottom:1px solid #f1f5f9}tr:nth-child(even)td{background:#fafafa}
.amt,.g,.r{text-align:right;font-weight:600}.g{color:#059669}.r{color:#dc2626}
.section{font-size:14px;font-weight:800;color:#1a1a2e;margin:20px 0 10px;padding-left:6px;border-left:4px solid #b8960c}
.tax-box{background:linear-gradient(135deg,#1a1a2e,#2d2d5e);color:#fff;border-radius:12px;padding:18px;margin-bottom:20px}
.tr{display:flex;justify-content:space-between;padding:5px 0;font-size:13px;border-bottom:1px solid rgba(255,255,255,0.1)}
.tr.total{font-size:16px;font-weight:800;border-top:2px solid #b8960c;margin-top:8px;padding-top:12px}
.tl{color:#94a3b8}.tv{font-weight:700}.red{color:#f87171}.gold{color:#fbbf24}.green{color:#34d399}.amber{color:#fbbf24}
.free-box{background:#d1fae5;border:2px solid #10b981;border-radius:10px;padding:14px;margin-bottom:20px;text-align:center}
.free-box h3{color:#065f46;font-size:16px;margin-bottom:6px}.free-box p{color:#047857;font-size:12px}
.disclaimer{background:#fef3c7;border:1px solid #fbbf24;border-radius:8px;padding:12px;font-size:11px;color:#78350f;margin-bottom:20px}
.footer{margin-top:30px;border-top:2px solid #b8960c;padding-top:16px;display:flex;justify-content:space-between;font-size:10px;color:#94a3b8}
@media print{body{padding:0}button{display:none}}</style></head><body>
<div class="header">
  <div class="logo-area">
    <img src="${LOGO_B64}" alt="GDP Consultants"/>
    <div><div class="app-brand">${APP_NAME}</div><div class="app-tag">${APP_BRAND_LINE}</div><div class="firm" style="margin-top:4px">${FIRM_NAME}</div>
    <div style="font-size:11px;color:#555;margin-top:4px">✉ ${APP_EMAIL} · 🌐 ${APP_WEB} · 💬 ${APP_WHATSAPP}</div></div>
  </div>
  <div>
    <div style="font-size:20px;font-weight:800;color:#b8960c">Tax Report</div>
    <div style="font-size:13px;color:#64748b">Y/A ${TAX_YEAR} · ${TAX_YEAR_FULL}</div>
    <div style="font-size:11px;color:#555;margin-top:4px">Generated: ${new Date().toLocaleDateString("en-LK")}</div>
  </div>
</div>
<div class="free-box"><h3>🎁 FREE Tax Return Filing Included!</h3><p>As a premium subscriber, GDP Consultants will file your tax return at no additional cost.<br>Contact us: ${APP_EMAIL} · WhatsApp: ${APP_WHATSAPP}</p></div>
${profile?`<div class="profile-box">
  <div class="pf">Name: <span>${profile.name}</span></div>
  <div class="pf">Mobile: <span>${profile.mobile}</span></div>
  <div class="pf">NIC: <span>${profile.nic||"—"}</span></div>
  <div class="pf">TIN: <span>${profile.tin||"—"}</span></div>
  <div class="pf">Address: <span>${[profile.address1,profile.address2,profile.city,profile.district].filter(Boolean).join(", ")||"—"}</span></div>
  <div class="pf">Bank: <span>${profile.bankName||"—"} · ****${profile.accountNo?.slice(-4)||""}</span></div>
  <div class="pf">Employment: <span class="badge">${isFreelancer?"💻 Freelancer":"🏢 Salaried Employee"}</span></div>
</div>`:""}
<div class="disclaimer">⚠️ <b>Disclaimer:</b> Verify all figures with your GDP Consultants tax advisor before IRD submission.</div>
<div class="section">💰 Income Summary</div>
<table><thead><tr><th>Income Type</th><th style="text-align:right">Amount (Rs.)</th></tr></thead><tbody>${incRows}<tr style="background:#1a1a2e;color:#fff"><td><b>TOTAL GROSS INCOME</b></td><td class="amt" style="color:#fbbf24"><b>${fmt(tax.totalGross)}</b></td></tr></tbody></table>
${isFreelancer&&Object.keys(tax.expenseBreakdown).length>0?`<div class="section">🧾 Business Expense Deductions (Freelancer)</div>
<table><thead><tr><th>Expense Category</th><th style="text-align:right">Amount (Rs.)</th></tr></thead><tbody>${expRows}<tr style="background:#1a1a2e;color:#fff"><td><b>TOTAL ALLOWABLE EXPENSES</b></td><td class="amt" style="color:#34d399"><b>(${fmt(tax.allowableExpenses)})</b></td></tr></tbody></table>`:""}
<div class="section">🧮 Tax Computation</div>
<div class="tax-box">
  <div class="tr"><span class="tl">Total Gross Income</span><span class="tv">${fmt(tax.totalGross)}</span></div>
  ${isFreelancer?`<div class="tr"><span class="tl">Less: Business Expenses</span><span class="tv green">(${fmt(tax.allowableExpenses)})</span></div>`:""}
  ${tax.exportIncome>0?`<div class="tr"><span class="tl">Less: Export Income</span><span class="tv amber">(${fmt(tax.exportIncome)})</span></div>`:""}
  <div class="tr"><span class="tl">Less: Personal Relief</span><span class="tv green">(${fmt(tax.relief)})</span></div>
  <div class="tr"><span class="tl">Less: Qualifying Payments</span><span class="tv green">(${fmt(tax.qpRelief)})</span></div>
  <div class="tr"><span class="tl">Taxable Income</span><span class="tv gold">${fmt(tax.taxable)}</span></div>
  <div class="tr"><span class="tl">Gross Tax Liability</span><span class="tv red">${fmt(tax.grossTax)}</span></div>
  ${!isFreelancer?`<div class="tr"><span class="tl">Less: APIT Paid</span><span class="tv green">(${fmt(tax.apitPaid)})</span></div>`:""}
  ${isFreelancer&&tax.quarterlyTax>0?`<div class="tr"><span class="tl">Quarterly Advance Tax</span><span class="tv amber">${fmt(tax.quarterlyTax)}/quarter</span></div>`:""}
  <div class="tr total"><span class="tl">BALANCE TAX PAYABLE</span><span class="tv ${tax.netTax>0?"red":"green"}">${fmt(tax.netTax)}</span></div>
</div>
<div class="section">📅 Monthly Cash Flow</div>
<table><thead><tr><th>Month</th><th style="text-align:right">Inflows</th><th style="text-align:right">Outflows</th><th style="text-align:right">Net</th></tr></thead><tbody>${mRows||"<tr><td colspan='4' style='text-align:center;color:#94a3b8'>No transactions</td></tr>"}</tbody></table>
<div class="section">🏦 Bank Accounts</div>
<table><thead><tr><th>Account</th><th>Bank</th><th style="text-align:right">Balance</th></tr></thead><tbody>
${data.bankAccounts.map(a=>`<tr><td>${a.name} (${a.accountType})</td><td>${a.bank}</td><td class="${bankBalance(a)>=0?"g":"r"}">${fmt(bankBalance(a))}</td></tr>`).join("")||"<tr><td colspan='3'>No bank accounts</td></tr>"}
</tbody></table>
<div class="footer"><div>${APP_NAME} v4.0 · ${FIRM_NAME}<br>Act: Inland Revenue (Amendment) Act No. 2 of 2025</div><div style="text-align:right">Filing Deadline: ${FILING_DEADLINE}<br>Portal: ${IRD_PORTAL}</div></div>
<div style="text-align:center;margin-top:16px"><button onclick="window.print()" style="background:#1a1a2e;color:#f5d060;border:none;padding:10px 24px;border-radius:8px;font-size:14px;font-weight:700;cursor:pointer">🖨️ Print / Save as PDF</button></div>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('SW registered:', reg.scope))
          .catch(err => console.log('SW error:', err));
      });
    }
  </script>
</body></html>`;
    const blob=new Blob([html],{type:"text/html"});
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;a.download=`${APP_NAME}_TaxReport_${TAX_YEAR.replace("/","_")}_${(profile?.name||"Taxpayer").replace(/ /g,"_")}.html`;
    document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);
    setTimeout(()=>setDownloading(false),1000);
  };

  return(
    <div style={S.page}>
      <div style={S.pageTitle}>📊 Reports — {activeYear}</div>
      <button onClick={downloadReport} disabled={downloading} style={{width:"100%",padding:"13px",background:downloading?"#1e293b":"linear-gradient(135deg,#b8960c,#f5d060)",color:downloading?"#64748b":"#111",border:"none",borderRadius:12,fontWeight:"800",fontSize:14,cursor:"pointer",marginBottom:8,display:"flex",alignItems:"center",justifyContent:"center",gap:8}}>
        {downloading?"⏳ Generating...":"📥 Download Full Tax Report (HTML → PDF)"}
      </button>
      <div style={{...S.card,border:"1px solid #064e3b",background:"#0a1a14",marginBottom:14,padding:"10px 12px"}}>
        <div style={{fontSize:11,color:"#6ee7b7",fontWeight:"700"}}>🎁 FREE Tax Return Filing Included!</div>
        <div style={{fontSize:11,color:"#94a3b8",marginTop:4}}>As a premium subscriber, our Chartered Accountants will file your IRD return for free. Share this report with us via WhatsApp or email.</div>
        <ContactLinks small/>
      </div>
      <div style={{display:"flex",gap:6,marginBottom:14,flexWrap:"wrap"}}>
        {[["annual","📅 Annual"],["monthly","📆 Monthly"],["cashflow","💹 Flow"],["compare","📊 Year vs Year"]].map(([v,lbl])=>(
          <button key={v} style={{...S.tBtn,...(view===v?S.tBtnA:{})}} onClick={()=>setView(v)}>{lbl}</button>
        ))}
      </div>
      {view==="annual"&&(
        <>
          <div style={S.card}>
            <div style={S.cardTitle}>📈 Financial Position</div>
            <TRow l="Cash on Hand"        v={fmt(cashBalance)}                 c="#10b981"/>
            <TRow l="Total Bank Balance"  v={fmt(totalBankBal)}                c="#3b82f6"/>
            <div style={S.divider}/>
            <TRow l="Total Liquid Assets" v={fmt(cashBalance+totalBankBal)}    c="#fbbf24" bold/>
          </div>
          <div style={S.card}>
            <div style={S.cardTitle}>💰 Income Summary</div>
            {Object.entries(tax.incByCat).map(([cat,amt])=>(
              <div key={cat} style={{marginBottom:8}}>
                <div style={S.row}><span style={{color:"#cbd5e1",fontSize:12}}>{catIcon(cat)} {cat}</span><span style={{color:"#34d399",fontSize:12,fontWeight:"600"}}>{fmt(amt)}</span></div>
                <div style={{background:"#1e293b",borderRadius:4,height:5}}><div style={{height:5,borderRadius:4,background:"linear-gradient(90deg,#10b981,#34d399)",width:`${tax.totalGross>0?(amt/tax.totalGross)*100:0}%`}}/></div>
              </div>
            ))}
          </div>
          <div style={S.card}>
            <div style={S.cardTitle}>📋 Tax Summary</div>
            {isFreelancer&&<TRow l="Business Expenses Deducted" v={fmt(tax.allowableExpenses)} c="#34d399"/>}
            <TRow l="Personal Relief" v={fmt(tax.relief)}    c="#a78bfa"/>
            <TRow l="Taxable Income"  v={fmt(tax.taxable)}    c="#fbbf24" bold/>
            <TRow l="Gross Tax"       v={fmt(tax.grossTax)}  c="#f87171"/>
            {!isFreelancer&&<TRow l="APIT Paid" v={fmt(tax.apitPaid)} c="#34d399"/>}
            <TRow l="Effective Rate"  v={tax.totalGross>0?((tax.grossTax/tax.totalGross)*100).toFixed(2)+"%":"0%"} c="#94a3b8"/>
            <div style={S.divider}/>
            <TRow l="Net Tax Due" v={fmt(tax.netTax)} c={tax.netTax>0?"#f87171":"#34d399"} bold size={14}/>
          </div>
        </>
      )}
      {view==="monthly"&&(
        <div style={S.card}>
          <div style={S.cardTitle}>📆 Monthly Summary</div>
          {mList.length===0?<Empty icon="📅" text="No data yet"/>:mList.map(m=>(
            <div key={m} style={{marginBottom:12,paddingBottom:12,borderBottom:"1px solid #1e293b"}}>
              <div style={{color:"#94a3b8",fontSize:12,fontWeight:"700",marginBottom:6}}>{m}</div>
              <div style={{display:"flex",gap:6}}>
                <div style={{flex:1,background:"#0f2d1f",borderRadius:8,padding:"8px 10px"}}><div style={{color:"#6ee7b7",fontSize:10}}>IN</div><div style={{color:"#34d399",fontWeight:"700",fontSize:13}}>{fmtC(months[m].r)}</div></div>
                <div style={{flex:1,background:"#2d0f0f",borderRadius:8,padding:"8px 10px"}}><div style={{color:"#fca5a5",fontSize:10}}>OUT</div><div style={{color:"#f87171",fontWeight:"700",fontSize:13}}>{fmtC(months[m].p)}</div></div>
                <div style={{flex:1,background:"#0f1d2d",borderRadius:8,padding:"8px 10px"}}><div style={{color:"#93c5fd",fontSize:10}}>NET</div><div style={{color:months[m].r-months[m].p>=0?"#34d399":"#f87171",fontWeight:"700",fontSize:13}}>{fmtC(months[m].r-months[m].p)}</div></div>
              </div>
            </div>
          ))}
        </div>
      )}
      {view==="cashflow"&&mList.length>0&&(
        <div style={S.card}>
          <div style={S.cardTitle}>💹 Cash Flow — Last 6 Months</div>
          {mList.slice(0,6).map(m=>{
            const top=Math.max(...mList.map(x=>Math.max(months[x].r,months[x].p)),1);
            const net=months[m].r-months[m].p;
            return(
              <div key={m} style={{marginBottom:14}}>
                <div style={{display:"flex",justifyContent:"space-between",marginBottom:4}}><span style={{color:"#94a3b8",fontSize:12}}>{m}</span><span style={{color:net>=0?"#34d399":"#f87171",fontSize:12,fontWeight:"600"}}>{net>=0?"▲":"▼"}{fmtC(Math.abs(net))}</span></div>
                <div style={{height:7,background:"#1e293b",borderRadius:4,marginBottom:3}}><div style={{height:7,borderRadius:4,background:"linear-gradient(90deg,#10b981,#34d399)",width:`${(months[m].r/top)*100}%`}}/></div>
                <div style={{height:7,background:"#1e293b",borderRadius:4}}><div style={{height:7,borderRadius:4,background:"linear-gradient(90deg,#dc2626,#f87171)",width:`${(months[m].p/top)*100}%`}}/></div>
              </div>
            );
          })}
        </div>
      )}

      {/* ── Year-over-Year Comparison ── */}
      {view==="compare"&&(
        <div>
          <div style={{...S.card,border:"1px solid #1e3a5f",background:"#060d1a",marginBottom:12}}>
            <div style={{...S.cardTitle,color:"#93c5fd"}}>📊 Income — Year vs Year</div>
            {Object.keys(allYearsData).length===0?(
              <div style={{fontSize:12,color:"#475569",textAlign:"center",padding:20}}>No historical data found.<br/>Data from previous years will appear here as you use the app over time.</div>
            ):(
              <>
                {Object.entries(allYearsData).sort(([a],[b])=>a.localeCompare(b)).map(([yr,d])=>{
                  const gross=(d.incomeEntries||[]).reduce((s,e)=>s+e.amount,0);
                  const expenses=(d.expenseEntries||[]).reduce((s,e)=>s+e.amount,0);
                  const maxGross=Math.max(...Object.values(allYearsData).map(d2=>(d2.incomeEntries||[]).reduce((s,e)=>s+e.amount,0)),1);
                  return(
                    <div key={yr} style={{marginBottom:14}}>
                      <div style={{display:"flex",justifyContent:"space-between",marginBottom:4,alignItems:"center"}}>
                        <span style={{fontSize:12,color:yr===activeYear?"#f5d060":"#94a3b8",fontWeight:yr===activeYear?"800":"400"}}>{yr}{yr===activeYear?" ← current":""}</span>
                        <div style={{textAlign:"right"}}>
                          <div style={{fontSize:13,color:"#34d399",fontWeight:"700"}}>{fmt(gross)}</div>
                          {expenses>0&&<div style={{fontSize:10,color:"#f87171"}}>Exp: {fmt(expenses)}</div>}
                        </div>
                      </div>
                      <div style={{height:8,background:"#1e293b",borderRadius:4}}>
                        <div style={{height:8,borderRadius:4,background:yr===activeYear?"linear-gradient(90deg,#b8960c,#f5d060)":"linear-gradient(90deg,#10b981,#34d399)",width:`${(gross/maxGross)*100}%`,transition:"width 0.6s"}}/>
                      </div>
                    </div>
                  );
                })}
                <div style={S.divider}/>
                <div style={{fontSize:11,color:"#64748b",textAlign:"center",marginTop:8}}>
                  Switch year using the 📅 selector in the top bar to view and compare each year's data.
                </div>
              </>
            )}
          </div>

          <div style={{...S.card,background:"#0d0d12",border:"1px solid #334155"}}>
            <div style={{...S.cardTitle,color:"#b8960c"}}>💡 Year-by-Year Tax Summary</div>
            {Object.keys(allYearsData).length===0?(
              <div style={{fontSize:12,color:"#475569"}}>No historical data yet.</div>
            ):(
              <div style={{overflowX:"auto"}}>
                <table style={{width:"100%",borderCollapse:"collapse",fontSize:11}}>
                  <thead>
                    <tr>
                      <th style={{textAlign:"left",color:"#64748b",padding:"4px 6px",fontWeight:"700",borderBottom:"1px solid #1e293b"}}>Year</th>
                      <th style={{textAlign:"right",color:"#64748b",padding:"4px 6px",fontWeight:"700",borderBottom:"1px solid #1e293b"}}>Gross Income</th>
                      <th style={{textAlign:"right",color:"#64748b",padding:"4px 6px",fontWeight:"700",borderBottom:"1px solid #1e293b"}}>Expenses</th>
                      <th style={{textAlign:"right",color:"#64748b",padding:"4px 6px",fontWeight:"700",borderBottom:"1px solid #1e293b"}}>Net</th>
                    </tr>
                  </thead>
                  <tbody>
                    {Object.entries(allYearsData).sort(([a],[b])=>a.localeCompare(b)).map(([yr,d])=>{
                      const gross=(d.incomeEntries||[]).reduce((s,e)=>s+e.amount,0);
                      const exp=(d.expenseEntries||[]).reduce((s,e)=>s+e.amount,0);
                      const net=gross-exp;
                      return(
                        <tr key={yr} style={{background:yr===activeYear?"#1a1500":"transparent"}}>
                          <td style={{color:yr===activeYear?"#f5d060":"#94a3b8",padding:"5px 6px",fontWeight:yr===activeYear?"700":"400"}}>{yr}</td>
                          <td style={{color:"#34d399",textAlign:"right",padding:"5px 6px"}}>{fmt(gross)}</td>
                          <td style={{color:"#f87171",textAlign:"right",padding:"5px 6px"}}>{exp>0?fmt(exp):"—"}</td>
                          <td style={{color:net>=0?"#34d399":"#f87171",textAlign:"right",padding:"5px 6px",fontWeight:"700"}}>{fmt(net)}</td>
                        </tr>
                      );
                    })}
                  </tbody>
                </table>
              </div>
            )}
          </div>
        </div>
      )}
    </div>
  );
}

// ─── PAYSLIP SCANNER ────────────────────────────────────────────────────────────
// Uses Tesseract.js (loaded from CDN) for OCR on captured payslip image
function PayslipScanner({onExtracted,onClose}){
  const [imgSrc,setImgSrc]     = useState(null);
  const [status,setStatus]     = useState("idle"); // idle|loading|done|error
  const [extracted,setExtracted] = useState({gross:"",apit:"",epf:"",etf:"",month:today().slice(0,7)});
  const [tesseractReady,setTesseractReady] = useState(!!window.Tesseract);
  const fileRef = useRef(null);

  // Dynamically load Tesseract.js from CDN if not already present
  useEffect(()=>{
    if(window.Tesseract){ setTesseractReady(true); return; }
    const s=document.createElement("script");
    s.src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/4.1.1/tesseract.min.js";
    s.onload=()=>setTesseractReady(true);
    s.onerror=()=>setStatus("error");
    document.head.appendChild(s);
  },[]);

  const extractNumbers = (text) => {
    // Normalise: remove commas, convert to lowercase
    const t = text.replace(/,/g,"").toLowerCase();
    const findAmt = (patterns) => {
      for(const pat of patterns){
        const m = t.match(pat);
        if(m) return parseFloat(m[1]).toFixed(2);
      }
      return "";
    };
    return {
      gross: findAmt([/(?:gross\s*(?:salary|pay|earnings?|total)[^0-9]*)([\d]+(?:\.\d+)?)/i,/(?:basic\s*salary[^0-9]*)([\d]+(?:\.\d+)?)/i,/(?:total\s*earnings?[^0-9]*)([\d]+(?:\.\d+)?)/i]),
      apit:  findAmt([/(?:apit|paye|income\s*tax)[^0-9]*([\d]+(?:\.\d+)?)/i,/(?:tax\s*deducted?[^0-9]*)([\d]+(?:\.\d+)?)/i]),
      epf:   findAmt([/(?:epf\s*employee|employee\s*epf|epf\s*\(e\)|epf\s*contribution)[^0-9]*([\d]+(?:\.\d+)?)/i,/(?:epf)[^0-9]*([\d]+(?:\.\d+)?)/i]),
      etf:   findAmt([/(?:etf)[^0-9]*([\d]+(?:\.\d+)?)/i]),
    };
  };

  const handleFile = async(e)=>{
    const file=e.target.files[0];
    if(!file) return;
    const reader=new FileReader();
    reader.onload=async(ev)=>{
      const src=ev.target.result;
      setImgSrc(src);
      setStatus("loading");
      try{
        if(!window.Tesseract) throw new Error("OCR not loaded");
        const worker=await window.Tesseract.createWorker("eng");
        const {data:{text}}=await worker.recognize(src);
        await worker.terminate();
        const result=extractNumbers(text);
        setExtracted(prev=>({...prev,...result}));
        setStatus("done");
      } catch(err){
        setStatus("error");
      }
    };
    reader.readAsDataURL(file);
  };

  const set=p=>setExtracted(e=>({...e,...p}));

  return(
    <div style={{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",zIndex:9999,display:"flex",flexDirection:"column",overflowY:"auto"}}>
      <div style={{background:"#0d1829",borderRadius:"20px 20px 0 0",marginTop:"auto",padding:20,maxHeight:"95vh",overflowY:"auto"}}>
        <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}}>
          <div style={{fontSize:15,fontWeight:"800",color:"#f1f5f9"}}>📸 Payslip Scanner</div>
          <button onClick={onClose} style={{background:"#1e293b",border:"none",color:"#94a3b8",borderRadius:8,padding:"6px 12px",cursor:"pointer",fontWeight:"700"}}>✕ Close</button>
        </div>

        <div style={{fontSize:11,color:"#64748b",marginBottom:14,lineHeight:1.7}}>
          Take a photo or upload your payslip. The scanner will automatically extract your gross salary, APIT, EPF, and ETF amounts.
        </div>

        {/* Camera / File Picker */}
        <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:14}}>
          <button onClick={()=>{const i=fileRef.current;i.setAttribute("capture","environment");i.click();}}
            style={{padding:"14px",background:"#064e3b",border:"2px solid #10b981",borderRadius:12,color:"#6ee7b7",fontWeight:"800",fontSize:13,cursor:"pointer"}}>
            📷 Take Photo
          </button>
          <button onClick={()=>{fileRef.current.removeAttribute("capture");fileRef.current.click();}}
            style={{padding:"14px",background:"#0a1a3a",border:"2px solid #1d4ed8",borderRadius:12,color:"#93c5fd",fontWeight:"800",fontSize:13,cursor:"pointer"}}>
            🖼️ Upload Image
          </button>
        </div>
        <input ref={fileRef} type="file" accept="image/*" style={{display:"none"}} onChange={handleFile}/>

        {imgSrc&&(
          <div style={{marginBottom:14,borderRadius:12,overflow:"hidden",border:"1px solid #334155"}}>
            <img src={imgSrc} alt="payslip" style={{width:"100%",maxHeight:200,objectFit:"contain",background:"#111"}}/>
          </div>
        )}

        {status==="loading"&&(
          <div style={{textAlign:"center",padding:20}}>
            <div style={{fontSize:24,marginBottom:8}}>🔍</div>
            <div style={{color:"#93c5fd",fontWeight:"700"}}>Reading payslip...</div>
            <div style={{color:"#475569",fontSize:11,marginTop:4}}>OCR is running — this takes 10–20 seconds on mobile</div>
          </div>
        )}

        {status==="error"&&(
          <div style={{background:"#1a0000",border:"1px solid #ef4444",borderRadius:8,padding:12,marginBottom:12,fontSize:12,color:"#fca5a5"}}>
            ⚠️ OCR could not be loaded or failed. Please enter values manually below, or ensure you have an internet connection for the OCR library.
          </div>
        )}

        {(status==="done"||status==="error")&&(
          <div>
            <div style={{fontSize:11,color:status==="done"?"#34d399":"#f59e0b",fontWeight:"700",marginBottom:10}}>
              {status==="done"?"✅ Values extracted — please verify before saving:":"✏️ Enter values manually:"}
            </div>
            <FI label="Month (YYYY-MM)" type="month" value={extracted.month} onChange={v=>set({month:v})}/>
            <FI label="Gross Salary (Rs.)" type="number" value={extracted.gross} onChange={v=>set({gross:v})} placeholder="0.00"/>
            <FI label="APIT Deducted (Rs.)" type="number" value={extracted.apit} onChange={v=>set({apit:v})} placeholder="0.00"/>
            <FI label="Employee EPF (Rs.)" type="number" value={extracted.epf} onChange={v=>set({epf:v})} placeholder="0.00"/>
            <FI label="ETF (Rs.)" type="number" value={extracted.etf} onChange={v=>set({etf:v})} placeholder="0.00"/>
            <button onClick={()=>onExtracted(extracted)}
              disabled={!extracted.gross}
              style={{width:"100%",padding:"13px",background:extracted.gross?"linear-gradient(135deg,#b8960c,#f5d060)":"#334155",color:extracted.gross?"#111":"#64748b",border:"none",borderRadius:12,fontWeight:"800",fontSize:14,cursor:extracted.gross?"pointer":"not-allowed",marginTop:8}}>
              ✓ Import to Income Ledger
            </button>
          </div>
        )}

        {status==="idle"&&!tesseractReady&&(
          <div style={{textAlign:"center",color:"#64748b",fontSize:12,padding:8}}>Loading OCR engine…</div>
        )}
      </div>
    </div>
  );
}

// ─── BANK CSV IMPORT ────────────────────────────────────────────────────────────
function BankImportModal({data,update,onClose}){
  const [rows,setRows]     = useState([]);
  const [mapped,setMapped] = useState([]);
  const [step,setStep]     = useState("upload"); // upload|preview|done
  const [bankHint,setBankHint] = useState("");
  const fileRef=useRef(null);

  // Detect Sri Lankan bank CSV format and parse accordingly
  const parseCSV=(text)=>{
    const lines=text.split(/
?
/).filter(l=>l.trim());
    if(!lines.length) return [];
    // Find header line (contains Date or date-like columns)
    let headerIdx=lines.findIndex(l=>/date/i.test(l));
    if(headerIdx<0) headerIdx=0;
    const header=lines[headerIdx].split(",").map(h=>h.trim().replace(/["']/g,"").toLowerCase());

    // Detect bank by column names
    let bank="Unknown";
    if(header.some(h=>/sampath/i.test(h)||header.join(",").includes("sampath"))) bank="Sampath Bank";
    else if(header.some(h=>/commercial/i.test(h))) bank="Commercial Bank";
    else if(header.some(h=>/peoples/i.test(h)||h.includes("people"))) bank="People's Bank";
    else if(header.some(h=>/boc/i.test(h)||h.includes("bank of ceylon"))) bank="Bank of Ceylon";
    else if(header.some(h=>/hnb/i.test(h))) bank="HNB";
    setBankHint(bank);

    // Column mapping (flexible — try common names)
    const col=(names)=>{ const i=header.findIndex(h=>names.some(n=>h.includes(n))); return i>=0?i:-1; };
    const dateCol  = col(["date"]);
    const descCol  = col(["description","narration","particulars","details","reference"]);
    const debitCol = col(["debit","dr","withdrawal","debit amount","amount dr"]);
    const creditCol= col(["credit","cr","deposit","credit amount","amount cr"]);
    const amtCol   = col(["amount","transaction amount"]);
    const balCol   = col(["balance","running balance"]);

    const parsed=[];
    for(let i=headerIdx+1;i<lines.length;i++){
      const cols=lines[i].split(",").map(c=>c.trim().replace(/["']/g,""));
      if(cols.length<3) continue;
      const rawDate=dateCol>=0?cols[dateCol]:"";
      const desc=descCol>=0?cols[descCol]:"Transaction";
      const debit=debitCol>=0?parseFloat(cols[debitCol])||0:0;
      const credit=creditCol>=0?parseFloat(cols[creditCol])||0:0;
      const amt=amtCol>=0?Math.abs(parseFloat(cols[amtCol]))||0:0;

      // Parse date (handle DD/MM/YYYY, YYYY-MM-DD, DD-MM-YYYY)
      let date=today();
      if(rawDate){
        const dp=rawDate.match(/(\d{1,4})[\/\-\.](\d{1,2})[\/\-\.](\d{1,4})/);
        if(dp){
          const [,a,m,b]=dp;
          if(a.length===4) date=`${a}-${m.padStart(2,"0")}-${b.padStart(2,"0")}`;
          else date=`${b}-${m.padStart(2,"0")}-${a.padStart(2,"0")}`;
        }
      }

      if(credit>0||amt>0){
        parsed.push({date,description:desc.slice(0,60),amount:credit||amt,type:"income",medium:"bank",category:"Salary",accountId:data.bankAccounts[0]?.id||"",id:uid(),ref:""});
      }
      if(debit>0){
        parsed.push({date,description:desc.slice(0,60),amount:debit,type:"expense",medium:"bank",category:"General Expense",accountId:data.bankAccounts[0]?.id||"",id:uid(),ref:""});
      }
    }
    return parsed.filter(p=>p.amount>0&&p.date);
  };

  const handleFile=(e)=>{
    const file=e.target.files[0];
    if(!file) return;
    const reader=new FileReader();
    reader.onload=(ev)=>{
      const parsed=parseCSV(ev.target.result);
      setMapped(parsed);
      setStep("preview");
    };
    reader.readAsText(file);
  };

  const importAll=()=>{
    const existing=new Set(data.transactions.map(t=>t.date+"|"+t.amount+"|"+t.description.slice(0,20)));
    const newTxns=mapped.filter(t=>!existing.has(t.date+"|"+t.amount+"|"+t.description.slice(0,20)));
    update({transactions:[...data.transactions,...newTxns]});
    setStep("done");
    setRows(newTxns);
  };

  const updateRow=(i,patch)=>setMapped(m=>m.map((r,j)=>j===i?{...r,...patch}:r));

  return(
    <div style={{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",zIndex:9999,display:"flex",flexDirection:"column",overflowY:"auto"}}>
      <div style={{background:"#0d1829",borderRadius:"20px 20px 0 0",marginTop:"auto",padding:20,maxHeight:"95vh",overflowY:"auto"}}>
        <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}}>
          <div style={{fontSize:15,fontWeight:"800",color:"#f1f5f9"}}>🏦 Import Bank Statement</div>
          <button onClick={onClose} style={{background:"#1e293b",border:"none",color:"#94a3b8",borderRadius:8,padding:"6px 12px",cursor:"pointer",fontWeight:"700"}}>✕</button>
        </div>

        {step==="upload"&&(
          <>
            <div style={{fontSize:11,color:"#64748b",lineHeight:1.7,marginBottom:16}}>
              Export your bank statement as CSV from your bank's internet banking portal, then upload it here. Supported: <span style={{color:"#93c5fd"}}>Sampath, Commercial, People's, BOC, HNB</span> and most CSV formats.
            </div>
            <div style={{...S.card,border:"1px solid #1e3a5f",background:"#060d1a",marginBottom:12}}>
              <div style={{fontSize:11,color:"#93c5fd",fontWeight:"700",marginBottom:8}}>How to export:</div>
              {[["Sampath","Log in → Accounts → Statement → Export → CSV"],["Commercial","Log in → Account → Transaction History → Download → CSV"],["People's / BOC","Log in → eStatement → Date range → Export CSV"],["HNB","Log in → Accounts → Mini Statement → Download"]].map(([b,s])=>(
                <div key={b} style={{padding:"4px 0",borderBottom:"1px solid #1e293b"}}>
                  <span style={{fontSize:11,color:"#b8960c",fontWeight:"700"}}>{b}: </span>
                  <span style={{fontSize:10,color:"#64748b"}}>{s}</span>
                </div>
              ))}
            </div>
            {data.bankAccounts.length===0&&<div style={{fontSize:11,color:"#f59e0b",background:"#1a1000",border:"1px solid #f59e0b",borderRadius:8,padding:10,marginBottom:12}}>⚠️ Add a bank account in your profile first so imported transactions can be linked to it.</div>}
            <button onClick={()=>fileRef.current.click()} style={{width:"100%",padding:"14px",background:"linear-gradient(135deg,#1d4ed8,#2563eb)",border:"none",borderRadius:12,color:"#fff",fontWeight:"800",fontSize:14,cursor:"pointer"}}>
              📂 Choose CSV File
            </button>
            <input ref={fileRef} type="file" accept=".csv,text/csv" style={{display:"none"}} onChange={handleFile}/>
          </>
        )}

        {step==="preview"&&mapped.length>0&&(
          <>
            <div style={{fontSize:11,color:"#34d399",fontWeight:"700",marginBottom:4}}>✅ Found {mapped.length} transactions{bankHint?" from "+bankHint:""}</div>
            <div style={{fontSize:10,color:"#64748b",marginBottom:12}}>Review, adjust categories if needed, then import. Duplicates will be skipped automatically.</div>
            <div style={{maxHeight:280,overflowY:"auto",marginBottom:14,border:"1px solid #1e293b",borderRadius:8}}>
              {mapped.map((r,i)=>(
                <div key={r.id} style={{padding:"8px 10px",borderBottom:"1px solid #1e293b",background:r.type==="income"?"#021a0e":"#1a0505"}}>
                  <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8}}>
                    <div style={{flex:1,minWidth:0}}>
                      <div style={{fontSize:11,color:"#e2e8f0",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}>{r.description}</div>
                      <div style={{fontSize:10,color:"#64748b"}}>{r.date}</div>
                    </div>
                    <div style={{flexShrink:0,textAlign:"right"}}>
                      <div style={{fontSize:12,fontWeight:"700",color:r.type==="income"?"#34d399":"#f87171"}}>{r.type==="income"?"+":"-"}{fmt(r.amount)}</div>
                      <select value={r.type} onChange={e=>updateRow(i,{type:e.target.value})}
                        style={{fontSize:9,background:"#0f172a",color:"#94a3b8",border:"1px solid #334155",borderRadius:4,padding:"1px 4px",marginTop:2}}>
                        <option value="income">Income</option>
                        <option value="expense">Expense</option>
                      </select>
                    </div>
                  </div>
                  <select value={r.category} onChange={e=>updateRow(i,{category:e.target.value})}
                    style={{width:"100%",marginTop:6,fontSize:10,background:"#0f172a",color:"#94a3b8",border:"1px solid #334155",borderRadius:4,padding:"3px 6px"}}>
                    {(r.type==="income"?TXN_CATS_INCOME:TXN_CATS_EXPENSE).map(c=><option key={c} value={c}>{c}</option>)}
                  </select>
                </div>
              ))}
            </div>
            <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8}}>
              <button onClick={()=>setStep("upload")} style={{padding:"12px",background:"#1e293b",border:"1px solid #334155",borderRadius:10,color:"#94a3b8",fontWeight:"700",cursor:"pointer"}}>← Back</button>
              <button onClick={importAll} style={{padding:"12px",background:"linear-gradient(135deg,#b8960c,#f5d060)",border:"none",borderRadius:10,color:"#111",fontWeight:"800",cursor:"pointer"}}>Import {mapped.length} Txns</button>
            </div>
          </>
        )}

        {step==="preview"&&mapped.length===0&&(
          <div style={{textAlign:"center",padding:30}}>
            <div style={{fontSize:24}}>😕</div>
            <div style={{color:"#f59e0b",fontWeight:"700",marginTop:8}}>No transactions found</div>
            <div style={{fontSize:11,color:"#64748b",marginTop:4}}>The CSV format may not be recognised. Try exporting as "CSV" (not Excel) from your bank portal.</div>
            <button onClick={()=>setStep("upload")} style={{marginTop:14,padding:"10px 20px",background:"#1e293b",border:"1px solid #334155",borderRadius:8,color:"#94a3b8",fontWeight:"700",cursor:"pointer"}}>Try Again</button>
          </div>
        )}

        {step==="done"&&(
          <div style={{textAlign:"center",padding:20}}>
            <div style={{fontSize:40,marginBottom:10}}>✅</div>
            <div style={{fontSize:16,fontWeight:"800",color:"#34d399",marginBottom:6}}>Import Complete!</div>
            <div style={{fontSize:13,color:"#94a3b8",marginBottom:20}}>{rows.length} transactions added to your ledger.</div>
            <button onClick={onClose} style={{padding:"12px 28px",background:"linear-gradient(135deg,#b8960c,#f5d060)",border:"none",borderRadius:12,color:"#111",fontWeight:"800",fontSize:14,cursor:"pointer"}}>Done</button>
          </div>
        )}
      </div>
    </div>
  );
}

// ═══════════════════════════════════════════════════════════════════════════════
// ─── TOOLS PAGE (v9) ─────────────────────────────────────────────────────────
// ═══════════════════════════════════════════════════════════════════════════════

// ── Helper: format Rs. amounts ──
const fmtRs = v => "Rs." + Math.round(v||0).toLocaleString("en-LK");


// ─── Finance Page Wrapper — applies teal/cyan colour scheme ──────────────────
function FinPage({children, title, subtitle, icon}) {
  return(
    <div style={{padding:"14px 14px 80px",background:F.base,minHeight:"100vh"}}>
      {/* Finance mode banner */}
      <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:12,paddingTop:32}}>
        <div style={{flex:1}}>
          <div style={{fontSize:18,fontWeight:800,color:F.accentSecond,display:"flex",alignItems:"center",gap:8}}>
            <span>{icon}</span> {title}
          </div>
          {subtitle&&<div style={{fontSize:11,color:F.textSecondary,marginTop:3}}>{subtitle}</div>}
        </div>
        <div style={{background:F.gradAccent,border:`1px solid ${F.borderAccent}`,borderRadius:8,padding:"3px 8px"}}>
          <span style={{fontSize:9,fontWeight:700,color:F.accentPrimary,letterSpacing:"0.5px"}}>FINANCE</span>
        </div>
      </div>
      {children}
    </div>
  );
}

// ──────────────────────────────────────────────────────────────────────────────
// 1. EPF RETIREMENT PLANNER
// ──────────────────────────────────────────────────────────────────────────────
function EPFPlannerPage({data, update, sub, lang}) {
  const epf = data.epf || {};
  const [f, setF] = useState({
    currentBalance: epf.currentBalance||0,
    monthlyContrib: epf.monthlyContrib||0,
    monthlySalary:  epf.monthlySalary||0,
    salaryGrowthPct:epf.salaryGrowthPct||5,
    currentAge:     epf.currentAge||30,
    targetAge:      epf.targetAge||55,
    voluntaryTopUp: epf.voluntaryTopUp||0,
  });

  const save = () => update({epf:f});

  // Projection: compound growth at 12% EPF declared rate
  const EPF_RATE = 0.12;
  const yearsLeft = Math.max(0, (f.targetAge||55) - (f.currentAge||30));
  const monthlyTotal = (parseFloat(f.monthlyContrib)||0) + (parseFloat(f.voluntaryTopUp)||0);
  const salaryGrowth = (parseFloat(f.salaryGrowthPct)||5)/100;

  let corpus = parseFloat(f.currentBalance)||0;
  for(let y=0; y<yearsLeft; y++){
    const monthlyThisYear = monthlyTotal * Math.pow(1+salaryGrowth,y);
    corpus = corpus * (1+EPF_RATE) + monthlyThisYear * 12;
  }

  // Target: 70% of final salary × 20 years (retirement income)
  const finalSalary = (parseFloat(f.monthlySalary)||0) * Math.pow(1+salaryGrowth, yearsLeft);
  const targetCorpus = finalSalary * 0.7 * 12 * 20;
  const shortfall = Math.max(0, targetCorpus - corpus);
  const surplus = Math.max(0, corpus - targetCorpus);
  const qualifyingRoom = Math.max(0, 1200000 - (data.taxSettings?.qualifyingPayments||0));
  const suggestTopUp = Math.min(qualifyingRoom/12, shortfall > 0 ? 5000 : 0);

  const Bar = ({pct,color}) => (
    <div style={{background:"#1e293b",borderRadius:8,height:10,marginTop:6,overflow:"hidden"}}>
      <div style={{width:`${Math.min(100,pct)}%`,height:"100%",background:color,borderRadius:8,transition:"width 0.5s"}}/>
    </div>
  );

  return(
    <FinPage icon="🏦" title="EPF Retirement Planner" subtitle="Project your corpus · Identify gaps · Tax-smart top-up advice">

      <div style={{background:F.card,borderRadius:14,border:`1px solid ${F.border}`,padding:14,marginBottom:12}}>
        <div style={{fontSize:11,fontWeight:700,color:F.textMuted,marginBottom:10,textTransform:"uppercase",letterSpacing:"0.5px"}}>Your EPF Details</div>
        {[
          ["Current EPF Balance (Rs.)", "currentBalance"],
          ["Monthly EPF Contribution (Rs.)", "monthlyContrib"],
          ["Current Monthly Salary (Rs.)", "monthlySalary"],
          ["Voluntary Top-Up / Month (Rs.)", "voluntaryTopUp"],
        ].map(([label,key])=>(
          <div key={key} style={{marginBottom:10}}>
            <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>{label}</label>
            <input type="number" value={f[key]} onChange={e=>setF({...f,[key]:e.target.value})}
              style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box"}}/>
          </div>
        ))}
        <div style={{display:"flex",gap:10}}>
          <div style={{flex:1}}>
            <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>Current Age</label>
            <input type="number" value={f.currentAge} onChange={e=>setF({...f,currentAge:e.target.value})}
              style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box"}}/>
          </div>
          <div style={{flex:1}}>
            <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>Retirement Age</label>
            <select value={f.targetAge} onChange={e=>setF({...f,targetAge:parseInt(e.target.value)})}
              style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box"}}>
              <option value={55}>55 (Standard)</option>
              <option value={60}>60 (Extended)</option>
              <option value={65}>65 (Late)</option>
            </select>
          </div>
        </div>
        <div style={{marginTop:10}}>
          <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>Expected Salary Growth % / year</label>
          <input type="number" value={f.salaryGrowthPct} onChange={e=>setF({...f,salaryGrowthPct:e.target.value})}
            style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box"}}/>
        </div>
        <button onClick={save} style={{marginTop:14,width:"100%",padding:11,background:F.btnPrimary,border:"none",borderRadius:10,color:"#fff",fontWeight:700,fontSize:14,cursor:"pointer"}}>
          💾 Save & Project
        </button>
      </div>

      {/* Projection Results */}
      {yearsLeft > 0 && (
        <>
          <div style={{background:F.card,borderRadius:14,border:`1px solid ${F.border}`,padding:14,marginBottom:12}}>
            <div style={{fontSize:11,fontWeight:700,color:F.textMuted,marginBottom:10,textTransform:"uppercase",letterSpacing:"0.5px"}}>📊 Projection at Age {f.targetAge} ({yearsLeft}yrs @ 12% EPF Rate)</div>
            <div style={{display:"flex",gap:10,marginBottom:10}}>
              <div style={{flex:1,background:"linear-gradient(135deg,#0a2a1a,#0d3a22)",borderRadius:12,padding:"12px 10px",border:"1px solid #065f46"}}>
                <div style={{fontSize:10,color:"#6ee7b7",marginBottom:4}}>Projected Corpus</div>
                <div style={{fontSize:16,fontWeight:800,color:"#34d399"}}>{fmtRs(corpus)}</div>
              </div>
              <div style={{flex:1,background:"linear-gradient(135deg,#1a1200,#2a1c00)",borderRadius:12,padding:"12px 10px",border:"1px solid #92400e"}}>
                <div style={{fontSize:10,color:"#fcd34d",marginBottom:4}}>Target Corpus</div>
                <div style={{fontSize:16,fontWeight:800,color:F.accentGold}}>{fmtRs(targetCorpus)}</div>
                <div style={{fontSize:9,color:"#92400e",marginTop:2}}>70% salary × 20yrs</div>
              </div>
            </div>
            <div style={{fontSize:11,color:F.textSecondary,marginBottom:6}}>Funding Progress</div>
            <Bar pct={targetCorpus > 0 ? (corpus/targetCorpus)*100 : 100} color={shortfall > 0 ? "#f59e0b" : "#10b981"}/>
            <div style={{display:"flex",justifyContent:"space-between",marginTop:4}}>
              <span style={{fontSize:10,color:F.textMuted}}>{targetCorpus > 0 ? Math.round(Math.min(100,(corpus/targetCorpus)*100)) : 100}% funded</span>
              <span style={{fontSize:10,color:shortfall>0?"#ef4444":"#10b981"}}>{shortfall>0 ? `⚠️ Shortfall: ${fmtRs(shortfall)}` : `✅ Surplus: ${fmtRs(surplus)}`}</span>
            </div>
          </div>

          {suggestTopUp > 0 && (
            <div style={{background:"linear-gradient(135deg,#1a0a00,#2d1500)",borderRadius:14,border:"1px solid #b8960c",padding:14,marginBottom:12}}>
              <div style={{fontSize:13,fontWeight:700,color:F.accentGold,marginBottom:6}}>💡 Tax-Smart Recommendation</div>
              <div style={{fontSize:12,color:"#d4c44a",lineHeight:1.6}}>
                Contribute <strong style={{color:F.accentGold}}>{fmtRs(suggestTopUp)}/month</strong> in voluntary EPF top-ups.<br/>
                This closes your shortfall AND reduces your taxable income by up to <strong style={{color:F.accentGold}}>{fmtRs(suggestTopUp*12)}/year</strong> (qualifying payments deduction).
              </div>
              <div style={{fontSize:10,color:"#92400e",marginTop:8}}>You have Rs.{(qualifyingRoom/12).toLocaleString()}/mo of qualifying payment room left</div>
            </div>
          )}

          <a href={`https://wa.me/94${data.profile?.whatsapp||"719204903"}?text=Hi+GDP+Consultants,+I'd+like+to+book+a+Retirement+Review+consultation.`}
            target="_blank" rel="noopener noreferrer"
            style={{display:"block",textDecoration:"none",background:"linear-gradient(135deg,#064e3b,#059669)",borderRadius:14,border:"1px solid #10b981",padding:14,textAlign:"center"}}>
            <div style={{fontSize:13,fontWeight:700,color:"#ecfdf5"}}>📅 Book a Retirement Review</div>
            <div style={{fontSize:10,color:"#6ee7b7",marginTop:2}}>GDP Consultants — Chartered Accountants</div>
          </a>
        </>
      )}
    </div>
  );
}

// ──────────────────────────────────────────────────────────────────────────────
// 2. NET WORTH DASHBOARD
// ──────────────────────────────────────────────────────────────────────────────
function NetWorthPage({data, update}) {
  const assets = data.netWorthAssets || [];
  const liabs  = data.netWorthLiabilities || [];
  const [showAdd, setShowAdd] = useState(null); // "asset"|"liability"
  const [form, setForm] = useState({name:"", type:"", value:""});

  const ASSET_TYPES = ["Property/Land","Vehicle","Gold/Jewellery","Fixed Deposit","Unit Trust","Shares/CSE","Savings Account","Other Asset"];
  const LIAB_TYPES  = ["Housing Loan","Vehicle Loan","Personal Loan","Credit Card","Overdraft","Other Liability"];

  const totalAssets = assets.reduce((s,a)=>s+(parseFloat(a.value)||0),0);
  const totalLiabs  = liabs.reduce((s,l)=>s+(parseFloat(l.value)||0),0);
  const netWorth    = totalAssets - totalLiabs;

  const addItem = (isAsset) => {
    if(!form.name || !form.value) return;
    const item = {id:uid(), name:form.name, type:form.type||form.name, value:parseFloat(form.value)||0};
    if(isAsset) update({netWorthAssets:[...assets, item]});
    else        update({netWorthLiabilities:[...liabs, item]});
    setForm({name:"",type:"",value:""});
    setShowAdd(null);
  };
  const delAsset = id => update({netWorthAssets:assets.filter(a=>a.id!==id)});
  const delLiab  = id => update({netWorthLiabilities:liabs.filter(l=>l.id!==id)});

  const NWBar = () => {
    const pct = totalAssets > 0 ? (totalLiabs/totalAssets)*100 : 0;
    return (
      <div style={{background:"#1e293b",borderRadius:8,height:14,marginTop:8,overflow:"hidden",display:"flex"}}>
        <div style={{width:`${100-Math.min(100,pct)}%`,background:"#10b981",transition:"width 0.5s"}}/>
        <div style={{width:`${Math.min(100,pct)}%`,background:"#ef4444",transition:"width 0.5s"}}/>
      </div>
    );
  };

  return(
    <FinPage icon="💎" title="Net Worth Dashboard" subtitle="Assets minus liabilities — your true financial position">

      {/* Summary */}
      <div style={{background:"linear-gradient(135deg,#0a1228,#0d1f3a)",borderRadius:14,border:`1px solid ${F.border}`,padding:14,marginBottom:12}}>
        <div style={{textAlign:"center",paddingBottom:10,borderBottom:`1px solid ${F.border}`}}>
          <div style={{fontSize:11,color:F.textMuted}}>NET WORTH</div>
          <div style={{fontSize:28,fontWeight:800,color:netWorth>=0?"#34d399":"#ef4444",marginTop:4}}>{fmtRs(netWorth)}</div>
        </div>
        <NWBar/>
        <div style={{display:"flex",justifyContent:"space-between",marginTop:10}}>
          <div style={{textAlign:"center"}}>
            <div style={{fontSize:10,color:"#6ee7b7"}}>Total Assets</div>
            <div style={{fontSize:14,fontWeight:700,color:"#34d399"}}>{fmtRs(totalAssets)}</div>
          </div>
          <div style={{textAlign:"center"}}>
            <div style={{fontSize:10,color:"#fca5a5"}}>Total Liabilities</div>
            <div style={{fontSize:14,fontWeight:700,color:"#ef4444"}}>{fmtRs(totalLiabs)}</div>
          </div>
          <div style={{textAlign:"center"}}>
            <div style={{fontSize:10,color:F.textSecondary}}>Debt Ratio</div>
            <div style={{fontSize:14,fontWeight:700,color:totalAssets>0&&(totalLiabs/totalAssets)<0.4?"#34d399":"#f59e0b"}}>{totalAssets>0?Math.round((totalLiabs/totalAssets)*100):0}%</div>
          </div>
        </div>
      </div>

      {/* Assets */}
      <div style={{background:F.card,borderRadius:14,border:`1px solid ${F.border}`,padding:14,marginBottom:12}}>
        <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10}}>
          <div style={{fontSize:11,fontWeight:700,color:"#34d399",textTransform:"uppercase",letterSpacing:"0.5px"}}>✅ Assets</div>
          <button onClick={()=>setShowAdd("asset")} style={{background:"#0a2a1a",border:"1px solid #10b981",color:"#34d399",padding:"4px 10px",borderRadius:8,fontSize:11,fontWeight:600,cursor:"pointer"}}>+ Add</button>
        </div>
        {assets.map(a=>(
          <div key={a.id} style={{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:`1px solid ${F.border}`}}>
            <div>
              <div style={{fontSize:12,color:F.textPrimary,fontWeight:600}}>{a.name}</div>
              <div style={{fontSize:10,color:"#475569"}}>{a.type}</div>
            </div>
            <div style={{display:"flex",alignItems:"center",gap:8}}>
              <div style={{fontSize:13,color:"#34d399",fontWeight:700}}>{fmtRs(a.value)}</div>
              <button onClick={()=>delAsset(a.id)} style={{background:"none",border:"none",cursor:"pointer",fontSize:12,color:"#475569"}}>✕</button>
            </div>
          </div>
        ))}
        {assets.length===0 && <div style={{fontSize:11,color:"#475569",textAlign:"center",padding:10}}>No assets added yet</div>}
      </div>

      {/* Liabilities */}
      <div style={{background:F.card,borderRadius:14,border:`1px solid ${F.border}`,padding:14,marginBottom:12}}>
        <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10}}>
          <div style={{fontSize:11,fontWeight:700,color:"#ef4444",textTransform:"uppercase",letterSpacing:"0.5px"}}>❌ Liabilities</div>
          <button onClick={()=>setShowAdd("liability")} style={{background:"#1a0000",border:"1px solid #ef4444",color:"#ef4444",padding:"4px 10px",borderRadius:8,fontSize:11,fontWeight:600,cursor:"pointer"}}>+ Add</button>
        </div>
        {liabs.map(l=>(
          <div key={l.id} style={{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:`1px solid ${F.border}`}}>
            <div>
              <div style={{fontSize:12,color:F.textPrimary,fontWeight:600}}>{l.name}</div>
              <div style={{fontSize:10,color:"#475569"}}>{l.type}</div>
            </div>
            <div style={{display:"flex",alignItems:"center",gap:8}}>
              <div style={{fontSize:13,color:"#ef4444",fontWeight:700}}>{fmtRs(l.value)}</div>
              <button onClick={()=>delLiab(l.id)} style={{background:"none",border:"none",cursor:"pointer",fontSize:12,color:"#475569"}}>✕</button>
            </div>
          </div>
        ))}
        {liabs.length===0 && <div style={{fontSize:11,color:"#475569",textAlign:"center",padding:10}}>No liabilities added yet</div>}
      </div>

      {/* Add Form Modal */}
      {showAdd && (
        <div style={{position:"fixed",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:430,height:"100vh",background:"rgba(0,0,0,0.8)",zIndex:200,display:"flex",alignItems:"flex-end"}}>
          <div style={{width:"100%",background:F.card,borderRadius:"20px 20px 0 0",padding:20}}>
            <div style={{fontSize:15,fontWeight:700,color:"#f1f5f9",marginBottom:14}}>Add {showAdd==="asset"?"Asset":"Liability"}</div>
            <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>Name</label>
            <input placeholder={showAdd==="asset"?"e.g. Colombo Apartment":"e.g. HNB Housing Loan"}
              value={form.name} onChange={e=>setForm({...form,name:e.target.value})}
              style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box",marginBottom:10}}/>
            <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>Type</label>
            <select value={form.type} onChange={e=>setForm({...form,type:e.target.value})}
              style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box",marginBottom:10}}>
              <option value="">Select type...</option>
              {(showAdd==="asset"?ASSET_TYPES:LIAB_TYPES).map(t=><option key={t} value={t}>{t}</option>)}
            </select>
            <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>Value (Rs.)</label>
            <input type="number" value={form.value} onChange={e=>setForm({...form,value:e.target.value})}
              style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box",marginBottom:14}}/>
            <div style={{display:"flex",gap:10}}>
              <button onClick={()=>setShowAdd(null)} style={{flex:1,padding:11,background:F.surface,border:`1px solid ${F.border}`,borderRadius:10,color:F.textSecondary,fontWeight:600,fontSize:13,cursor:"pointer"}}>Cancel</button>
              <button onClick={()=>addItem(showAdd==="asset")} style={{flex:2,padding:11,background:`linear-gradient(135deg,${showAdd==="asset"?"#059669,#10b981":"#dc2626,#ef4444"})`,border:"none",borderRadius:10,color:"#fff",fontWeight:700,fontSize:14,cursor:"pointer"}}>
                Add {showAdd==="asset"?"Asset":"Liability"}
              </button>
            </div>
          </div>
        </div>
      )}

      <a href="https://wa.me/94719204903?text=Hi+GDP+Consultants,+I'd+like+a+Wealth+Planning+Consultation."
        target="_blank" rel="noopener noreferrer"
        style={{display:"block",textDecoration:"none",background:"linear-gradient(135deg,#1a1200,#2a1c00)",borderRadius:14,border:"1px solid #b8960c",padding:14,textAlign:"center",marginTop:4}}>
        <div style={{fontSize:13,fontWeight:700,color:F.accentGold}}>📅 Book a Wealth Planning Consultation</div>
        <div style={{fontSize:10,color:"#92400e",marginTop:2}}>GDP Consultants — Chartered Accountants</div>
      </a>
    </div>
  );
}

// ──────────────────────────────────────────────────────────────────────────────
// 3. LOAN & MORTGAGE CALCULATOR
// ──────────────────────────────────────────────────────────────────────────────
function LoanCalcPage({data, update}) {
  const loans = data.loans || [];
  const [showAdd, setShowAdd] = useState(false);
  const [selected, setSelected] = useState(null);
  const [form, setForm] = useState({name:"", principal:"", rate:"", termMonths:""});

  const addLoan = () => {
    if(!form.principal || !form.rate || !form.termMonths) return;
    const l = {id:uid(), name:form.name||"Loan", principal:parseFloat(form.principal), rate:parseFloat(form.rate), termMonths:parseInt(form.termMonths)};
    update({loans:[...loans, l]});
    setForm({name:"",principal:"",rate:"",termMonths:""});
    setShowAdd(false);
    setSelected(l.id);
  };
  const delLoan = id => { update({loans:loans.filter(l=>l.id!==id)}); if(selected===id) setSelected(null); };

  const calcEMI = (p,rAnnual,n) => {
    const r = rAnnual/(12*100);
    if(r===0) return p/n;
    return p * r * Math.pow(1+r,n) / (Math.pow(1+r,n)-1);
  };

  const sel = loans.find(l=>l.id===selected);
  let amort = [];
  if(sel) {
    const emi = calcEMI(sel.principal, sel.rate, sel.termMonths);
    let bal = sel.principal;
    for(let m=1; m<=Math.min(sel.termMonths,12); m++) {
      const int = bal * (sel.rate/(12*100));
      const prin = emi - int;
      bal = Math.max(0, bal - prin);
      amort.push({m, emi, int, prin, bal});
    }
  }

  return(
    <FinPage icon="🏠" title="Loan & Mortgage Calculator" subtitle="EMI · Amortisation · IRD tax impact">

      {/* IRD Warning */}
      <div style={{background:"linear-gradient(135deg,#1a0500,#2a0a00)",borderRadius:12,border:"1px solid #92400e",padding:12,marginBottom:14}}>
        <div style={{fontSize:12,fontWeight:700,color:"#f97316",marginBottom:4}}>⚠️ IRD Clarification</div>
        <div style={{fontSize:11,color:"#fed7aa",lineHeight:1.6}}>Housing loan interest is <strong>NOT deductible</strong> under current Sri Lanka income tax law. Many taxpayers incorrectly claim this. Consult a CA before filing.</div>
      </div>

      {/* Loan List */}
      {loans.map(l => {
        const emi = calcEMI(l.principal, l.rate, l.termMonths);
        const totalPay = emi * l.termMonths;
        const totalInt = totalPay - l.principal;
        return(
          <div key={l.id} onClick={()=>setSelected(selected===l.id?null:l.id)}
            style={{background:selected===l.id?"linear-gradient(135deg,#0a1228,#0d1f3a)":"#0d1829",borderRadius:12,border:`1px solid ${selected===l.id?"#3b82f6":"#1e293b"}`,padding:12,marginBottom:10,cursor:"pointer"}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center"}}>
              <div>
                <div style={{fontSize:13,fontWeight:700,color:F.textPrimary}}>{l.name}</div>
                <div style={{fontSize:10,color:F.textMuted}}>{fmtRs(l.principal)} @ {l.rate}% · {l.termMonths}mo</div>
              </div>
              <div style={{textAlign:"right"}}>
                <div style={{fontSize:14,fontWeight:800,color:"#60a5fa"}}>{fmtRs(emi)}/mo</div>
                <button onClick={e=>{e.stopPropagation();delLoan(l.id)}} style={{background:"none",border:"none",cursor:"pointer",fontSize:10,color:"#475569",marginTop:2}}>🗑 Remove</button>
              </div>
            </div>
            {selected===l.id && (
              <div style={{marginTop:10,paddingTop:10,borderTop:`1px solid ${F.border}`}}>
                <div style={{display:"flex",gap:8,marginBottom:10}}>
                  {[["Total Payment",fmtRs(totalPay),"#94a3b8"],["Total Interest",fmtRs(totalInt),"#f87171"],["Int/Pay Ratio",`${Math.round((totalInt/totalPay)*100)}%`,"#f59e0b"]].map(([k,v,c])=>(
                    <div key={k} style={{flex:1,background:F.surface,borderRadius:8,padding:"8px 6px",textAlign:"center"}}>
                      <div style={{fontSize:9,color:F.textMuted}}>{k}</div>
                      <div style={{fontSize:12,fontWeight:700,color:c,marginTop:2}}>{v}</div>
                    </div>
                  ))}
                </div>
                <div style={{fontSize:10,fontWeight:700,color:F.textMuted,marginBottom:6,textTransform:"uppercase",letterSpacing:"0.5px"}}>First 12 Months Amortisation</div>
                <div style={{overflowX:"auto"}}>
                  <table style={{width:"100%",borderCollapse:"collapse",fontSize:10}}>
                    <thead><tr style={{color:"#475569"}}>
                      {["Mo","EMI","Interest","Principal","Balance"].map(h=><th key={h} style={{textAlign:"right",padding:"4px 4px",borderBottom:`1px solid ${F.border}`}}>{h}</th>)}
                    </tr></thead>
                    <tbody>
                      {amort.map(r=>(
                        <tr key={r.m} style={{color:F.textSecondary}}>
                          <td style={{textAlign:"right",padding:"3px 4px"}}>{r.m}</td>
                          <td style={{textAlign:"right",padding:"3px 4px"}}>{fmtRs(r.emi)}</td>
                          <td style={{textAlign:"right",padding:"3px 4px",color:"#f87171"}}>{fmtRs(r.int)}</td>
                          <td style={{textAlign:"right",padding:"3px 4px",color:"#34d399"}}>{fmtRs(r.prin)}</td>
                          <td style={{textAlign:"right",padding:"3px 4px"}}>{fmtRs(r.bal)}</td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>
            )}
          </div>
        );
      })}

      <button onClick={()=>setShowAdd(true)} style={{width:"100%",padding:11,background:F.surface,border:"1px solid #b8960c",borderRadius:10,color:F.accentGold,fontWeight:700,fontSize:13,cursor:"pointer",marginBottom:12}}>
        + Add Loan / Mortgage
      </button>

      {showAdd && (
        <div style={{position:"fixed",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:430,height:"100vh",background:"rgba(0,0,0,0.85)",zIndex:200,display:"flex",alignItems:"flex-end"}}>
          <div style={{width:"100%",background:F.card,borderRadius:"20px 20px 0 0",padding:20}}>
            <div style={{fontSize:15,fontWeight:700,color:"#f1f5f9",marginBottom:14}}>Add Loan Details</div>
            {[["Loan Name","name","e.g. HNB Housing Loan"],["Principal (Rs.)","principal","e.g. 10000000"],["Annual Interest Rate (%)","rate","e.g. 14.5"],["Term (Months)","termMonths","e.g. 240 for 20yrs"]].map(([lbl,key,ph])=>(
              <div key={key} style={{marginBottom:10}}>
                <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>{lbl}</label>
                <input type={key==="name"?"text":"number"} placeholder={ph} value={form[key]} onChange={e=>setForm({...form,[key]:e.target.value})}
                  style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box"}}/>
              </div>
            ))}
            <div style={{display:"flex",gap:10,marginTop:4}}>
              <button onClick={()=>setShowAdd(false)} style={{flex:1,padding:11,background:F.surface,border:`1px solid ${F.border}`,borderRadius:10,color:F.textSecondary,fontWeight:600,fontSize:13,cursor:"pointer"}}>Cancel</button>
              <button onClick={addLoan} style={{flex:2,padding:11,background:"linear-gradient(135deg,#1d4ed8,#3b82f6)",border:"none",borderRadius:10,color:"#fff",fontWeight:700,fontSize:14,cursor:"pointer"}}>Calculate</button>
            </div>
          </div>
        </div>
      )}

      <a href="https://wa.me/94719204903?text=Hi+GDP+Consultants,+I+need+a+mortgage+review+and+advice."
        target="_blank" rel="noopener noreferrer"
        style={{display:"block",textDecoration:"none",background:"linear-gradient(135deg,#1e1b4b,#2e1d4e)",borderRadius:14,border:"1px solid #6d28d9",padding:14,textAlign:"center"}}>
        <div style={{fontSize:13,fontWeight:700,color:"#c4b5fd"}}>📋 Need a Mortgage Review?</div>
        <div style={{fontSize:10,color:"#7c3aed",marginTop:2}}>GDP Consultants — Book via WhatsApp</div>
      </a>
    </FinPage>
  );
}

// ──────────────────────────────────────────────────────────────────────────────
// 4. VAT THRESHOLD MONITOR
// ──────────────────────────────────────────────────────────────────────────────
const VAT_THRESHOLD = 80000000; // Rs.80 million

function VATMonitorPage({data, update}) {
  const vat = data.vat || {};
  const incomeEntries = data.incomeEntries || [];
  const transactions = data.transactions || [];

  // Auto-calculate from income entries
  const autoTurnover = incomeEntries.reduce((s,e)=>s+(parseFloat(e.amount)||0),0);
  const txnTurnover  = transactions.filter(t=>t.type==="income").reduce((s,t)=>s+(parseFloat(t.amount)||0),0);
  const autoTotal    = Math.max(autoTurnover, txnTurnover);

  const [manual, setManual] = useState(vat.annualTurnover||0);
  const turnover = parseFloat(manual)||autoTotal;
  const pct = Math.min(100, (turnover/VAT_THRESHOLD)*100);
  const remaining = Math.max(0, VAT_THRESHOLD - turnover);

  let alertLevel = "green", alertMsg = "Well below VAT threshold";
  if(pct>=100) { alertLevel="red"; alertMsg="⚠️ VAT Registration REQUIRED NOW"; }
  else if(pct>=90) { alertLevel="red"; alertMsg="🚨 URGENT: 90% of VAT threshold reached"; }
  else if(pct>=70) { alertLevel="amber"; alertMsg="⚠️ Approaching VAT threshold — plan now"; }

  const barColor = alertLevel==="green"?"#10b981":alertLevel==="amber"?"#f59e0b":"#ef4444";

  return(
    <FinPage icon="📊" title="VAT Threshold Monitor" subtitle="Sri Lanka threshold: Rs.80M · Real-time tracking">

      {/* Alert Banner */}
      {pct>=70 && (
        <div style={{background:alertLevel==="red"?"linear-gradient(135deg,#1a0000,#2d0000)":"linear-gradient(135deg,#1a0e00,#2a1500)",borderRadius:14,border:`1px solid ${barColor}`,padding:14,marginBottom:12,textAlign:"center"}}>
          <div style={{fontSize:14,fontWeight:800,color:barColor}}>{alertMsg}</div>
          {pct>=90 && <div style={{fontSize:11,color:"#fca5a5",marginTop:6}}>Failing to register carries heavy IRD penalties. Act immediately.</div>}
        </div>
      )}

      {/* Gauge Card */}
      <div style={{background:F.card,borderRadius:14,border:`1px solid ${F.border}`,padding:16,marginBottom:12}}>
        <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8}}>
          <div style={{fontSize:11,fontWeight:700,color:F.textMuted,textTransform:"uppercase",letterSpacing:"0.5px"}}>Current Annual Turnover</div>
          <div style={{fontSize:12,fontWeight:700,color:barColor}}>{Math.round(pct)}%</div>
        </div>
        <div style={{fontSize:22,fontWeight:800,color:"#f1f5f9",marginBottom:10}}>{fmtRs(turnover)}</div>
        <div style={{background:"#1e293b",borderRadius:8,height:16,overflow:"hidden",position:"relative"}}>
          <div style={{width:`${pct}%`,height:"100%",background:`linear-gradient(90deg,#10b981,${barColor})`,borderRadius:8,transition:"width 0.5s"}}/>
          {[70,90].map(p=>(
            <div key={p} style={{position:"absolute",top:0,left:`${p}%`,height:"100%",width:1,background:"rgba(255,255,255,0.3)"}}/>
          ))}
        </div>
        <div style={{display:"flex",justifyContent:"space-between",marginTop:4}}>
          <span style={{fontSize:9,color:"#475569"}}>Rs.0</span>
          <span style={{fontSize:9,color:"#f59e0b"}}>70M</span>
          <span style={{fontSize:9,color:"#ef4444"}}>90M</span>
          <span style={{fontSize:9,color:F.textMuted}}>Rs.80M limit</span>
        </div>

        <div style={{display:"flex",gap:10,marginTop:12}}>
          <div style={{flex:1,background:F.surface,borderRadius:8,padding:"8px 10px"}}>
            <div style={{fontSize:9,color:F.textMuted}}>Remaining Room</div>
            <div style={{fontSize:13,fontWeight:700,color:"#34d399",marginTop:2}}>{fmtRs(remaining)}</div>
          </div>
          <div style={{flex:1,background:F.surface,borderRadius:8,padding:"8px 10px"}}>
            <div style={{fontSize:9,color:F.textMuted}}>Auto-detected</div>
            <div style={{fontSize:13,fontWeight:700,color:"#60a5fa",marginTop:2}}>{fmtRs(autoTotal)}</div>
          </div>
        </div>
      </div>

      {/* Manual Override */}
      <div style={{background:F.card,borderRadius:14,border:`1px solid ${F.border}`,padding:14,marginBottom:12}}>
        <div style={{fontSize:11,fontWeight:700,color:F.textMuted,marginBottom:8,textTransform:"uppercase",letterSpacing:"0.5px"}}>Manual Turnover Override</div>
        <div style={{fontSize:10,color:"#475569",marginBottom:8}}>Use this if your turnover includes amounts not yet entered in the ledger</div>
        <input type="number" value={manual} onChange={e=>{ setManual(e.target.value); update({vat:{annualTurnover:parseFloat(e.target.value)||0}}); }}
          placeholder="Enter total annual turnover (Rs.)"
          style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box"}}/>
      </div>

      {/* What happens after crossing */}
      <div style={{background:"#0a0f1a",borderRadius:12,border:`1px solid ${F.border}`,padding:12,marginBottom:14}}>
        <div style={{fontSize:11,fontWeight:700,color:F.textSecondary,marginBottom:8}}>What happens after crossing Rs.80M?</div>
        {["Must register for VAT within 30 days","Charge 18% VAT on all taxable supplies","File monthly VAT returns with IRD","Issue tax invoices to all customers","Heavy penalties for non-registration"].map((t,i)=>(
          <div key={i} style={{fontSize:11,color:F.textMuted,padding:"3px 0"}}>• {t}</div>
        ))}
      </div>

      {pct>=70 && (
        <a href="https://wa.me/94719204903?text=Hi+GDP+Consultants,+I+need+urgent+help+with+VAT+registration."
          target="_blank" rel="noopener noreferrer"
          style={{display:"block",textDecoration:"none",background:"linear-gradient(135deg,#1a0000,#2d0500)",borderRadius:14,border:"1px solid #ef4444",padding:16,textAlign:"center",animation:"pulse 2s infinite"}}>
          <div style={{fontSize:15,fontWeight:800,color:"#fca5a5"}}>🚨 Register for VAT — Rs.8,000</div>
          <div style={{fontSize:11,color:"#ef4444",marginTop:4}}>GDP Consultants handles everything end-to-end</div>
          <div style={{marginTop:8,background:"#ef4444",borderRadius:8,padding:"6px 0",color:"#fff",fontWeight:700,fontSize:12}}>📱 Book via WhatsApp Now</div>
        </a>
      )}
    </FinPage>
  );
}

// ──────────────────────────────────────────────────────────────────────────────
// 5. INVESTMENT & DIVIDEND WHT TRACKER
// ──────────────────────────────────────────────────────────────────────────────
function InvestmentWHTPage({data, update}) {
  const investments = data.investments || [];
  const [showAdd, setShowAdd] = useState(false);
  const [form, setForm] = useState({name:"", type:"Dividend", amount:"", rate:"", date:""});

  const INV_TYPES = [
    {label:"Dividend (CSE/Listed)", wht:15},
    {label:"FD Interest (Bank)", wht:5},
    {label:"Unit Trust Distribution", wht:10},
    {label:"Other Interest", wht:5},
  ];

  const addInv = () => {
    if(!form.amount) return;
    const typeObj = INV_TYPES.find(t=>t.label===form.type)||{wht:15};
    const item = {id:uid(), name:form.name||form.type, type:form.type, amount:parseFloat(form.amount)||0, whtRate:typeObj.wht, date:form.date||new Date().toISOString().slice(0,10)};
    update({investments:[...investments, item]});
    setForm({name:"", type:"Dividend (CSE/Listed)", amount:"", rate:"", date:""});
    setShowAdd(false);
  };
  const delInv = id => update({investments:investments.filter(i=>i.id!==id)});

  const totalGross = investments.reduce((s,i)=>s+(i.amount||0),0);
  const totalWHT   = investments.reduce((s,i)=>s+((i.amount||0)*(i.whtRate||0)/100),0);
  const totalNet   = totalGross - totalWHT;

  return(
    <FinPage icon="📈" title="Investment & WHT Tracker" subtitle="Dividends · FD interest · Unit trusts · WHT certificates">

      {/* Summary */}
      <div style={{display:"flex",gap:8,marginBottom:12}}>
        {[["Gross Income",fmtRs(totalGross),"#60a5fa"],["WHT Deducted",fmtRs(totalWHT),"#f87171"],["Net Income",fmtRs(totalNet),"#34d399"]].map(([k,v,c])=>(
          <div key={k} style={{flex:1,background:F.card,borderRadius:12,padding:"10px 8px",border:`1px solid ${F.border}`,textAlign:"center"}}>
            <div style={{fontSize:9,color:F.textMuted}}>{k}</div>
            <div style={{fontSize:12,fontWeight:700,color:c,marginTop:3}}>{v}</div>
          </div>
        ))}
      </div>

      {/* WHT Rates info */}
      <div style={{background:"#0a0f1a",borderRadius:10,border:`1px solid ${F.border}`,padding:10,marginBottom:12}}>
        <div style={{fontSize:10,fontWeight:700,color:F.textMuted,marginBottom:6,textTransform:"uppercase",letterSpacing:"0.5px"}}>WHT Rates (Sri Lanka)</div>
        {INV_TYPES.map(t=>(
          <div key={t.label} style={{display:"flex",justifyContent:"space-between",padding:"3px 0"}}>
            <span style={{fontSize:11,color:F.textSecondary}}>{t.label}</span>
            <span style={{fontSize:11,fontWeight:700,color:"#f59e0b"}}>{t.wht}%</span>
          </div>
        ))}
      </div>

      {/* Investment log */}
      {investments.map(inv => (
        <div key={inv.id} style={{background:F.card,borderRadius:10,padding:"10px 12px",marginBottom:8,border:`1px solid ${F.border}`}}>
          <div style={{display:"flex",justifyContent:"space-between",alignItems:"center"}}>
            <div>
              <div style={{fontSize:12,fontWeight:700,color:F.textPrimary}}>{inv.name}</div>
              <div style={{fontSize:10,color:"#475569"}}>{inv.type} · {inv.date} · WHT {inv.whtRate}%</div>
            </div>
            <div style={{textAlign:"right"}}>
              <div style={{fontSize:13,fontWeight:700,color:"#60a5fa"}}>{fmtRs(inv.amount)}</div>
              <div style={{fontSize:10,color:"#f87171"}}>WHT: {fmtRs(inv.amount*(inv.whtRate/100))}</div>
              <button onClick={()=>delInv(inv.id)} style={{background:"none",border:"none",cursor:"pointer",fontSize:10,color:"#475569",marginTop:2}}>✕ Remove</button>
            </div>
          </div>
        </div>
      ))}
      {investments.length===0 && (
        <div style={{textAlign:"center",padding:20,color:"#475569",fontSize:12}}>No investments logged yet</div>
      )}

      <button onClick={()=>setShowAdd(true)} style={{width:"100%",padding:11,background:F.surface,border:"1px solid #b8960c",borderRadius:10,color:F.accentGold,fontWeight:700,fontSize:13,cursor:"pointer",marginBottom:12}}>
        + Log Investment Income / WHT
      </button>

      {showAdd && (
        <div style={{position:"fixed",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:430,height:"100vh",background:"rgba(0,0,0,0.85)",zIndex:200,display:"flex",alignItems:"flex-end"}}>
          <div style={{width:"100%",background:F.card,borderRadius:"20px 20px 0 0",padding:20}}>
            <div style={{fontSize:15,fontWeight:700,color:"#f1f5f9",marginBottom:14}}>Log Investment Income</div>
            <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>Investment Type</label>
            <select value={form.type} onChange={e=>setForm({...form,type:e.target.value})}
              style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box",marginBottom:10}}>
              {INV_TYPES.map(t=><option key={t.label} value={t.label}>{t.label} ({t.wht}% WHT)</option>)}
            </select>
            <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>Description</label>
            <input placeholder="e.g. John Keells Holdings dividend" value={form.name} onChange={e=>setForm({...form,name:e.target.value})}
              style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box",marginBottom:10}}/>
            <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>Gross Amount (Rs.)</label>
            <input type="number" value={form.amount} onChange={e=>setForm({...form,amount:e.target.value})}
              style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box",marginBottom:10}}/>
            <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>Date</label>
            <input type="date" value={form.date} onChange={e=>setForm({...form,date:e.target.value})}
              style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box",marginBottom:14}}/>
            <div style={{display:"flex",gap:10}}>
              <button onClick={()=>setShowAdd(false)} style={{flex:1,padding:11,background:F.surface,border:`1px solid ${F.border}`,borderRadius:10,color:F.textSecondary,fontWeight:600,fontSize:13,cursor:"pointer"}}>Cancel</button>
              <button onClick={addInv} style={{flex:2,padding:11,background:"linear-gradient(135deg,#0f766e,#14b8a6)",border:"none",borderRadius:10,color:"#fff",fontWeight:700,fontSize:14,cursor:"pointer"}}>Add Investment</button>
            </div>
          </div>
        </div>
      )}
    </FinPage>
  );
}

// ──────────────────────────────────────────────────────────────────────────────
// 6. QUARTERLY ADVANCE TAX PLANNER (Freelancers)
// ──────────────────────────────────────────────────────────────────────────────
function AdvanceTaxPage({data, update, tax}) {
  const advTax = data.advanceTax || {};
  const [monthlyIncome, setMonthlyIncome] = useState(advTax.monthlyIncome||0);

  const save = () => update({advanceTax:{monthlyIncome:parseFloat(monthlyIncome)||0}});

  // Quarterly dates (Sri Lanka: Aug, Nov, Feb, May)
  const quarters = [
    {q:1, label:"Q1 — August 15", months:"Apr–Jun", due:"Aug 15", pct:25},
    {q:2, label:"Q2 — November 15", months:"Jul–Sep", due:"Nov 15", pct:25},
    {q:3, label:"Q3 — February 15", months:"Oct–Dec", due:"Feb 15", pct:25},
    {q:4, label:"Q4 — May 15", months:"Jan–Mar", due:"May 15", pct:25},
  ];

  const annualIncome = (parseFloat(monthlyIncome)||0) * 12;
  const annualTaxable = Math.max(0, annualIncome - 1800000);

  // Progressive tax computation
  const computeAnnualTax = (income) => {
    if(income<=0) return 0;
    const slabs = [[500000,0.06],[500000,0.12],[500000,0.18],[500000,0.24],[500000,0.30],[Infinity,0.36]];
    let tax=0, rem=income;
    for(const [band,rate] of slabs){ const t=Math.min(rem,band); tax+=t*rate; rem-=t; if(rem<=0)break; }
    return tax;
  };

  const annualTax = computeAnnualTax(annualTaxable);
  const quarterlyTax = annualTax / 4;
  const monthlySave = annualTax / 12;

  // Calculate days to next deadline
  const now = new Date();
  const deadlines = [
    new Date(now.getFullYear(), 7, 15),  // Aug 15
    new Date(now.getFullYear(), 10, 15), // Nov 15
    new Date(now.getFullYear()+1, 1, 15),// Feb 15 next year
    new Date(now.getFullYear()+1, 4, 15),// May 15 next year
  ];
  const nextDeadline = deadlines.find(d => d > now) || deadlines[0];
  const daysLeft = Math.ceil((nextDeadline - now) / (1000*60*60*24));

  return(
    <FinPage icon="⏰" title="Advance Tax Planner" subtitle="Monthly tax jar · Quarterly deadline countdown · Freelancers">

      {/* Countdown to next deadline */}
      <div style={{background:`linear-gradient(135deg,${daysLeft<=30?"#1a0000,#2d0000":"#0a1228,#0d1f3a"})`,borderRadius:14,border:`1px solid ${daysLeft<=30?"#ef4444":"#334155"}`,padding:14,marginBottom:12,textAlign:"center"}}>
        <div style={{fontSize:11,color:F.textMuted}}>NEXT ADVANCE TAX DEADLINE</div>
        <div style={{fontSize:20,fontWeight:800,color:daysLeft<=30?"#ef4444":"#f5d060",marginTop:4}}>
          {nextDeadline.toLocaleDateString("en-LK",{day:"numeric",month:"long",year:"numeric"})}
        </div>
        <div style={{fontSize:28,fontWeight:900,color:daysLeft<=30?"#ef4444":"#60a5fa",marginTop:4}}>{daysLeft} days</div>
      </div>

      {/* Income input */}
      <div style={{background:F.card,borderRadius:14,border:`1px solid ${F.border}`,padding:14,marginBottom:12}}>
        <div style={{fontSize:11,fontWeight:700,color:F.textMuted,marginBottom:8,textTransform:"uppercase",letterSpacing:"0.5px"}}>Your Monthly Income</div>
        <input type="number" value={monthlyIncome} onChange={e=>setMonthlyIncome(e.target.value)}
          placeholder="Enter average monthly income (Rs.)"
          style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box"}}/>
        <button onClick={save} style={{marginTop:10,width:"100%",padding:11,background:F.btnPrimary,border:"none",borderRadius:10,color:"#fff",fontWeight:700,fontSize:13,cursor:"pointer"}}>Update Plan</button>
      </div>

      {annualIncome > 1800000 && (
        <>
          {/* Tax Jar */}
          <div style={{background:"linear-gradient(135deg,#1a1200,#2a1c00)",borderRadius:14,border:"1px solid #b8960c",padding:14,marginBottom:12}}>
            <div style={{fontSize:12,fontWeight:700,color:F.accentGold,marginBottom:10}}>💰 Your Monthly Tax Jar</div>
            <div style={{textAlign:"center",padding:"10px 0"}}>
              <div style={{fontSize:11,color:"#92400e"}}>Set aside every month</div>
              <div style={{fontSize:32,fontWeight:900,color:F.accentGold}}>{fmtRs(monthlySave)}</div>
              <div style={{fontSize:10,color:F.textMuted,marginTop:4}}>= {fmtRs(annualTax)}/year ÷ 12 months</div>
            </div>
            <div style={{borderTop:"1px solid #334155",paddingTop:10,marginTop:4}}>
              <div style={{display:"flex",justifyContent:"space-between",padding:"2px 0"}}>
                <span style={{fontSize:11,color:F.textSecondary}}>Annual Taxable Income</span>
                <span style={{fontSize:11,fontWeight:600,color:F.textPrimary}}>{fmtRs(annualTaxable)}</span>
              </div>
              <div style={{display:"flex",justifyContent:"space-between",padding:"2px 0"}}>
                <span style={{fontSize:11,color:F.textSecondary}}>Annual Tax Liability</span>
                <span style={{fontSize:11,fontWeight:700,color:F.accentGold}}>{fmtRs(annualTax)}</span>
              </div>
              <div style={{display:"flex",justifyContent:"space-between",padding:"2px 0"}}>
                <span style={{fontSize:11,color:F.textSecondary}}>Per Quarter</span>
                <span style={{fontSize:11,fontWeight:700,color:"#60a5fa"}}>{fmtRs(quarterlyTax)}</span>
              </div>
            </div>
          </div>

          {/* Quarterly schedule */}
          <div style={{background:F.card,borderRadius:14,border:`1px solid ${F.border}`,padding:14,marginBottom:12}}>
            <div style={{fontSize:11,fontWeight:700,color:F.textMuted,marginBottom:10,textTransform:"uppercase",letterSpacing:"0.5px"}}>📅 Quarterly Payment Schedule</div>
            {quarters.map(q => {
              const qDeadline = deadlines[q.q-1];
              const isPast = qDeadline < now;
              const isNext = qDeadline === nextDeadline;
              return(
                <div key={q.q} style={{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:`1px solid ${F.border}`,opacity:isPast?0.5:1}}>
                  <div>
                    <div style={{fontSize:12,fontWeight:700,color:isNext?"#f5d060":"#e2e8f0"}}>{q.label}</div>
                    <div style={{fontSize:10,color:"#475569"}}>Income: {q.months}</div>
                  </div>
                  <div style={{textAlign:"right"}}>
                    <div style={{fontSize:13,fontWeight:700,color:isNext?"#f5d060":"#60a5fa"}}>{fmtRs(quarterlyTax)}</div>
                    <div style={{fontSize:9,color:isPast?"#ef4444":isNext?"#f59e0b":"#475569"}}>{isPast?"Past due":isNext?"⚡ NEXT":""}</div>
                  </div>
                </div>
              );
            })}
          </div>
        </>
      )}

      {annualIncome <= 1800000 && annualIncome > 0 && (
        <div style={{background:"#0a2a1a",borderRadius:12,border:"1px solid #065f46",padding:14,textAlign:"center",marginBottom:12}}>
          <div style={{fontSize:13,fontWeight:700,color:"#34d399"}}>✅ No Advance Tax Required</div>
          <div style={{fontSize:11,color:"#6ee7b7",marginTop:4}}>Your income is below the Rs.1,800,000 personal relief threshold</div>
        </div>
      )}

      <a href="https://wa.me/94719204903?text=Hi+GDP+Consultants,+I+need+help+filing+my+quarterly+advance+tax."
        target="_blank" rel="noopener noreferrer"
        style={{display:"block",textDecoration:"none",background:"linear-gradient(135deg,#0c1445,#1e2f6e)",borderRadius:14,border:"1px solid #3b82f6",padding:14,textAlign:"center"}}>
        <div style={{fontSize:13,fontWeight:700,color:"#93c5fd"}}>📋 GDP Consultants will file this for you</div>
        <div style={{fontSize:10,color:"#3b82f6",marginTop:2}}>Quarterly AITR filing — Book via WhatsApp</div>
      </a>
    </FinPage>
  );
}

// ──────────────────────────────────────────────────────────────────────────────
// 7. RENTAL PROPERTY MANAGER
// ──────────────────────────────────────────────────────────────────────────────
function RentalPropertyPage({data, update}) {
  const properties = data.rentalProperties || [];
  const [selected, setSelected] = useState(null);
  const [showAdd, setShowAdd] = useState(false);
  const [showAddExp, setShowAddExp] = useState(false);
  const [form, setForm] = useState({name:"", monthlyRent:"", address:""});
  const [expForm, setExpForm] = useState({desc:"", amount:"", type:"Maintenance"});

  const EXPENSE_TYPES = ["Maintenance","Insurance","Property Rates","Repairs","Security","Management Fee","Other"];

  const addProp = () => {
    if(!form.monthlyRent) return;
    const p = {id:uid(), name:form.name||"Property", address:form.address, monthlyRent:parseFloat(form.monthlyRent)||0, expenses:[]};
    update({rentalProperties:[...properties, p]});
    setForm({name:"",monthlyRent:"",address:""});
    setShowAdd(false);
  };

  const addExp = (propId) => {
    if(!expForm.amount) return;
    const e = {id:uid(), desc:expForm.desc||expForm.type, type:expForm.type, amount:parseFloat(expForm.amount)||0};
    const updated = properties.map(p => p.id===propId ? {...p, expenses:[...(p.expenses||[]),e]} : p);
    update({rentalProperties:updated});
    setExpForm({desc:"",amount:"",type:"Maintenance"});
    setShowAddExp(false);
  };

  const delProp = id => { update({rentalProperties:properties.filter(p=>p.id!==id)}); if(selected===id) setSelected(null); };
  const delExp  = (propId, expId) => {
    const updated = properties.map(p => p.id===propId ? {...p, expenses:(p.expenses||[]).filter(e=>e.id!==expId)} : p);
    update({rentalProperties:updated});
  };

  const totalAnnualRent = properties.reduce((s,p)=>(s+(p.monthlyRent||0)*12),0);
  const totalAnnualExp  = properties.reduce((s,p)=>s+((p.expenses||[]).reduce((ss,e)=>ss+(e.amount||0),0)*12),0);
  const netRentalIncome = totalAnnualRent - totalAnnualExp;

  const sel = properties.find(p=>p.id===selected);
  const selAnnualRent = sel ? (sel.monthlyRent||0)*12 : 0;
  const selAnnualExp  = sel ? ((sel.expenses||[]).reduce((s,e)=>s+(e.amount||0),0)*12) : 0;
  const selNet        = selAnnualRent - selAnnualExp;
  const selYield      = sel && sel.netWorthValue > 0 ? (selNet/sel.netWorthValue)*100 : 0;

  return(
    <FinPage icon="🏘️" title="Rental Property Manager" subtitle="Per-property income · Expenses · Yield calculation">

      {/* Portfolio Summary */}
      {properties.length>0 && (
        <div style={{display:"flex",gap:8,marginBottom:12}}>
          {[["Annual Rent",fmtRs(totalAnnualRent),"#34d399"],["Annual Expenses",fmtRs(totalAnnualExp),"#f87171"],["Net Rental Income",fmtRs(netRentalIncome),"#f5d060"]].map(([k,v,c])=>(
            <div key={k} style={{flex:1,background:F.card,borderRadius:10,padding:"8px 6px",border:`1px solid ${F.border}`,textAlign:"center"}}>
              <div style={{fontSize:9,color:F.textMuted,lineHeight:1.3}}>{k}</div>
              <div style={{fontSize:11,fontWeight:700,color:c,marginTop:3}}>{v}</div>
            </div>
          ))}
        </div>
      )}

      {/* Property cards */}
      {properties.map(p => {
        const annualRent = (p.monthlyRent||0)*12;
        const annualExp  = ((p.expenses||[]).reduce((s,e)=>s+(e.amount||0),0))*12;
        const netInc     = annualRent - annualExp;
        const isOpen     = selected===p.id;
        return(
          <div key={p.id} style={{background:F.card,borderRadius:14,border:`1px solid ${isOpen?"#b8960c":"#1e293b"}`,padding:14,marginBottom:10}}>
            <div onClick={()=>setSelected(isOpen?null:p.id)} style={{cursor:"pointer"}}>
              <div style={{display:"flex",justifyContent:"space-between",alignItems:"center"}}>
                <div>
                  <div style={{fontSize:13,fontWeight:700,color:F.textPrimary}}>{p.name}</div>
                  {p.address && <div style={{fontSize:10,color:"#475569"}}>{p.address}</div>}
                </div>
                <div style={{textAlign:"right"}}>
                  <div style={{fontSize:14,fontWeight:800,color:"#34d399"}}>{fmtRs(p.monthlyRent)}/mo</div>
                  <button onClick={e=>{e.stopPropagation();delProp(p.id)}} style={{background:"none",border:"none",cursor:"pointer",fontSize:10,color:"#475569",marginTop:2}}>🗑 Remove</button>
                </div>
              </div>
              <div style={{display:"flex",gap:8,marginTop:10}}>
                {[["Annual Rent",fmtRs(annualRent),"#34d399"],["Annual Exp",fmtRs(annualExp),"#f87171"],["Net Income",fmtRs(netInc),netInc>=0?"#60a5fa":"#ef4444"]].map(([k,v,c])=>(
                  <div key={k} style={{flex:1,background:F.surface,borderRadius:8,padding:"6px 4px",textAlign:"center"}}>
                    <div style={{fontSize:9,color:F.textMuted}}>{k}</div>
                    <div style={{fontSize:11,fontWeight:700,color:c,marginTop:2}}>{v}</div>
                  </div>
                ))}
              </div>
            </div>

            {isOpen && (
              <div style={{marginTop:12,paddingTop:12,borderTop:`1px solid ${F.border}`}}>
                <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8}}>
                  <div style={{fontSize:11,fontWeight:700,color:F.textMuted,textTransform:"uppercase",letterSpacing:"0.5px"}}>Monthly Expenses</div>
                  <button onClick={()=>setShowAddExp(true)} style={{background:F.surface,border:"1px solid #b8960c",color:F.accentGold,padding:"4px 8px",borderRadius:6,fontSize:10,fontWeight:600,cursor:"pointer"}}>+ Add</button>
                </div>
                {(p.expenses||[]).map(e=>(
                  <div key={e.id} style={{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",borderBottom:`1px solid ${F.border}`}}>
                    <div>
                      <div style={{fontSize:11,color:F.textPrimary}}>{e.desc}</div>
                      <div style={{fontSize:9,color:"#475569"}}>{e.type} · monthly</div>
                    </div>
                    <div style={{display:"flex",alignItems:"center",gap:6}}>
                      <div style={{fontSize:12,fontWeight:700,color:"#f87171"}}>{fmtRs(e.amount)}</div>
                      <button onClick={()=>delExp(p.id,e.id)} style={{background:"none",border:"none",cursor:"pointer",fontSize:10,color:"#475569"}}>✕</button>
                    </div>
                  </div>
                ))}
                {(p.expenses||[]).length===0 && <div style={{fontSize:10,color:"#475569",textAlign:"center",padding:8}}>No expenses — add maintenance, insurance etc.</div>}

                {showAddExp && (
                  <div style={{background:F.surface,borderRadius:10,padding:12,marginTop:10}}>
                    <select value={expForm.type} onChange={e=>setExpForm({...expForm,type:e.target.value})}
                      style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"8px 10px",color:F.textPrimary,fontSize:12,outline:"none",boxSizing:"border-box",marginBottom:8}}>
                      {EXPENSE_TYPES.map(t=><option key={t} value={t}>{t}</option>)}
                    </select>
                    <input placeholder="Description" value={expForm.desc} onChange={e=>setExpForm({...expForm,desc:e.target.value})}
                      style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"8px 10px",color:F.textPrimary,fontSize:12,outline:"none",boxSizing:"border-box",marginBottom:8}}/>
                    <input type="number" placeholder="Monthly amount (Rs.)" value={expForm.amount} onChange={e=>setExpForm({...expForm,amount:e.target.value})}
                      style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"8px 10px",color:F.textPrimary,fontSize:12,outline:"none",boxSizing:"border-box",marginBottom:10}}/>
                    <div style={{display:"flex",gap:8}}>
                      <button onClick={()=>setShowAddExp(false)} style={{flex:1,padding:9,background:F.surface,border:`1px solid ${F.border}`,borderRadius:8,color:F.textSecondary,fontWeight:600,fontSize:12,cursor:"pointer"}}>Cancel</button>
                      <button onClick={()=>addExp(p.id)} style={{flex:2,padding:9,background:F.btnPrimary,border:"none",borderRadius:8,color:"#fff",fontWeight:700,fontSize:13,cursor:"pointer"}}>Add Expense</button>
                    </div>
                  </div>
                )}
              </div>
            )}
          </div>
        );
      })}

      <button onClick={()=>setShowAdd(true)} style={{width:"100%",padding:11,background:F.surface,border:"1px solid #b8960c",borderRadius:10,color:F.accentGold,fontWeight:700,fontSize:13,cursor:"pointer",marginBottom:12}}>
        + Add Rental Property
      </button>

      {showAdd && (
        <div style={{position:"fixed",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:430,height:"100vh",background:"rgba(0,0,0,0.85)",zIndex:200,display:"flex",alignItems:"flex-end"}}>
          <div style={{width:"100%",background:F.card,borderRadius:"20px 20px 0 0",padding:20}}>
            <div style={{fontSize:15,fontWeight:700,color:"#f1f5f9",marginBottom:14}}>Add Rental Property</div>
            {[["Property Name","name","text","e.g. Colombo Apartment"],["Address","address","text","Optional"],["Monthly Rent (Rs.)","monthlyRent","number","e.g. 75000"]].map(([lbl,key,type,ph])=>(
              <div key={key} style={{marginBottom:10}}>
                <label style={{display:"block",fontSize:11,color:F.textMuted,marginBottom:4,fontWeight:600}}>{lbl}</label>
                <input type={type} placeholder={ph} value={form[key]} onChange={e=>setForm({...form,[key]:e.target.value})}
                  style={{width:"100%",background:F.surface,border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:F.textPrimary,fontSize:13,outline:"none",boxSizing:"border-box"}}/>
              </div>
            ))}
            <div style={{display:"flex",gap:10,marginTop:4}}>
              <button onClick={()=>setShowAdd(false)} style={{flex:1,padding:11,background:F.surface,border:`1px solid ${F.border}`,borderRadius:10,color:F.textSecondary,fontWeight:600,fontSize:13,cursor:"pointer"}}>Cancel</button>
              <button onClick={addProp} style={{flex:2,padding:11,background:F.btnPrimary,border:"none",borderRadius:10,color:"#fff",fontWeight:700,fontSize:14,cursor:"pointer"}}>Add Property</button>
            </div>
          </div>
        </div>
      )}

      <a href="https://wa.me/94719204903?text=Hi+GDP+Consultants,+I+need+rental+income+tax+advisory."
        target="_blank" rel="noopener noreferrer"
        style={{display:"block",textDecoration:"none",background:"linear-gradient(135deg,#064e3b,#065f46)",borderRadius:14,border:"1px solid #10b981",padding:14,textAlign:"center"}}>
        <div style={{fontSize:13,fontWeight:700,color:"#ecfdf5"}}>🏠 Rental Income Tax Advisory</div>
        <div style={{fontSize:10,color:"#6ee7b7",marginTop:2}}>GDP Consultants — Book via WhatsApp</div>
      </a>
    </FinPage>
  );
}


// ══════════════════════════════════════════════════════════════════════════════
// AI TAX ASSISTANT PAGE
// ══════════════════════════════════════════════════════════════════════════════
const AI_BOT_URL = "https://bots.easy-peasy.ai/bot/33992885-0ec9-4b98-992e-9aae8891550e";

function AITaxAssistantPage({profile, sub}) {
  const isPaid = sub?.plan === "paid";

  return(
    <FinPage icon="🤖" title="AI Tax Assistant" subtitle="Sri Lanka tax questions answered instantly · Powered by AI">
      {/* Hero card */}
      <div style={{background:"linear-gradient(135deg,#0f0020,#1e0050,#0a0030)",borderRadius:16,border:"2px solid #7c3aed",padding:18,marginBottom:14,position:"relative",overflow:"hidden"}}>
        {/* Shimmer bar */}
        <div style={{position:"absolute",top:0,left:0,right:0,height:3,background:"linear-gradient(90deg,transparent,#a78bfa,transparent)",backgroundSize:"200% 100%",animation:"shimmer 2.5s linear infinite"}}/>
        <div style={{display:"flex",gap:14,alignItems:"flex-start"}}>
          <div style={{fontSize:44}}>🤖</div>
          <div style={{flex:1}}>
            <div style={{fontSize:16,fontWeight:800,color:"#c4b5fd",marginBottom:4}}>AI Tax Assistant</div>
            <div style={{fontSize:11,color:"#7c3aed",marginBottom:10,lineHeight:1.6}}>
              Ask any Sri Lanka tax question in plain English or Sinhala. Get instant, accurate guidance on APIT, AITR filing, qualifying deductions, and more.
            </div>
            <div style={{display:"flex",flexWrap:"wrap",gap:6}}>
              {["APIT calculations","Qualifying payments","Advance tax deadlines","VAT registration","Capital gains","Rental income tax","Non-resident rules"].map(tag=>(
                <span key={tag} style={{background:"rgba(124,58,237,0.2)",border:"1px solid rgba(124,58,237,0.4)",borderRadius:20,padding:"2px 8px",fontSize:9,color:"#a78bfa",fontWeight:600}}>{tag}</span>
              ))}
            </div>
          </div>
        </div>
      </div>

      {/* Subscriber exclusive badge */}
      {isPaid ? (
        <div style={{background:"linear-gradient(135deg,#052a22,#063a30)",border:"1px solid #10b981",borderRadius:12,padding:"12px 14px",marginBottom:14,display:"flex",alignItems:"center",gap:10}}>
          <span style={{fontSize:20}}>✅</span>
          <div>
            <div style={{fontSize:12,fontWeight:700,color:"#6ee7b7"}}>Premium Access — AI Assistant Included</div>
            <div style={{fontSize:11,color:"#4ade80",marginTop:2}}>Your subscription includes unlimited AI tax queries.</div>
          </div>
        </div>
      ) : (
        <div style={{background:"linear-gradient(135deg,#1a1000,#2d1800)",border:"1px solid #f59e0b",borderRadius:12,padding:"12px 14px",marginBottom:14}}>
          <div style={{fontSize:12,fontWeight:700,color:"#fbbf24",marginBottom:4}}>🔒 Subscriber Exclusive Feature</div>
          <div style={{fontSize:11,color:"#92400e",lineHeight:1.6}}>The AI Tax Assistant is available to Pro & Business subscribers. Upgrade to unlock unlimited access.</div>
          <a href="https://wa.me/94719204903?text=Hi+GDP+Consultants,+I+would+like+to+upgrade+to+Pro+for+the+AI+Tax+Assistant."
            target="_blank" rel="noopener noreferrer"
            style={{display:"block",marginTop:10,padding:"10px",background:"linear-gradient(135deg,#b8960c,#f5d060)",borderRadius:10,textAlign:"center",color:"#111",fontWeight:800,fontSize:13,textDecoration:"none"}}>
            📱 Upgrade via WhatsApp — Rs.12,000/yr
          </a>
        </div>
      )}

      {/* Sample questions */}
      <div style={{background:F.gradCard,borderRadius:12,border:`1px solid ${F.border}`,padding:14,marginBottom:14}}>
        <div style={{fontSize:11,fontWeight:700,color:F.textSecondary,marginBottom:10,textTransform:"uppercase",letterSpacing:"0.5px"}}>Sample Questions</div>
        {[
          "How much APIT does my employer deduct if my salary is Rs.250,000/month?",
          "What qualifying payments can I claim to reduce my tax?",
          "I am a freelancer — do I need to pay advance tax every quarter?",
          "My business turnover is Rs.70 million. When do I need to register for VAT?",
          "How is rental income taxed in Sri Lanka?",
          "I received a dividend from CSE — is WHT deducted automatically?",
        ].map((q,i)=>(
          <div key={i} style={{display:"flex",gap:8,padding:"7px 0",borderBottom:i<5?`1px solid ${F.border}`:"none",alignItems:"flex-start"}}>
            <span style={{fontSize:14,flexShrink:0,marginTop:1}}>💬</span>
            <div style={{fontSize:11,color:F.textPrimary,lineHeight:1.5}}>{q}</div>
          </div>
        ))}
      </div>

      {/* Launch button */}
      <a href={AI_BOT_URL} target="_blank" rel="noopener noreferrer"
        style={{
          display:"block",padding:"16px",
          background:isPaid?"linear-gradient(135deg,#7c3aed,#a78bfa)":"rgba(124,58,237,0.3)",
          borderRadius:14,border:`2px solid ${isPaid?"#7c3aed":"#4c1d95"}`,
          textAlign:"center",textDecoration:"none",
          opacity:isPaid?1:0.6,
          marginBottom:12,
          position:"relative",overflow:"hidden",
        }}>
        {isPaid&&<div style={{position:"absolute",top:0,left:0,right:0,height:2,background:"linear-gradient(90deg,transparent,#c4b5fd,transparent)",backgroundSize:"200% 100%",animation:"shimmer 2s linear infinite"}}/>}
        <div style={{fontSize:16,fontWeight:800,color:"#fff",marginBottom:2}}>🤖 Open AI Tax Assistant</div>
        <div style={{fontSize:11,color:isPaid?"#e9d5ff":"#6d28d9"}}>{isPaid?"Tap to launch — ask your tax question now":"Upgrade required to access"}</div>
      </a>

      {/* Marketing / about section */}
      <div style={{background:"linear-gradient(135deg,#0a0020,#150040)",borderRadius:12,border:"1px solid #4c1d95",padding:14}}>
        <div style={{fontSize:12,fontWeight:700,color:"#a78bfa",marginBottom:8}}>✦ Why use the AI Tax Assistant?</div>
        {[
          ["⚡","Instant answers 24/7 — no waiting for a consultant"],
          ["🇱🇰","Sri Lanka specific — trained on IRD rules, Acts & circulars"],
          ["🔒","Private — your questions aren't shared with IRD"],
          ["💬","Ask in plain language — no tax jargon needed"],
          ["📱","Mobile-friendly — use it anywhere, anytime"],
          ["🤝","Backed by GDP Consultants CAs for complex matters"],
        ].map(([icon,text])=>(
          <div key={text} style={{display:"flex",gap:8,padding:"4px 0",fontSize:11,color:"#94a3b8",lineHeight:1.5}}>
            <span style={{flexShrink:0}}>{icon}</span><span>{text}</span>
          </div>
        ))}
      </div>
    </FinPage>
  );
}

// ══════════════════════════════════════════════════════════════════════════════
// PERSONAL FINANCE REPORT PAGE + DOWNLOAD
// ══════════════════════════════════════════════════════════════════════════════
function FinanceReportPage({data, profile, tax}) {
  const [downloading, setDownloading] = useState(false);
  const [downloaded, setDownloaded] = useState(false);

  const netWorthAssets = data.netWorthAssets || [];
  const netWorthLiabilities = data.netWorthLiabilities || [];
  const loans = data.loans || [];
  const investments = data.investments || [];
  const rentalProperties = data.rentalProperties || [];

  const totalAssets = netWorthAssets.reduce((s,a)=>s+(parseFloat(a.value)||0),0);
  const totalLiabilities = netWorthLiabilities.reduce((s,a)=>s+(parseFloat(a.value)||0),0);
  const netWorth = totalAssets - totalLiabilities;
  const totalInvestGross = investments.reduce((s,i)=>s+(parseFloat(i.amount)||0),0);
  const totalInvestWHT = investments.reduce((s,i)=>s+(parseFloat(i.amount)||0)*(parseFloat(i.whtRate)||0)/100,0);
  const totalRentalNet = rentalProperties.reduce((s,p)=>{
    const rent=(parseFloat(p.monthlyRent)||0)*12;
    const exp=(p.expenses||[]).reduce((se,e)=>se+(parseFloat(e.amount)||0)*12,0);
    return s+rent-exp;
  },0);

  const months = {};
  (data.transactions||[]).forEach(t=>{
    const m=t.date.slice(0,7);
    if(!months[m]) months[m]={r:0,p:0};
    if(t.type==="income") months[m].r+=t.amount; else months[m].p+=t.amount;
  });
  const mList = Object.keys(months).sort().reverse().slice(0,12);

  const downloadFinReport = () => {
    setDownloading(true);
    const assetRows = netWorthAssets.map(a=>`<tr><td>${a.name}</td><td>${a.type}</td><td class="g">${fmt(a.value)}</td></tr>`).join("");
    const liabRows = netWorthLiabilities.map(l=>`<tr><td>${l.name}</td><td>${l.type}</td><td class="r">${fmt(l.value)}</td></tr>`).join("");
    const loanRows = loans.map(l=>{
      const r=parseFloat(l.rate)/(100*12), n=parseInt(l.termMonths)||0;
      const emi = n>0&&r>0 ? (parseFloat(l.principal)*r*Math.pow(1+r,n))/(Math.pow(1+r,n)-1) : 0;
      return `<tr><td>${l.name}</td><td>${fmt(l.principal)}</td><td>${parseFloat(l.rate).toFixed(2)}%</td><td>${n} mo</td><td class="r">${fmt(emi)}/mo</td></tr>`;
    }).join("");
    const investRows = investments.map(i=>{
      const wht=(parseFloat(i.amount)||0)*(parseFloat(i.whtRate)||0)/100;
      return `<tr><td>${i.name}</td><td>${i.type}</td><td class="g">${fmt(i.amount)}</td><td class="r">${fmt(wht)}</td><td class="g">${fmt(parseFloat(i.amount)-wht)}</td></tr>`;
    }).join("");
    const rentalRows = rentalProperties.map(p=>{
      const rent=(parseFloat(p.monthlyRent)||0)*12;
      const exp=(p.expenses||[]).reduce((s,e)=>s+(parseFloat(e.amount)||0)*12,0);
      return `<tr><td>${p.name}</td><td class="g">${fmt(rent)}</td><td class="r">${fmt(exp)}</td><td class="${rent-exp>=0?"g":"r"}">${fmt(rent-exp)}</td></tr>`;
    }).join("");
    const mRows = mList.map(m=>`<tr><td>${m}</td><td class="g">${fmt(months[m].r)}</td><td class="r">${fmt(months[m].p)}</td><td class="${months[m].r-months[m].p>=0?"g":"r"}">${fmt(months[m].r-months[m].p)}</td></tr>`).join("");

    const html = `<!DOCTYPE html><html><head><meta charset="UTF-8">
<title>${APP_NAME} — Personal Finance Report</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Georgia,serif;background:#fff;color:#1a1a2e;padding:24px;font-size:13px}
.header{display:flex;justify-content:space-between;align-items:flex-start;border-bottom:3px solid #06b6d4;padding-bottom:16px;margin-bottom:20px}
.logo-area{display:flex;gap:14px;align-items:center}
.logo-area img{width:60px;height:60px;border-radius:50%;border:2px solid #06b6d4}
.firm{font-size:16px;font-weight:800;color:#1a1a2e}
.sub{font-size:10px;color:#06b6d4;font-weight:700;letter-spacing:1px;margin-top:2px}
.app-brand{font-size:13px;color:#06b6d4;font-weight:700}
.section{font-size:14px;font-weight:800;color:#1a1a2e;margin:22px 0 10px;padding-left:8px;border-left:4px solid #06b6d4}
.kpi-row{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:20px}
.kpi{background:#f0fdff;border:1px solid #bae6fd;border-radius:10px;padding:12px;text-align:center}
.kpi-val{font-size:16px;font-weight:800;color:#0891b2}
.kpi-lbl{font-size:10px;color:#64748b;margin-top:2px}
.nw-box{background:linear-gradient(135deg,#0c2a3a,#0e3a52);color:#fff;border-radius:12px;padding:18px;margin-bottom:20px}
.nw-row{display:flex;justify-content:space-between;padding:5px 0;font-size:13px;border-bottom:1px solid rgba(255,255,255,0.1)}
.nw-total{font-size:17px;font-weight:800;border-top:2px solid #06b6d4;margin-top:8px;padding-top:12px}
.nl{color:#94a3b8}.nv{font-weight:700}.gval{color:#34d399}.rval{color:#f87171}.cyval{color:#22d3ee}
table{width:100%;border-collapse:collapse;margin-bottom:16px;font-size:12px}
th{background:#0c2a3a;color:#fff;padding:8px 12px;text-align:left;font-size:10px;letter-spacing:0.5px}
td{padding:7px 12px;border-bottom:1px solid #f1f5f9}tr:nth-child(even)td{background:#f8fafc}
.g{text-align:right;font-weight:600;color:#059669}.r{text-align:right;font-weight:600;color:#dc2626}
.no-data{text-align:center;color:#94a3b8;padding:14px}
.disclaimer{background:#eff6ff;border:1px solid #bfdbfe;border-radius:8px;padding:12px;font-size:11px;color:#1e40af;margin-bottom:20px}
.footer{margin-top:30px;border-top:2px solid #06b6d4;padding-top:14px;display:flex;justify-content:space-between;font-size:10px;color:#94a3b8}
@media print{body{padding:0}button{display:none}}
</style></head><body>

<div class="header">
  <div class="logo-area">
    <img src="${LOGO_B64}" alt="GDP Consultants"/>
    <div>
      <div class="app-brand">${APP_NAME}</div>
      <div style="font-size:10px;color:#555">${APP_BRAND_LINE}</div>
      <div class="firm" style="margin-top:4px">${FIRM_NAME}</div>
      <div style="font-size:10px;color:#555;margin-top:3px">✉ ${APP_EMAIL} · ${APP_WEB} · 💬 ${APP_WHATSAPP}</div>
    </div>
  </div>
  <div>
    <div style="font-size:20px;font-weight:800;color:#0891b2">Personal Finance Report</div>
    <div style="font-size:12px;color:#64748b">${profile?.name||"Subscriber"}</div>
    <div style="font-size:11px;color:#555;margin-top:4px">Generated: ${new Date().toLocaleDateString("en-LK")}</div>
  </div>
</div>

${profile?`<div style="background:#f0fdff;border:1px solid #bae6fd;border-radius:10px;padding:14px;margin-bottom:20px;display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:12px">
  <div>Name: <strong>${profile.name}</strong></div>
  <div>Mobile: <strong>${profile.mobile}</strong></div>
  <div>NIC: <strong>${profile.nic||"—"}</strong></div>
  <div>TIN: <strong>${profile.tin||"—"}</strong></div>
</div>`:""}

<div class="disclaimer">📌 This report is a personal financial summary generated from your data in ${APP_NAME}. Verify all figures with your GDP Consultants advisor before any legal or financial decisions.</div>

<!-- KPI SUMMARY -->
<div class="section">💎 Financial Snapshot</div>
<div class="kpi-row">
  <div class="kpi"><div class="kpi-val" style="color:${netWorth>=0?"#0891b2":"#dc2626"}">${fmtC(Math.abs(netWorth))}</div><div class="kpi-lbl">Net Worth</div></div>
  <div class="kpi"><div class="kpi-val" style="color:#059669">${fmtC(totalAssets)}</div><div class="kpi-lbl">Total Assets</div></div>
  <div class="kpi"><div class="kpi-val" style="color:#dc2626">${fmtC(totalLiabilities)}</div><div class="kpi-lbl">Total Liabilities</div></div>
</div>

<!-- NET WORTH -->
<div class="section">📊 Net Worth Breakdown</div>
<div class="nw-box">
  <div class="nw-row"><span class="nl">Total Assets</span><span class="nv gval">${fmt(totalAssets)}</span></div>
  <div class="nw-row"><span class="nl">Total Liabilities</span><span class="nv rval">(${fmt(totalLiabilities)})</span></div>
  <div class="nw-row nw-total"><span class="nl">NET WORTH</span><span class="nv ${netWorth>=0?"cyval":"rval"}">${fmt(netWorth)}</span></div>
</div>

${netWorthAssets.length>0?`
<div class="section">🏠 Assets</div>
<table><thead><tr><th>Asset</th><th>Type</th><th style="text-align:right">Value (Rs.)</th></tr></thead><tbody>
${assetRows}
<tr style="background:#0c2a3a;color:#fff"><td colspan="2"><strong>TOTAL ASSETS</strong></td><td class="g" style="color:#34d399"><strong>${fmt(totalAssets)}</strong></td></tr>
</tbody></table>`:""}

${netWorthLiabilities.length>0?`
<div class="section">💳 Liabilities</div>
<table><thead><tr><th>Liability</th><th>Type</th><th style="text-align:right">Value (Rs.)</th></tr></thead><tbody>
${liabRows}
<tr style="background:#1a0020;color:#fff"><td colspan="2"><strong>TOTAL LIABILITIES</strong></td><td class="r" style="color:#f87171"><strong>(${fmt(totalLiabilities)})</strong></td></tr>
</tbody></table>`:""}

${loans.length>0?`
<div class="section">🏦 Active Loans</div>
<table><thead><tr><th>Loan</th><th style="text-align:right">Principal</th><th>Rate</th><th>Term</th><th style="text-align:right">EMI</th></tr></thead><tbody>
${loanRows}
</tbody></table>`:""}

${investments.length>0?`
<div class="section">📈 Investments & WHT</div>
<table><thead><tr><th>Investment</th><th>Type</th><th style="text-align:right">Gross</th><th style="text-align:right">WHT</th><th style="text-align:right">Net</th></tr></thead><tbody>
${investRows}
<tr style="background:#0c2a3a;color:#fff"><td colspan="2"><strong>TOTALS</strong></td><td class="g" style="color:#34d399"><strong>${fmt(totalInvestGross)}</strong></td><td class="r" style="color:#f87171"><strong>(${fmt(totalInvestWHT)})</strong></td><td class="g" style="color:#34d399"><strong>${fmt(totalInvestGross-totalInvestWHT)}</strong></td></tr>
</tbody></table>`:""}

${rentalProperties.length>0?`
<div class="section">🏘️ Rental Properties</div>
<table><thead><tr><th>Property</th><th style="text-align:right">Annual Rent</th><th style="text-align:right">Annual Expenses</th><th style="text-align:right">Net Income</th></tr></thead><tbody>
${rentalRows}
<tr style="background:#0c2a3a;color:#fff"><td><strong>TOTAL</strong></td><td class="g" style="color:#34d399"><strong>${fmt(rentalProperties.reduce((s,p)=>(parseFloat(p.monthlyRent)||0)*12+s,0))}</strong></td><td class="r" style="color:#f87171"><strong>${fmt(rentalProperties.reduce((s,p)=>(p.expenses||[]).reduce((se,e)=>(parseFloat(e.amount)||0)*12+se,0)+s,0))}</strong></td><td class="${totalRentalNet>=0?"g":"r"}" style="color:${totalRentalNet>=0?"#34d399":"#f87171"}"><strong>${fmt(totalRentalNet)}</strong></td></tr>
</tbody></table>`:""}

${mList.length>0?`
<div class="section">📅 Monthly Cash Flow (Last 12 Months)</div>
<table><thead><tr><th>Month</th><th style="text-align:right">Inflows</th><th style="text-align:right">Outflows</th><th style="text-align:right">Net</th></tr></thead><tbody>
${mRows}
</tbody></table>`:""}

<div class="footer">
  <div>${APP_NAME} v10 · ${FIRM_NAME}<br>${APP_EMAIL} · ${APP_WEB}</div>
  <div style="text-align:right">WhatsApp: ${APP_WHATSAPP}<br>Personal Finance Report · ${new Date().toLocaleDateString("en-LK")}</div>
</div>
<div style="text-align:center;margin-top:16px">
  <button onclick="window.print()" style="background:#0c2a3a;color:#22d3ee;border:none;padding:10px 24px;border-radius:8px;font-size:14px;font-weight:700;cursor:pointer">🖨️ Print / Save as PDF</button>
</div>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('SW registered:', reg.scope))
          .catch(err => console.log('SW error:', err));
      });
    }
  </script>
</body></html>`;

    const blob = new Blob([html], {type:"text/html"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href=url;
    a.download=`${APP_NAME}_FinanceReport_${(profile?.name||"Subscriber").replace(/ /g,"_")}_${new Date().toISOString().slice(0,10)}.html`;
    document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url);
    setDownloading(false);
    setDownloaded(true);
    setTimeout(()=>setDownloaded(false), 4000);
  };

  return(
    <FinPage icon="📑" title="Personal Finance Report" subtitle="Download your complete financial picture as a PDF-ready report">

      {/* Download CTA */}
      <button onClick={downloadFinReport} disabled={downloading}
        className={!downloading ? "pulse-cyan" : ""}
        style={{
          width:"100%",padding:16,
          background:downloaded?"linear-gradient(135deg,#065f46,#059669)":downloading?"#0b1a28":"linear-gradient(135deg,#0891b2,#06b6d4)",
          border:`2px solid ${downloaded?"#10b981":F.borderAccent}`,
          borderRadius:14,color:"#fff",fontWeight:800,fontSize:15,cursor:"pointer",
          marginBottom:14,display:"flex",alignItems:"center",justifyContent:"center",gap:10,
          position:"relative",overflow:"hidden",
        }}>
        {!downloading&&!downloaded&&<div style={{position:"absolute",top:0,left:0,right:0,height:2,background:"linear-gradient(90deg,transparent,#fff,transparent)",backgroundSize:"200% 100%",animation:"shimmer 2s linear infinite",opacity:0.4}}/>}
        <span style={{fontSize:20}}>{downloaded?"✅":downloading?"⏳":"📑"}</span>
        <span>{downloaded?"Report Downloaded!":downloading?"Generating Report...":"Download Personal Finance Report"}</span>
      </button>

      {/* What's included */}
      <div style={{background:F.gradCard,borderRadius:12,border:`1px solid ${F.borderAccent}`,padding:14,marginBottom:14}}>
        <div style={{fontSize:11,fontWeight:700,color:F.accentPrimary,marginBottom:10,textTransform:"uppercase",letterSpacing:"0.5px"}}>What's included in your report</div>
        {[
          ["💎","Net Worth Summary","Total assets, liabilities and net worth calculation"],
          ["🏠","Asset Breakdown","Property, vehicles, gold, FDs, shares, savings"],
          ["💳","Liability Schedule","All loans, credit cards, outstanding balances"],
          ["🏦","Loan Analysis","EMI amounts, interest rates and repayment terms"],
          ["📈","Investment & WHT","Dividends, FD interest, WHT certificates"],
          ["🏘️","Rental Income","Per-property net income and yield"],
          ["📅","Cash Flow (12 months)","Monthly inflows vs outflows trend"],
        ].map(([icon,title,desc])=>(
          <div key={title} style={{display:"flex",gap:10,padding:"7px 0",borderBottom:`1px solid ${F.border}`,alignItems:"flex-start"}}>
            <span style={{fontSize:18,flexShrink:0}}>{icon}</span>
            <div>
              <div style={{fontSize:12,fontWeight:600,color:F.textPrimary}}>{title}</div>
              <div style={{fontSize:10,color:F.textMuted,marginTop:1}}>{desc}</div>
            </div>
            <span style={{marginLeft:"auto",color:F.accentGreen,fontSize:11}}>✓</span>
          </div>
        ))}
      </div>

      {/* How to use */}
      <div style={{background:"linear-gradient(135deg,#062030,#083050)",borderRadius:12,border:`1px solid ${F.border}`,padding:14,marginBottom:14}}>
        <div style={{fontSize:11,fontWeight:700,color:F.textSecondary,marginBottom:8}}>How to save as PDF</div>
        {["Tap Download above — an HTML file opens in your browser","Tap the 🖨️ Print button inside the report","Choose 'Save as PDF' from your print dialog","Share with your bank, advisor, or keep for records"].map((s,i)=>(
          <div key={i} style={{display:"flex",gap:8,padding:"3px 0",fontSize:11,color:F.textMuted}}>
            <span style={{color:F.accentPrimary,fontWeight:700,flexShrink:0}}>{i+1}.</span>{s}
          </div>
        ))}
      </div>

      {/* Share with GDP */}
      <a href={"https://wa.me/94719204903?text=Hi+GDP+Consultants,+I+would+like+to+share+my+personal+finance+report+for+wealth+planning+advice."}
        target="_blank" rel="noopener noreferrer"
        style={{display:"block",textDecoration:"none",background:"linear-gradient(135deg,#0c3050,#063d56)",borderRadius:14,border:`1px solid ${F.borderAccent}`,padding:14,textAlign:"center"}}>
        <div style={{fontSize:13,fontWeight:700,color:F.accentSecond}}>💬 Share Report with GDP Consultants</div>
        <div style={{fontSize:10,color:F.textMuted,marginTop:2}}>Get a personalised Wealth Planning review from our CAs</div>
      </a>
    </FinPage>
  );
}

// ──────────────────────────────────────────────────────────────────────────────
// TOOLS HUB — Main entry point for all 7 new features
// ──────────────────────────────────────────────────────────────────────────────
function ToolsPage({data, update, sub, lang, tax, profile}) {
  const [subTool, setSubTool] = useState(null);

  if(subTool==="epf")     return <><EPFPlannerPage    data={data} update={update} sub={sub} lang={lang}/><BackBtn onClick={()=>setSubTool(null)}/></>;
  if(subTool==="nw")      return <><NetWorthPage      data={data} update={update}/><BackBtn onClick={()=>setSubTool(null)}/></>;
  if(subTool==="loan")    return <><LoanCalcPage      data={data} update={update}/><BackBtn onClick={()=>setSubTool(null)}/></>;
  if(subTool==="vat")     return <><VATMonitorPage    data={data} update={update}/><BackBtn onClick={()=>setSubTool(null)}/></>;
  if(subTool==="invest")  return <><InvestmentWHTPage data={data} update={update}/><BackBtn onClick={()=>setSubTool(null)}/></>;
  if(subTool==="advtax")  return <><AdvanceTaxPage    data={data} update={update} tax={tax}/><BackBtn onClick={()=>setSubTool(null)}/></>;
  if(subTool==="rental")  return <><RentalPropertyPage data={data} update={update}/><BackBtn onClick={()=>setSubTool(null)}/></>;
  if(subTool==="ai")      return <><AITaxAssistantPage profile={profile} sub={sub}/><BackBtn onClick={()=>setSubTool(null)}/></>;
  if(subTool==="finreport") return <><FinanceReportPage data={data} profile={profile} tax={tax}/><BackBtn onClick={()=>setSubTool(null)}/></>;

  const vat = data.vat || {};
  const incomeEntries = data.incomeEntries || [];
  const txns = data.transactions || [];
  const autoTurnover = Math.max(
    incomeEntries.reduce((s,e)=>s+(parseFloat(e.amount)||0),0),
    txns.filter(t=>t.type==="income").reduce((s,t)=>s+(parseFloat(t.amount)||0),0)
  );
  const turnover = parseFloat(vat.annualTurnover)||autoTurnover;
  const vatPct = Math.min(100, (turnover/VAT_THRESHOLD)*100);

  const TOOLS = [
    {
      id:"epf", icon:"🏦", title:"EPF Retirement Planner",
      desc:"Project your corpus, find shortfall, get tax-smart top-up advice",
      badge:"PRO", badgeColor:F.accentPurple, tier:"Tier 1",
      accent:F.accentGreen, bg:F.gradCard,
    },
    {
      id:"nw", icon:"💎", title:"Net Worth Dashboard",
      desc:"Assets + liabilities → your true financial position",
      badge:"PRO", badgeColor:F.accentPurple, tier:"Tier 1",
      accent:F.accentSecond, bg:"linear-gradient(135deg,#071820,#0a2535)",
    },
    {
      id:"loan", icon:"🏠", title:"Loan & Mortgage Calculator",
      desc:"EMI, amortisation & IRD tax angle — avoid common mistakes",
      badge:"FREE", badgeColor:"#059669", tier:"Tier 1",
      accent:"#a78bfa", bg:"linear-gradient(135deg,#0b0f20,#12153a)",
    },
    {
      id:"vat", icon:"📊", title:"VAT Threshold Monitor",
      desc:`${Math.round(vatPct)}% of Rs.80M threshold reached — track & act`,
      badge:vatPct>=70?"🚨 ACTION":"FREE", badgeColor:vatPct>=70?F.accentRed:"#059669", tier:"Tier 1",
      accent:vatPct>=70?F.accentRed:F.accentGreen, bg:vatPct>=70?F.gradRed:F.gradGreen,
    },
    {
      id:"invest", icon:"📈", title:"Investment & WHT Tracker",
      desc:"Log dividends, FD interest, WHT certificates",
      badge:"BIZ", badgeColor:F.accentGold, tier:"Tier 2",
      accent:F.accentPrimary, bg:F.gradAccent,
    },
    {
      id:"advtax", icon:"⏰", title:"Advance Tax Planner",
      desc:"Monthly tax jar + quarterly deadline countdown for freelancers",
      badge:"PRO", badgeColor:F.accentPurple, tier:"Tier 2",
      accent:F.accentGold, bg:F.gradGold,
    },
    {
      id:"rental", icon:"🏘️", title:"Rental Property Manager",
      desc:"Per-property income, expenses, yield calculation",
      badge:"BIZ", badgeColor:F.accentGold, tier:"Tier 2",
      accent:F.accentGreen, bg:F.gradGreen,
    },
    {
      id:"finreport", icon:"📑", title:"Personal Finance Report",
      desc:"Download your net worth, cash flow & investment summary as a PDF-ready report",
      badge:"NEW", badgeColor:"#0891b2", tier:"Tier 1",
      accent:F.accentSecond, bg:"linear-gradient(135deg,#062030,#083050)",
    },
    {
      id:"ai", icon:"🤖", title:"AI Tax Assistant",
      desc:"Ask any Sri Lanka tax question — powered by AI · Subscriber exclusive",
      badge:"✨ AI", badgeColor:"#7c3aed", tier:"Exclusive",
      accent:"#c4b5fd", bg:"linear-gradient(135deg,#0f0020,#1a0040)",
      isAI: true,
    },
  ];

  return(
    <div style={{padding:"14px 14px 80px",background:F.base,minHeight:"100vh"}}>
      <div style={{fontSize:18,fontWeight:800,color:F.accentSecond,marginBottom:4}}>🔧 Financial Tools</div>
      <div style={{fontSize:11,color:F.textMuted,marginBottom:4}}>9 powerful tools to plan, track & optimise your finances</div>
      <div style={{display:"flex",gap:6,alignItems:"center",marginBottom:14,padding:"6px 10px",background:F.gradAccent,borderRadius:8,border:`1px solid ${F.borderAccent}`}}>
        <span style={{fontSize:10,color:F.accentPrimary}}>●</span>
        <span style={{fontSize:10,color:F.textSecondary,letterSpacing:"0.3px"}}>PERSONAL FINANCE TOOLS — Separate from Tax Calculation</span>
      </div>

      {TOOLS.map(t => (
        <div key={t.id} onClick={()=>setSubTool(t.id)}
          className={t.isAI ? "pulse-cyan" : ""}
          style={{
            background:t.bg,
            borderRadius:14,
            border:t.isAI?`2px solid ${F.borderAccent}`:`1px solid ${F.border}`,
            padding:14,marginBottom:10,cursor:"pointer",position:"relative",overflow:"hidden",
            boxShadow:t.isAI?`0 0 18px rgba(6,182,212,0.18)`:`0 0 0 1px rgba(6,182,212,0.04)`,
          }}>
          {t.isAI&&(
            <div style={{position:"absolute",top:0,left:0,right:0,height:2,background:"linear-gradient(90deg,transparent,#06b6d4,transparent)",backgroundSize:"200% 100%",animation:"shimmer 2s linear infinite"}}/>
          )}
          <div style={{position:"absolute",top:10,right:10,background:t.badgeColor,color:"#fff",fontSize:9,fontWeight:800,padding:"2px 7px",borderRadius:6,letterSpacing:"0.5px"}}>{t.badge}</div>
          <div style={{display:"flex",gap:12,alignItems:"center"}}>
            <div style={{fontSize:28}}>{t.icon}</div>
            <div style={{flex:1}}>
              <div style={{fontSize:14,fontWeight:700,color:t.accent}}>{t.title}</div>
              <div style={{fontSize:11,color:F.textMuted,marginTop:3,lineHeight:1.4}}>{t.desc}</div>
              {t.isAI&&<div style={{fontSize:10,color:"#7c3aed",marginTop:4,fontWeight:600}}>✦ Exclusive subscriber feature · Ask in English or Sinhala</div>}
            </div>
            <div style={{color:t.isAI?"#c4b5fd":F.accentPrimary,fontSize:18,opacity:0.6}}>›</div>
          </div>
        </div>
      ))}

      <div style={{background:F.gradCard,borderRadius:12,border:`1px solid ${F.borderAccent}`,padding:14,marginTop:4}}>
        <div style={{fontSize:11,color:F.textSecondary,textAlign:"center",marginBottom:8}}>Unlock all tools with a plan upgrade</div>
        <div style={{display:"flex",gap:8,marginBottom:12}}>
          {[["PRO",F.accentPurple,"Rs.12,000/yr","App + filing + 1hr consult"],["BIZ",F.accentGold,"Rs.24,000/yr","App + quarterly reviews + bookkeeping"]].map(([plan,col,price,desc])=>(
            <div key={plan} style={{flex:1,background:`${col}18`,border:`1px solid ${col}`,borderRadius:10,padding:"10px 8px",textAlign:"center"}}>
              <div style={{fontSize:11,fontWeight:800,color:col}}>{plan}</div>
              <div style={{fontSize:12,fontWeight:700,color:F.textPrimary,marginTop:2}}>{price}</div>
              <div style={{fontSize:9,color:F.textMuted,marginTop:2,lineHeight:1.4}}>{desc}</div>
            </div>
          ))}
        </div>
        <a href="https://wa.me/94719204903?text=Hi+GDP+Consultants,+I'd+like+to+upgrade+my+FinTax+LK+plan."
          target="_blank" rel="noopener noreferrer"
          style={{display:"block",textAlign:"center",padding:"10px",background:F.btnPrimary,borderRadius:10,color:"#fff",fontWeight:700,fontSize:13,textDecoration:"none"}}>
          📱 Upgrade via WhatsApp
        </a>
      </div>
    </FinPage>
  );
}

function BackBtn({onClick}) {
  return(
    <div style={{position:"fixed",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:430,zIndex:100,pointerEvents:"none"}}>
      <button onClick={onClick} style={{margin:"8px 14px",padding:"6px 14px",background:"rgba(5,15,20,0.97)",border:`1px solid ${F.borderAccent}`,borderRadius:20,color:F.accentPrimary,fontSize:12,fontWeight:600,cursor:"pointer",pointerEvents:"all",backdropFilter:"blur(10px)"}}>
        ← Back to Financial Tools
      </button>
    </FinPage>
  );
}

// ─── SERVICES PAGE ─────────────────────────────────────────────────────────────
function ServicesPage({profile,lang}){
  const services=[
    {key:"ird",  icon:"⚠️", urgentBadge:true,  priceKey:"svc_ird_price",  titleKey:"svc_ird",  descKey:"svc_ird_desc",  color:"#ef4444",border:"#7f1d1d",bg:"linear-gradient(135deg,#1a0000,#2d0000)",
      waMsg:"Hi GDP Consultants, I received an IRD notice and need urgent help responding."},
    {key:"vat",  icon:"📝", urgentBadge:false, priceKey:"svc_vat_price",  titleKey:"svc_vat",  descKey:"svc_vat_desc",  color:"#3b82f6",border:"#1e3a5f",bg:"linear-gradient(135deg,#050e1a,#0a1a30)",
      waMsg:"Hi GDP Consultants, I'd like to register my business for VAT."},
    {key:"co",   icon:"🏢", urgentBadge:false, priceKey:"svc_company_price",titleKey:"svc_company",descKey:"svc_company_desc",color:"#a78bfa",border:"#4c1d95",bg:"linear-gradient(135deg,#0a0520,#15073a)",
      waMsg:"Hi GDP Consultants, I'd like to register a private limited company."},
    {key:"audit",icon:"🔍", urgentBadge:false, priceKey:"svc_audit_price", titleKey:"svc_audit", descKey:"svc_audit_desc", color:"#f59e0b",border:"#92400e",bg:"linear-gradient(135deg,#1a0e00,#2a1500)",
      waMsg:"Hi GDP Consultants, I need a statutory audit certificate."},
    {key:"amend",icon:"✏️", urgentBadge:false, priceKey:"svc_amended_price",titleKey:"svc_amended",descKey:"svc_amended_desc",color:"#10b981",border:"#064e3b",bg:"linear-gradient(135deg,#010d08,#021a10)",
      waMsg:"Hi GDP Consultants, I need to file an amended tax return."},
    {key:"pay",  icon:"💰", urgentBadge:false, priceKey:"svc_payroll_price",titleKey:"svc_payroll",descKey:"svc_payroll_desc",color:"#06b6d4",border:"#0e7490",bg:"linear-gradient(135deg,#01101a,#011a28)",
      waMsg:"Hi GDP Consultants, I need help with APIT payroll management."},
  ];
  const referralMsg=encodeURIComponent(`Hi GDP Consultants, I referred a friend to FinTax LK. My name is ${profile?.name||""} (${profile?.mobile||""}). Please add 1 free month to my account.`);
  return(
    <div style={S.page}>
      <div style={S.pageTitle}>💼 CA Services</div>
      <div style={{fontSize:11,color:"#64748b",marginBottom:16}}>Professional services from GDP Consultants · Book instantly via WhatsApp</div>

      {/* IRD Notice Urgent Banner */}
      <div style={{background:"linear-gradient(135deg,#7f1d1d,#991b1b)",border:"2px solid #ef4444",borderRadius:12,padding:"12px 14px",marginBottom:14,display:"flex",gap:12,alignItems:"center"}}>
        <span style={{fontSize:28,flexShrink:0}}>⚠️</span>
        <div style={{flex:1}}>
          <div style={{fontSize:14,fontWeight:"800",color:"#fca5a5"}}>Received an IRD Notice?</div>
          <div style={{fontSize:11,color:"#fca5a5",opacity:0.8,marginBottom:8}}>Act quickly — delays increase penalties. We respond on your behalf within 24 hours.</div>
          <a href={`https://wa.me/94${APP_WHATSAPP.replace(/^0/,"")}?text=${encodeURIComponent("Hi GDP Consultants, I received an IRD notice and need URGENT help responding. Please call me.")}`}
            target="_blank"
            style={{display:"inline-block",background:"#ef4444",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",fontWeight:"800",fontSize:13,textDecoration:"none"}}>
            🚨 Get Urgent Help Now
          </a>
        </div>
      </div>

      {/* Service Cards */}
      {services.filter(s=>s.key!=="ird").map(svc=>(
        <div key={svc.key} style={{background:svc.bg,border:`1px solid ${svc.border}`,borderRadius:12,padding:"12px 14px",marginBottom:10}}>
          <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8}}>
            <div style={{display:"flex",gap:8,alignItems:"center"}}>
              <span style={{fontSize:22}}>{svc.icon}</span>
              <div>
                <div style={{fontSize:13,fontWeight:"800",color:svc.color}}>{T(lang,svc.titleKey)}</div>
                <div style={{fontSize:11,color:"#64748b",marginTop:2}}>{T(lang,svc.descKey)}</div>
              </div>
            </div>
            <div style={{fontSize:13,fontWeight:"800",color:"#f5d060",flexShrink:0,marginLeft:8}}>{T(lang,svc.priceKey)}</div>
          </div>
          <a href={`https://wa.me/94${APP_WHATSAPP.replace(/^0/,"")}?text=${encodeURIComponent(svc.waMsg+" My name is "+(profile?.name||"")+", mobile: "+(profile?.mobile||""))}`}
            target="_blank"
            style={{display:"block",background:"#064e3b",border:"1px solid #10b981",borderRadius:8,padding:"8px",color:"#6ee7b7",fontWeight:"700",fontSize:12,textDecoration:"none",textAlign:"center"}}>
            💬 {T(lang,"svc_book_btn")}
          </a>
        </div>
      ))}

      {/* Referral Programme */}
      <div style={{...S.card,border:"1px solid #b8960c",background:"linear-gradient(160deg,#0d0d00,#1a1500)",marginTop:6}}>
        <div style={{...S.cardTitle,color:"#f5d060"}}>🎁 Earn Free Months — Refer a Friend</div>
        <div style={{fontSize:12,color:"#94a3b8",lineHeight:1.7,marginBottom:10}}>
          For every friend who subscribes to FinTax LK, you get <span style={{color:"#34d399",fontWeight:"700"}}>1 month FREE</span> added to your account.
        </div>
        {["1. Share the app with a friend or colleague","2. Ask them to mention your name when they subscribe","3. WhatsApp us — we add your free month instantly"].map((s,i)=>(
          <div key={i} style={{fontSize:12,color:"#f5d060",padding:"3px 0"}}>{s}</div>
        ))}
        <a href={`https://wa.me/94${APP_WHATSAPP.replace(/^0/,"")}?text=${referralMsg}`}
          target="_blank"
          style={{display:"block",marginTop:12,background:"linear-gradient(135deg,#b8960c,#f5d060)",borderRadius:8,padding:"10px",color:"#111",fontWeight:"800",fontSize:13,textDecoration:"none",textAlign:"center"}}>
          🎁 Claim My Referral Reward
        </a>
      </div>

      {/* Payroll / Employer module teaser */}
      <div style={{...S.card,border:"1px solid #0e7490",background:"linear-gradient(135deg,#01101a,#011a28)",marginTop:6}}>
        <div style={{...S.cardTitle,color:"#06b6d4"}}>👥 Employer APIT Payroll Module</div>
        <div style={{fontSize:12,color:"#94a3b8",lineHeight:1.7,marginBottom:10}}>
          Do you pay salaries? Add our employer payroll module — we calculate each employee's monthly APIT deduction, generate APIT schedules, and manage your annual employer return.
        </div>
        <div style={{display:"flex",justifyContent:"space-between",fontSize:12,color:"#06b6d4",fontWeight:"700",marginBottom:10}}>
          <span>Per employee / month</span><span>Rs.2,000</span>
        </div>
        <a href={`https://wa.me/94${APP_WHATSAPP.replace(/^0/,"")}?text=${encodeURIComponent("Hi, I'd like to add the employer APIT payroll module for my business. My name is "+(profile?.name||""))}`}
          target="_blank"
          style={{display:"block",background:"#0e7490",borderRadius:8,padding:"10px",color:"#fff",fontWeight:"700",fontSize:12,textDecoration:"none",textAlign:"center"}}>
          💬 Enquire About Payroll Module
        </a>
      </div>

      <div style={S.footerCard}>
        <img src={LOGO_B64} alt="" style={{width:32,height:32,borderRadius:"50%",border:"1.5px solid #b8960c"}}/>
        <div style={{flex:1}}>
          <div style={{fontSize:10,color:"#b8960c",fontWeight:"700"}}>{FIRM_NAME}</div>
          <ContactLinks small/>
        </div>
      </div>
    </div>
  );
}

// ─── HELP PAGE ─────────────────────────────────────────────────────────────────
// ─── GOOGLE DRIVE BACKUP GUIDE MODAL ─────────────────────────────────────────
function DriveBackupGuide({onClose}){
  const steps=[
    {n:1,icon:"☁️",color:"#3b82f6",title:"Tap \"Backup to Google Drive\"",desc:"Find the button in Help → Backup tab. Your data will be packaged and sent to your Google Drive."},
    {n:2,icon:"🔑",color:"#f59e0b",title:"Sign in with Google",desc:"A Google sign-in popup will appear. Use your personal Gmail account — the one you want to store your backup in."},
    {n:3,icon:"✅",color:"#10b981",title:"Allow Permissions",desc:"Grant FinTax LK permission to save files to your Drive. We only save backup files — we cannot read your other Drive files."},
    {n:4,icon:"📁",color:"#8b5cf6",title:"Backup Saved",desc:"A file named \"FinTaxLK_Backup_YYYY-MM-DD.json\" appears in your Google Drive. Keep it safe — it has all your data."},
    {n:5,icon:"🔄",color:"#06b6d4",title:"To Restore",desc:"On a new phone or after reinstalling: go to Help → Backup → \"Restore from Drive\". Pick your backup file to recover everything instantly."},
  ];
  return(
    <div style={{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"flex-end",zIndex:9999}}>
      <div style={{width:"100%",maxWidth:430,margin:"0 auto",background:"#0a0f1a",borderRadius:"20px 20px 0 0",padding:"20px 16px",maxHeight:"85vh",overflowY:"auto"}}>
        <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}}>
          <div style={{fontSize:16,fontWeight:"800",color:"#93c5fd"}}>☁️ How to Backup Your Data</div>
          <button onClick={onClose} style={{background:"#1e293b",border:"none",color:"#94a3b8",borderRadius:8,width:32,height:32,cursor:"pointer",fontSize:18}}>×</button>
        </div>
        <div style={{background:"#0d1f3c",borderRadius:12,padding:"10px 12px",marginBottom:16,border:"1px solid #1d4ed8"}}>
          <div style={{fontSize:11,color:"#93c5fd",fontWeight:"700",marginBottom:4}}>🛡️ WHY THIS MATTERS</div>
          <div style={{fontSize:11,color:"#64748b",lineHeight:1.7}}>
            Your FinTax LK data is stored only on your phone. If you clear app data, uninstall, or switch phones — all your transactions, income records and tax data will be <strong style={{color:"#f87171"}}>permanently lost</strong>. Google Drive backup prevents this.
          </div>
        </div>
        {steps.map((s,i)=>(
          <div key={i} style={{display:"flex",gap:12,marginBottom:16,paddingBottom:16,borderBottom:"1px solid #1e293b"}}>
            <div style={{width:36,height:36,borderRadius:"50%",background:s.color+"22",border:`2px solid ${s.color}`,color:s.color,fontWeight:"800",fontSize:16,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}}>{s.icon}</div>
            <div>
              <div style={{fontSize:12,fontWeight:"700",color:"#f1f5f9",marginBottom:3}}>Step {s.n}: {s.title}</div>
              <div style={{fontSize:11,color:"#94a3b8",lineHeight:1.6}}>{s.desc}</div>
            </div>
          </div>
        ))}
        <div style={{background:"#1a1200",borderRadius:12,padding:"10px 12px",border:"1px solid #b8960c"}}>
          <div style={{fontSize:11,color:"#f5d060",fontWeight:"700",marginBottom:4}}>💡 PRO TIPS</div>
          <div style={{fontSize:11,color:"#94a3b8",lineHeight:1.8}}>
            • Backup before changing phones or clearing app storage<br/>
            • Do a backup at least once a month<br/>
            • Your backup is stored only in YOUR Google Drive — no one else can access it<br/>
            • Keep old backup files — they act as history snapshots
          </div>
        </div>
        <button onClick={onClose} style={{width:"100%",marginTop:16,padding:12,background:"linear-gradient(135deg,#1d4ed8,#3b82f6)",border:"none",borderRadius:10,color:"#fff",fontWeight:"700",fontSize:14,cursor:"pointer"}}>
          Got It — Let's Backup! ☁️
        </button>
      </div>
    </div>
  );
}

// ─── GOOGLE DRIVE BACKUP CARD ─────────────────────────────────────────────────
function DriveBackupCard({profile,sub}){
  const [showGuide,setShowGuide]=useState(false);
  const [accessToken,setAccessToken]=useState(null);
  const [status,setStatus]=useState("idle"); // idle|signing|backing|restoring|done|error|listing
  const [msg,setMsg]=useState("");
  const [backupFiles,setBackupFiles]=useState([]);
  const [showFileList,setShowFileList]=useState(false);
  const tokenClientRef=useRef(null);

  // Load Google Identity Services script
  useEffect(()=>{
    if(document.getElementById("gsi-script")) return;
    const s=document.createElement("script");
    s.id="gsi-script";
    s.src="https://accounts.google.com/gsi/client";
    s.async=true;
    s.onload=()=>initTokenClient();
    document.head.appendChild(s);
    return ()=>{};
  },[]);

  const initTokenClient=()=>{
    if(!window.google) return;
    tokenClientRef.current=window.google.accounts.oauth2.initTokenClient({
      client_id:GOOGLE_CLIENT_ID,
      scope:DRIVE_SCOPE,
      callback:(resp)=>{
        if(resp.error){ setStatus("error"); setMsg("❌ Google sign-in failed: "+resp.error); return; }
        setAccessToken(resp.access_token);
      }
    });
  };

  const signIn=()=>{
    setStatus("signing"); setMsg("");
    if(!tokenClientRef.current){
      // Try to init again
      if(window.google?.accounts?.oauth2){
        tokenClientRef.current=window.google.accounts.oauth2.initTokenClient({
          client_id:GOOGLE_CLIENT_ID,
          scope:DRIVE_SCOPE,
          callback:(resp)=>{
            if(resp.error){ setStatus("error"); setMsg("❌ Sign-in failed. Check Google Client ID setup."); return; }
            setAccessToken(resp.access_token);
          }
        });
        tokenClientRef.current.requestAccessToken({prompt:"consent"});
      } else {
        setStatus("error");
        setMsg("❌ Google Sign-In not loaded. Check internet connection and try again.");
      }
      return;
    }
    tokenClientRef.current.requestAccessToken({prompt:""});
  };

  const gatherAllData=async()=>{
    const backup={version:12,createdAt:new Date().toISOString(),device:"FinTaxLK App",profile:profile||null,data:{}};
    for(const key of ALL_STORAGE_KEYS){
      try{
        const val=localStorage.getItem(key);
        if(val) backup.data[key]=JSON.parse(val);
      }catch(e){ backup.data[key]=null; }
    }
    return backup;
  };

  const backupToDrive=async()=>{
    if(!accessToken){ signIn(); return; }
    setStatus("backing"); setMsg("📦 Packaging your data...");
    try{
      const backup=await gatherAllData();
      const filename=BACKUP_FILENAME_PREFIX+new Date().toISOString().slice(0,10)+".json";
      const blob=new Blob([JSON.stringify(backup,null,2)],{type:"application/json"});
      const meta=JSON.stringify({name:filename,mimeType:"application/json",description:"FinTax LK backup — "+new Date().toLocaleString()});
      const form=new FormData();
      form.append("metadata",new Blob([meta],{type:"application/json"}));
      form.append("file",blob);
      setMsg("☁️ Uploading to Google Drive...");
      const res=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{
        method:"POST",
        headers:{Authorization:"Bearer "+accessToken},
        body:form
      });
      if(!res.ok) throw new Error("Upload failed: "+res.status);
      const file=await res.json();
      setStatus("done");
      setMsg("✅ Backup saved!
File: "+filename+"

Your data is safe in Google Drive.");
    }catch(e){
      setStatus("error");
      if(e.message.includes("401")) {
        setAccessToken(null);
        setMsg("❌ Session expired. Please sign in again.");
      } else {
        setMsg("❌ Backup failed: "+e.message);
      }
    }
  };

  const listBackupFiles=async()=>{
    if(!accessToken){ signIn(); return; }
    setStatus("listing"); setShowFileList(false);
    try{
      const res=await fetch(`https://www.googleapis.com/drive/v3/files?q=name+contains+'${BACKUP_FILENAME_PREFIX}'&orderBy=createdTime+desc&fields=files(id,name,createdTime,size)`,{
        headers:{Authorization:"Bearer "+accessToken}
      });
      const data=await res.json();
      setBackupFiles(data.files||[]);
      setShowFileList(true);
      setStatus("idle");
    }catch(e){
      setStatus("error");
      setMsg("❌ Could not list backup files: "+e.message);
    }
  };

  const restoreFromFile=async(fileId,fileName)=>{
    if(!window.confirm(`Restore from "${fileName}"?

⚠️ This will OVERWRITE all your current data. This cannot be undone.

Continue?`)) return;
    setStatus("restoring"); setShowFileList(false);
    setMsg("📥 Downloading backup from Drive...");
    try{
      const res=await fetch(`https://www.googleapis.com/drive/v3/files/${fileId}?alt=media`,{
        headers:{Authorization:"Bearer "+accessToken}
      });
      if(!res.ok) throw new Error("Download failed: "+res.status);
      const backup=await res.json();
      setMsg("💾 Restoring data to your device...");
      if(backup.data){
        for(const [key,val] of Object.entries(backup.data)){
          if(val!==null) localStorage.setItem(key,JSON.stringify(val));
        }
      }
      setStatus("done");
      setMsg("✅ Restore complete!
All your data has been recovered.

🔄 Please restart the app to see your restored data.");
    }catch(e){
      setStatus("error");
      setMsg("❌ Restore failed: "+e.message);
    }
  };

  const busy=status==="backing"||status==="restoring"||status==="signing"||status==="listing";
  const isConfigured=!GOOGLE_CLIENT_ID.startsWith("YOUR_GOOGLE");

  return(
    <>
      {showGuide&&<DriveBackupGuide onClose={()=>setShowGuide(false)}/>}
      <div style={{...S.card,border:"1px solid #1d4ed8",background:"linear-gradient(160deg,#050c1f,#0a1535)",marginBottom:12}}>
        <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8}}>
          <div style={{...S.cardTitle,color:"#93c5fd",marginBottom:0}}>☁️ Google Drive Backup</div>
          <button onClick={()=>setShowGuide(true)} style={{fontSize:10,color:"#3b82f6",background:"none",border:"1px solid #1d4ed8",borderRadius:6,padding:"3px 8px",cursor:"pointer"}}>📖 Guide</button>
        </div>

        {!isConfigured&&(
          <div style={{background:"#2d1a00",borderRadius:8,padding:"8px 10px",marginBottom:10,border:"1px solid #92400e"}}>
            <div style={{fontSize:11,color:"#f59e0b",fontWeight:"700",marginBottom:3}}>⚙️ Admin Setup Required</div>
            <div style={{fontSize:10,color:"#92400e",lineHeight:1.6}}>
              Google Cloud OAuth2 Client ID not configured.<br/>
              Go to console.cloud.google.com → Enable Drive API → Create OAuth2 Credentials → Replace GOOGLE_CLIENT_ID in code.
            </div>
          </div>
        )}

        <div style={{fontSize:11,color:"#64748b",lineHeight:1.7,marginBottom:12}}>
          Save a complete backup of all your transactions, income, tax data and settings to your personal Google Drive. Restore instantly if you change phones or reinstall.
        </div>

        {/* Sign-in status */}
        <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:10,padding:"6px 10px",background:"#0a0f1a",borderRadius:8,border:"1px solid #1e293b"}}>
          <span style={{fontSize:14}}>{accessToken?"🟢":"🔴"}</span>
          <span style={{fontSize:11,color:accessToken?"#34d399":"#f87171",fontWeight:"700"}}>
            {accessToken?"Connected to Google Drive":"Not connected"}
          </span>
          {accessToken&&<button onClick={()=>{setAccessToken(null);setMsg("");setStatus("idle");}} style={{marginLeft:"auto",fontSize:10,color:"#64748b",background:"none",border:"none",cursor:"pointer"}}>Sign out</button>}
        </div>

        {/* Backup button */}
        <button
          onClick={backupToDrive}
          disabled={busy||!isConfigured}
          style={{width:"100%",padding:"11px",background:busy?"#1e293b":"linear-gradient(135deg,#1d4ed8,#3b82f6)",border:"none",borderRadius:10,color:busy?"#94a3b8":"#fff",fontWeight:"700",fontSize:13,cursor:busy?"not-allowed":"pointer",marginBottom:8,display:"flex",alignItems:"center",justifyContent:"center",gap:8}}>
          {status==="signing"?"⏳ Connecting to Google...":
           status==="backing"?"⏳ Backing up...":
           accessToken?"☁️ Backup Now to Google Drive":"🔑 Sign in & Backup to Google Drive"}
        </button>

        {/* Restore button */}
        <button
          onClick={showFileList?()=>setShowFileList(false):listBackupFiles}
          disabled={busy||!isConfigured}
          style={{width:"100%",padding:"10px",background:"#0a1535",border:"1px solid #1d4ed8",borderRadius:10,color:busy?"#64748b":"#93c5fd",fontWeight:"600",fontSize:12,cursor:busy?"not-allowed":"pointer",marginBottom:8}}>
          {status==="listing"?"⏳ Loading backups...":showFileList?"▲ Hide Backup Files":"🔄 Restore from Google Drive"}
        </button>

        {/* Status message */}
        {msg&&(
          <div style={{fontSize:11,color:status==="done"?"#34d399":status==="error"?"#f87171":"#93c5fd",background:status==="done"?"#0a2a1a":status==="error"?"#1a0000":"#0a1535",borderRadius:8,padding:"8px 10px",border:"1px solid "+(status==="done"?"#064e3b":status==="error"?"#7f1d1d":"#1d4ed8"),whiteSpace:"pre-line",lineHeight:1.6,marginBottom:8}}>
            {msg}
          </div>
        )}

        {/* File list for restore */}
        {showFileList&&(
          <div style={{background:"#0a0f1a",borderRadius:10,border:"1px solid #1e293b",overflow:"hidden"}}>
            <div style={{padding:"8px 10px",borderBottom:"1px solid #1e293b",fontSize:11,color:"#64748b",fontWeight:"700"}}>YOUR BACKUP FILES</div>
            {backupFiles.length===0?(
              <div style={{padding:"16px",textAlign:"center",fontSize:12,color:"#475569"}}>No backup files found in Google Drive yet.<br/>Tap "Backup Now" to create your first backup.</div>
            ):backupFiles.map((f,i)=>(
              <div key={i} style={{padding:"10px",borderBottom:"1px solid #1e293b",display:"flex",justifyContent:"space-between",alignItems:"center"}}>
                <div>
                  <div style={{fontSize:11,fontWeight:"700",color:"#e2e8f0"}}>{f.name}</div>
                  <div style={{fontSize:10,color:"#475569"}}>{new Date(f.createdTime).toLocaleDateString("en-LK",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}</div>
                </div>
                <button onClick={()=>restoreFromFile(f.id,f.name)}
                  style={{background:"#1d4ed8",border:"none",borderRadius:8,color:"#fff",fontSize:11,fontWeight:"700",padding:"6px 10px",cursor:"pointer"}}>
                  Restore
                </button>
              </div>
            ))}
          </div>
        )}

        <div style={{fontSize:9,color:"#334155",marginTop:8,lineHeight:1.6,textAlign:"center"}}>
          🔒 Your data goes directly to YOUR Google Drive. FinTax LK never stores or sees your backup data.
        </div>
      </div>
    </>
  );
}

function HelpPage({tax,profile,onActivateCode,sub,lang,setLang}){
  const [section,setSection]=useState("guide");
  const isFreelancer=profile?.employmentType==="freelancer";
  return(
    <div style={S.page}>
      <div style={S.pageTitle}>🆘 Help & Tax Filing Guide</div>
      <div style={{display:"flex",gap:5,overflowX:"auto",paddingBottom:6,marginBottom:14}}>
        {[["guide","📋","Guide"],["ird","🏛️","IRD Portal"],["steps","🪜","Steps"],["faq","❓","FAQ"],["backup","☁️","Backup"],["contact","📞","Contact"]].map(([id,ico,lbl])=>(
          <button key={id} style={{...S.tBtn,...(section===id?S.tBtnA:{}),flexShrink:0}} onClick={()=>setSection(id)}>{ico} {lbl}</button>
        ))}
      </div>

      {section==="guide"&&(
        <>
          <div style={{...S.card,border:"1px solid #b8960c",background:"linear-gradient(160deg,#0d0d00,#1a1500)"}}>
            <div style={{...S.cardTitle,color:"#f5d060"}}>📋 Your Filing Status — {TAX_YEAR}</div>
            {[
              ["Employment Type", isFreelancer?"💻 Freelancer / Self-Employed":"🏢 Salaried Employee", isFreelancer?"#fbbf24":"#93c5fd"],
              ["Total Income", fmt(tax.totalGross), "#e2e8f0"],
              ["Must File?", tax.totalGross>=MANDATORY_THRESHOLD?"YES — File by "+FILING_DEADLINE:"Not mandatory (but file to claim refund)", tax.totalGross>=MANDATORY_THRESHOLD?"#f87171":"#34d399"],
              ["Tax Due", fmt(tax.netTax), tax.netTax>0?"#f87171":"#34d399"],
              ["Quarterly Tax", isFreelancer?fmt(tax.quarterlyTax)+"/quarter":"N/A (APIT by employer)", "#f59e0b"],
            ].map(([l,v,c])=>(
              <div key={l} style={{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid #1e293b"}}>
                <span style={{color:"#94a3b8",fontSize:12,flexShrink:0,paddingRight:8}}>{l}</span>
                <span style={{color:c,fontSize:12,fontWeight:"600",textAlign:"right"}}>{v}</span>
              </div>
            ))}
          </div>
          {isFreelancer&&(
            <div style={{...S.card,border:"1px solid #f59e0b"}}>
              <div style={{...S.cardTitle,color:"#fbbf24"}}>💻 Freelancer Compliance Checklist</div>
              {["Register with IRD and obtain TIN","Maintain books of accounts (mandatory for business income)","Record all income in TaxBook LK Income tab","Record all business expenses in Ledger (mark as Tax Deductible)","Pay quarterly advance tax to IRD (Q1: Aug 2025)","File Annual Income Tax Return (AITR) by "+FILING_DEADLINE,"Retain all invoices and receipts for 5 years"].map((item,i)=>(
                <div key={i} style={{display:"flex",gap:8,padding:"6px 0",borderBottom:"1px solid #1e293b",alignItems:"flex-start"}}>
                  <span style={{fontSize:14,flexShrink:0}}>⬜</span>
                  <span style={{fontSize:12,color:"#94a3b8"}}>{item}</span>
                </div>
              ))}
            </div>
          )}
          {!isFreelancer&&(
            <div style={{...S.card,border:"1px solid #1d4ed8"}}>
              <div style={{...S.cardTitle,color:"#93c5fd"}}>🏢 Salaried Employee Checklist</div>
              {["Confirm TIN with employer (used for APIT)","Collect all monthly salary slips","Verify total APIT deducted (Form I / EPF statement)","Add rental/investment income in TaxBook LK Income tab","File AITR if total income exceeds Rs.1,800,000","Claim refund if APIT exceeds actual tax (max Rs.180,000)","Retain salary slips and bank statements for 5 years"].map((item,i)=>(
                <div key={i} style={{display:"flex",gap:8,padding:"6px 0",borderBottom:"1px solid #1e293b",alignItems:"flex-start"}}>
                  <span style={{fontSize:14,flexShrink:0}}>⬜</span>
                  <span style={{fontSize:12,color:"#94a3b8"}}>{item}</span>
                </div>
              ))}
            </div>
          )}
        </>
      )}

      {section==="ird"&&(
        <div>
          <div style={{...S.card,border:"1px solid #3b82f6"}}>
            <div style={{...S.cardTitle,color:"#93c5fd"}}>🏛️ IRD Portal Quick Links</div>
            {[
              {title:"🌐 IRD e-Services (File Return)", url:"https://ird.gov.lk/en/pages_EN/Individual_Income_Tax.html", desc:"File Individual Annual Tax Return (AITR) online"},
              {title:"💳 Pay Tax Online (EZPay)",        url:"https://ezpay.ird.gov.lk",                               desc:"Pay balance tax, advance tax, penalties"},
              {title:"🔑 Register & Login",              url:"https://ird.gov.lk",                                     desc:"Register with NIC and TIN for e-Services access"},
              {title:"📞 IRD Contact Centre",             url:"tel:+94112137100",                                       desc:"011 213 7100 (Mon–Fri, 8:30am–4:15pm)"},
              {title:"📧 IRD Email",                     url:"mailto:cit@ird.gov.lk",                                  desc:"cit@ird.gov.lk (Colombo IR District)"},
            ].map((item,i)=>(
              <div key={i} style={{...S.card,marginBottom:8,background:"#0a0f1a"}}>
                <div style={{fontSize:13,fontWeight:"700",color:"#e2e8f0",marginBottom:3}}>{item.title}</div>
                <div style={{fontSize:11,color:"#64748b",marginBottom:6}}>{item.desc}</div>
                <a href={item.url} target="_blank" style={{fontSize:11,color:"#3b82f6"}}>{item.url}</a>
              </div>
            ))}
          </div>
        </div>
      )}

      {section==="steps"&&(
        <div style={S.card}>
          <div style={S.cardTitle}>🪜 {isFreelancer?"Freelancer":"Salaried"} — Step-by-Step Filing</div>
          {(isFreelancer?[
            {n:1,c:"#b8960c",t:"Get TIN",d:"Visit ird.gov.lk or nearest IRD office. Bring NIC, birth certificate, and a business registration (if any). Essential for filing."},
            {n:2,c:"#3b82f6",t:"Record All Income",d:"Enter every client payment in TaxBook LK Income tab under 'Freelance/Contract'. Include foreign currency receipts under 'Export/Foreign'."},
            {n:3,c:"#10b981",t:"Record Business Expenses",d:"Add ALL business expenses in the Ledger. Tick 'Business Expense (Tax Deductible)' for allowable costs: home office, equipment, software, travel, professional fees."},
            {n:4,c:"#f59e0b",t:"Pay Quarterly Advance Tax",d:"Log into ezpay.ird.gov.lk quarterly. Q1: Aug 2025, Q2: Nov 2025, Q3: Feb 2026, Q4: May 2026. Pay 25% of estimated annual tax each time."},
            {n:5,c:"#8b5cf6",t:"Compute Annual Tax",d:"Use TaxBook LK Tax tab. Gross income minus expenses minus relief = taxable income. Apply graduated rates 6%–36%."},
            {n:6,c:"#ec4899",t:"File AITR Online",d:"Login ird.gov.lk → e-Services → File Return. Complete AITR. Attach P&L statement, bank statements. Submit before "+FILING_DEADLINE+"."},
            {n:7,c:"#34d399",t:"Pay Balance Tax",d:"Any remaining tax after quarterly advance payments is due at filing. Pay via ezpay.ird.gov.lk. Retain receipt."},
          ]:[
            {n:1,c:"#b8960c",t:"Get/Confirm TIN",d:"Your employer needs your TIN for APIT deductions. Register at ird.gov.lk if you don't have one."},
            {n:2,c:"#3b82f6",t:"Collect Salary Slips",d:"Gather all 12 monthly salary slips. Note the APIT deducted each month — you'll need the annual total."},
            {n:3,c:"#10b981",t:"Record Other Income",d:"Enter rental income, interest, dividends in TaxBook LK Income tab. Also record any freelance income on the side."},
            {n:4,c:"#f59e0b",t:"Apply Deductions",d:"Enter qualifying payments (insurance, EPF, charity) in TaxBook LK Tax tab. Maximum deduction Rs.1,200,000."},
            {n:5,c:"#8b5cf6",t:"File AITR",d:"If total income exceeds Rs.1,800,000: Login ird.gov.lk → e-Services → File Annual Income Tax Return before "+FILING_DEADLINE+"."},
            {n:6,c:"#ec4899",t:"Pay / Claim Refund",d:"Pay any balance tax via ezpay.ird.gov.lk. If APIT > tax, claim refund (max Rs.180,000/year). Refunded within 3 months."},
          ]).map((s,i)=>(
            <div key={i} style={{display:"flex",gap:12,marginBottom:16,paddingBottom:16,borderBottom:"1px solid #1e293b"}}>
              <div style={{width:32,height:32,borderRadius:"50%",background:s.c,color:"#fff",fontWeight:"800",fontSize:14,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}}>{s.n}</div>
              <div><div style={{fontSize:13,fontWeight:"700",color:"#f1f5f9",marginBottom:4}}>{s.t}</div><div style={{fontSize:11,color:"#94a3b8",lineHeight:1.6}}>{s.d}</div></div>
            </div>
          ))}
        </div>
      )}

      {section==="backup"&&(
        <>
          {/* Why backup? Banner */}
          <div style={{background:"linear-gradient(135deg,#0a1535,#0d1f3c)",borderRadius:14,padding:"14px",border:"1px solid #1d4ed8",marginBottom:12}}>
            <div style={{fontSize:15,fontWeight:"800",color:"#93c5fd",marginBottom:6}}>☁️ Protect Your Financial Data</div>
            <div style={{fontSize:12,color:"#64748b",lineHeight:1.7}}>
              Your FinTax LK data lives only on this device. Backing up to Google Drive protects against phone loss, app reinstalls, and accidental data clearing.
            </div>
          </div>

          {/* What gets backed up */}
          <div style={{...S.card,border:"1px solid #064e3b",background:"#0a1a14",marginBottom:12}}>
            <div style={{...S.cardTitle,color:"#6ee7b7"}}>📦 WHAT GETS BACKED UP</div>
            {[
              ["📒","Transaction Book","All income & expense transactions across all years"],
              ["📥","Income Records","Monthly salary, freelance, rental, investment income"],
              ["📋","Tax Data","Tax settings, qualifying payments, APIT paid"],
              ["👤","Profile","Your name, TIN, NIC, employment type, bank details"],
              ["🏦","Bank Accounts","All your linked bank account records"],
              ["📊","Tools Data","EPF projections, net worth, loans, investments"],
            ].map(([ico,t,d],i)=>(
              <div key={i} style={{display:"flex",gap:10,padding:"8px 0",borderBottom:"1px solid #1e293b",alignItems:"flex-start"}}>
                <span style={{fontSize:18,flexShrink:0}}>{ico}</span>
                <div>
                  <div style={{fontSize:12,fontWeight:"700",color:"#e2e8f0"}}>{t}</div>
                  <div style={{fontSize:11,color:"#64748b"}}>{d}</div>
                </div>
                <span style={{marginLeft:"auto",fontSize:11,color:"#34d399",fontWeight:"700",flexShrink:0}}>✓ Included</span>
              </div>
            ))}
          </div>

          {/* The actual backup card */}
          <DriveBackupCard profile={profile} sub={sub}/>

          {/* Privacy note */}
          <div style={{...S.card,border:"1px solid #334155",background:"#080d18"}}>
            <div style={{...S.cardTitle,color:"#64748b"}}>🔒 PRIVACY & SECURITY</div>
            {[
              "Your backup goes directly from your phone to YOUR Google Drive",
              "FinTax LK never stores, transmits, or reads your backup data",
              "Only you can access your Google Drive backup file",
              "The backup file is encrypted in transit (HTTPS)",
              "Admin only stores your subscription status — never your financial data",
            ].map((item,i)=>(
              <div key={i} style={{display:"flex",gap:8,padding:"5px 0",borderBottom:"1px solid #1e293b",alignItems:"flex-start"}}>
                <span style={{color:"#34d399",fontSize:12,flexShrink:0}}>🔒</span>
                <span style={{fontSize:11,color:"#64748b",lineHeight:1.5}}>{item}</span>
              </div>
            ))}
          </div>
        </>
      )}

      {section==="faq"&&[
        ["What's the personal relief for 2025/26?","Rs. 1,800,000/year (Rs.150,000/month). Up from Rs.1,200,000. Non-Resident Non-Citizens get no relief. Increased under Act No. 2 of 2025."],
        ["How are freelancers taxed differently?","Freelancers report business income and can deduct allowable expenses (office rent, equipment, software, travel). Net profit = taxable income. Must pay advance tax quarterly. No employer APIT — manage your own payments."],
        ["What expenses can freelancers deduct?","Home office rent, equipment, software subscriptions, travel for work, marketing, professional fees, bank charges, communication costs. Must be wholly and exclusively for business."],
        ["What is APIT?","Advance Personal Income Tax — deducted monthly by your employer. Shown on salary slip. Credited against your final annual tax when you file."],
        ["What is advance tax for freelancers?","Self-employed persons must pay 25% of estimated annual tax each quarter. Due: Aug, Nov, Feb, May. Pay via ezpay.ird.gov.lk to avoid penalty."],
        ["How is export/foreign income taxed?","From April 2025: flat 15% on profits from services used abroad and paid in foreign currency via bank. No longer tax-exempt under Act No. 2 of 2025."],
        ["What is the late filing penalty?","5% of tax due + 1% per month after the deadline ("+FILING_DEADLINE+"). Use the Penalty Calculator in the Tax tab to estimate."],
        ["What's included in the Rs.12,000 plan?","Full access to the app for 1 year + FREE annual tax return filing by GDP Consultants Chartered Accountants + FREE 1-hour tax advisor consultation."],
      ].map(([q,a],i)=>(
        <div key={i} style={{...S.card,marginBottom:8}}>
          <div style={{fontSize:13,fontWeight:"700",color:"#f5d060",marginBottom:6}}>Q: {q}</div>
          <div style={{fontSize:12,color:"#94a3b8",lineHeight:1.7}}>A: {a}</div>
        </div>
      ))}

      {section==="contact"&&(
        <>
          {/* Language preference card */}
          <div style={{...S.card,border:"1px solid #1e3a5f",background:"#0a1525",marginBottom:12}}>
            <div style={{...S.cardTitle,color:"#93c5fd"}}>🌐 {T(lang,"language")} / Language / மொழி / භාෂාව</div>
            <div style={{fontSize:11,color:"#64748b",marginBottom:10}}>Select your preferred language for the app interface</div>
            <div style={{display:"flex",gap:10,flexWrap:"wrap"}}>
              {[["en","🇬🇧 English"],["si","🇱🇰 සිංහල"],["ta","🇱🇰 தமிழ்"]].map(([l,label])=>(
                <button key={l} onClick={()=>setLang(l)}
                  style={{flex:1,minWidth:90,padding:"10px 6px",background:lang===l?"#0a2a4a":"#0f172a",border:`2px solid ${lang===l?"#3b82f6":"#1e293b"}`,borderRadius:10,color:lang===l?"#93c5fd":"#64748b",fontWeight:lang===l?"800":"500",fontSize:13,cursor:"pointer"}}>
                  {label}
                </button>
              ))}
            </div>
          </div>

          <div style={{...S.card,textAlign:"center",border:"1px solid #b8960c",background:"linear-gradient(160deg,#0d0d00,#1a1500)",marginBottom:14}}>
            <img src={LOGO_B64} alt="" style={{width:80,height:80,borderRadius:"50%",border:"3px solid #b8960c",marginBottom:12}}/>
            <div style={{fontSize:18,fontWeight:"900",color:"#f5d060",letterSpacing:1}}>{FIRM_NAME.split("—")[0]}</div>
            <div style={{fontSize:11,color:"#b8960c",marginBottom:4}}>CHARTERED ACCOUNTANTS</div>
            <div style={{fontSize:12,color:"#64748b",marginBottom:16}}>{APP_NAME} — {APP_BRAND_LINE}</div>
            <ContactLinks/>
          </div>

          <div style={{...S.card,border:"1px solid #064e3b",background:"#0a1a14",marginBottom:14}}>
            <div style={{...S.cardTitle,color:"#6ee7b7"}}>🎁 WHAT'S INCLUDED — Rs.12,000 PLAN</div>
            {[
              {icon:"📱",t:"Full App Access",d:"All features unlocked for 12 months. Unlimited transactions, income entries, reports."},
              {icon:"📝",t:"FREE Tax Return Filing",d:"Our Chartered Accountants file your AITR with the IRD at no extra cost. Just share your TaxBook report with us."},
              {icon:"👨‍💼",t:"FREE 1-Hour Consultation",d:"Direct consultation with a Tax Advisor / IRD Accredited Agent. Covers tax planning, deductions, compliance queries."},
              {icon:"⚠️",t:"Penalty Protection Advice",d:"We'll review your filing timeline and alert you to any risk of penalties."},
              {icon:"📊",t:"Year-Round Support",d:"WhatsApp and email support for any tax queries throughout the year."},
            ].map((s,i)=>(
              <div key={i} style={{display:"flex",gap:12,padding:"10px 0",borderBottom:"1px solid #1e293b"}}>
                <span style={{fontSize:24,flexShrink:0}}>{s.icon}</span>
                <div><div style={{fontSize:13,fontWeight:"700",color:"#e2e8f0",marginBottom:3}}>{s.t}</div><div style={{fontSize:11,color:"#64748b",lineHeight:1.6}}>{s.d}</div></div>
              </div>
            ))}
          </div>

          {/* Device Transfer Card */}
          <div style={{...S.card,border:"1px solid #1e3a5f",background:"#0a1525",marginBottom:14}}>
            <div style={{...S.cardTitle,color:"#93c5fd"}}>📱 {T(lang,"device_transfer")}</div>
            <div style={{fontSize:11,color:"#64748b",lineHeight:1.7,marginBottom:10}}>{T(lang,"device_transfer_info")}</div>
            <div style={{fontSize:10,color:"#334155",marginBottom:10,padding:"8px",background:"#050e1a",borderRadius:8,lineHeight:1.6}}>
              <strong style={{color:"#64748b"}}>How it works:</strong><br/>
              1. Contact GDP Consultants via WhatsApp<br/>
              2. Mention: "I need to transfer my FinTax LK subscription to a new device"<br/>
              3. Provide your registered name & mobile number<br/>
              4. Admin will generate a new activation code for your new device — FREE<br/>
              5. Enter the new code in the app on your new device
            </div>
            <a href={`https://wa.me/94${APP_WHATSAPP.replace(/^0/,"")}?text=Hello GDP Consultants, I need to transfer my FinTax LK subscription to a new device. My registered name is ${encodeURIComponent(profile?.name||"[your name]")} and mobile is ${profile?.mobile||"[your mobile]"}.`}
              target="_blank"
              style={{display:"block",background:"#064e3b",color:"#6ee7b7",border:"1px solid #10b981",borderRadius:8,padding:"10px",fontWeight:"700",fontSize:12,textDecoration:"none",textAlign:"center"}}>
              💬 {T(lang,"device_transfer_btn")} via WhatsApp
            </a>
          </div>

          <div style={{...S.card,border:"1px solid #064e3b",background:"#0a1a14"}}>
            <div style={{...S.cardTitle,color:"#6ee7b7"}}>💬 Get In Touch</div>
            <div style={{display:"flex",flexDirection:"column",gap:10}}>
              <a href={`mailto:${APP_EMAIL}?subject=TaxBook LK - Tax Return Filing (${TAX_YEAR})`} style={{...S.contactBlock,borderColor:"#065f46"}}>
                <span style={{fontSize:22}}>✉️</span>
                <div><div style={{fontSize:10,color:"#64748b"}}>Email (Tax Return Filing)</div><div style={{fontSize:14,fontWeight:"700",color:"#34d399"}}>{APP_EMAIL}</div></div>
              </a>
              <a href={`https://wa.me/94${APP_WHATSAPP.slice(1)}?text=Hi GDP Consultants, I need help with my ${TAX_YEAR} ${profile?.employmentType==="freelancer"?"freelancer":"salaried"} tax return. I am a TaxBook LK subscriber.`} target="_blank" style={{...S.contactBlock,borderColor:"#064e3b"}}>
                <span style={{fontSize:22}}>💬</span>
                <div><div style={{fontSize:10,color:"#64748b"}}>WhatsApp (Tap to message directly)</div><div style={{fontSize:14,fontWeight:"700",color:"#34d399"}}>{APP_WHATSAPP}</div></div>
              </a>
              <a href={`https://${APP_WEB}`} target="_blank" style={{...S.contactBlock,borderColor:"#1d4ed8"}}>
                <span style={{fontSize:22}}>🌐</span>
                <div><div style={{fontSize:10,color:"#64748b"}}>Website</div><div style={{fontSize:14,fontWeight:"700",color:"#3b82f6"}}>{APP_WEB}</div></div>
              </a>
            </div>
          </div>

          {/* Activation Code entry — for renewals or manual activation */}
          <CodeActivationCard onActivateCode={onActivateCode} sub={sub} lang={lang}/>
        </>
      )}
    </div>
  );
}

// ─── CODE ACTIVATION CARD (reusable) ────────────────────────────────────────────
function CodeActivationCard({onActivateCode,sub,lang="en"}){
  const [show,setShow]=useState(false);
  const [codeInput,setCodeInput]=useState("");
  const [status,setStatus]=useState(null);
  const [msg,setMsg]=useState("");
  const isPaid=sub?.plan==="paid";

  const handleActivate=async()=>{
    if(!codeInput.trim()) return;
    setStatus("checking"); setMsg("");
    const result=await onActivateCode(codeInput.trim().toUpperCase());
    if(result.ok){
      setStatus("ok");
      setMsg("✅ Subscription activated successfully! Your 1-year access starts today.");
      setCodeInput("");
    } else {
      setStatus("error");
      setMsg("❌ "+result.reason);
    }
  };

  return(
    <div style={{...S.card,border:"1px solid #7c3aed",background:"linear-gradient(160deg,#0a0020,#12002a)",marginTop:10}}>
      <div style={{...S.cardTitle,color:"#a78bfa"}}>🔑 {isPaid?"Renew / Extend":"Activate"} with Code</div>
      <div style={{fontSize:11,color:"#7c3aed",marginBottom:10,lineHeight:1.6}}>
        {isPaid
          ? "Have a renewal code from GDP Consultants? Enter it here to extend your subscription for another year."
          : "Paid via bank transfer or cash? Enter the activation code from GDP Consultants to unlock your subscription."}
      </div>
      <button onClick={()=>setShow(v=>!v)} style={{width:"100%",padding:"10px",background:show?"#1a0030":"#2d0060",border:"1px solid #7c3aed",borderRadius:8,color:"#c4b5fd",fontWeight:"700",fontSize:13,cursor:"pointer",marginBottom:show?10:0}}>
        {show?"▲ Hide":"🔑 Enter Activation Code"}
      </button>
      {show&&(
        <>
          <div style={{display:"flex",gap:8,marginBottom:8}}>
            <input
              value={codeInput}
              onChange={e=>setCodeInput(e.target.value.toUpperCase())}
              onKeyDown={e=>{if(e.key==="Enter")handleActivate();}}
              placeholder="GDP-XXXX-XXXX"
              maxLength={12}
              style={{...S.inp,flex:1,fontFamily:"monospace",fontSize:16,fontWeight:"800",letterSpacing:3,textAlign:"center",background:"#0a0020",borderColor:"#7c3aed",color:"#f5d060"}}
            />
            <button onClick={handleActivate} disabled={!codeInput.trim()||status==="checking"||status==="ok"}
              style={{background:status==="checking"?"#334155":"#7c3aed",color:"#fff",border:"none",borderRadius:8,padding:"0 16px",fontWeight:"800",fontSize:13,cursor:"pointer",flexShrink:0}}>
              {status==="checking"?"⏳":"Apply"}
            </button>
          </div>
          {msg&&(
            <div style={{fontSize:12,fontWeight:"700",color:status==="ok"?"#34d399":"#f87171",padding:"8px 10px",background:status==="ok"?"#0a2a1a":"#1a0000",borderRadius:8,border:"1px solid "+(status==="ok"?"#064e3b":"#7f1d1d")}}>
              {msg}
            </div>
          )}
          <div style={{fontSize:10,color:"#475569",marginTop:8,textAlign:"center"}}>Code format: GDP-XXXX-XXXX · Contact us if you don't have a code</div>
        </>
      )}
    </div>
  );
}

// ─── SHARED MICRO-COMPONENTS ────────────────────────────────────────────────────
const FI=({label,type="text",value,onChange,placeholder})=>(
  <div style={{marginBottom:10}}>
    <label style={S.lbl}>{label}</label>
    <input type={type} value={value} placeholder={placeholder} onChange={e=>onChange(e.target.value)} style={S.inp}
      onFocus={e=>{e.target.style.borderColor="#b8960c"}} onBlur={e=>{e.target.style.borderColor="#334155"}}/>
  </div>
);
const FS=({label,value,options,onChange})=>(
  <div style={{marginBottom:10}}>
    <label style={S.lbl}>{label}</label>
    <select value={value} onChange={e=>onChange(e.target.value)} style={S.inp}>
      {options.map(o=><option key={o} value={o}>{o}</option>)}
    </select>
  </div>
);
const FormCard=({title,children})=>(
  <div style={{...S.card,border:"1px solid #064e3b",background:"#0a1a14",marginBottom:14}}>
    <div style={{...S.cardTitle,color:"#6ee7b7"}}>{title}</div>
    {children}
  </div>
);
const MStat=({label,value,color})=>(
  <div style={{flex:1,background:"#0a0f1a",borderRadius:10,padding:"8px 10px",border:"1px solid "+color,textAlign:"center"}}>
    <div style={{color,fontSize:10}}>{label}</div>
    <div style={{color,fontWeight:"700",fontSize:12,marginTop:2}}>{value}</div>
  </div>
);
const Badge=({type})=>(
  <span style={{fontSize:9,fontWeight:"700",padding:"2px 5px",borderRadius:3,background:type==="in"?"#065f46":"#7f1d1d",color:type==="in"?"#6ee7b7":"#fca5a5"}}>
    {type==="in"?"↑ IN":"↓ OUT"}
  </span>
);
const TRow=({l,v,c="#e2e8f0",bold,size=12})=>(
  <div style={{display:"flex",justifyContent:"space-between",padding:"3px 0",fontWeight:bold?"700":"400"}}>
    <span style={{color:"#94a3b8",fontSize:size}}>{l}</span>
    <span style={{color:c,fontSize:size}}>{v}</span>
  </div>
);
const Empty=({icon,text})=>(
  <div style={{textAlign:"center",padding:"32px 16px",color:"#475569"}}>
    <div style={{fontSize:36,marginBottom:8}}>{icon}</div>
    <div style={{fontSize:13}}>{text}</div>
    <div style={{fontSize:11,marginTop:4}}>Tap + to get started</div>
  </div>
);
const ContactLinks=({small})=>{
  const sz=small?10:12;
  return(
    <div style={{display:"flex",flexWrap:"wrap",gap:6,justifyContent:"center",marginTop:small?4:8}}>
      <a href={`mailto:${APP_EMAIL}`} style={{...S.chip,fontSize:sz}}>✉ {APP_EMAIL}</a>
      <a href={`https://${APP_WEB}`} target="_blank" style={{...S.chip,fontSize:sz}}>🌐 {APP_WEB}</a>
      <a href={`https://wa.me/94${APP_WHATSAPP.slice(1)}`} target="_blank" style={{...S.chip,fontSize:sz,background:"#064e3b",borderColor:"#10b981"}}>💬 {APP_WHATSAPP}</a>
    </div>
  );
};
const catIcon=c=>({Salary:"💼",Employment:"💼","Freelance/Contract":"💻","Business Income":"🏪",Rental:"🏠",Investment:"📈","Export/Foreign":"🌐","Other Income":"💰"}[c]||"💰");

// ─── STYLES ────────────────────────────────────────────────────────────────────

// ═══════════════════════════════════════════════════════════════════════════════
// ─── DUAL COLOUR SCHEME ───────────────────────────────────────────────────────
// TAX TOOLS   → Dark Navy / Gold  (#060d1a base, #b8960c / #f5d060 accent)
// FINANCE TOOLS → Dark Slate-Teal (#050f14 base, #06b6d4 / #22d3ee accent)
// ═══════════════════════════════════════════════════════════════════════════════

// Finance Tools palette — used by EPF, Net Worth, Loan, VAT, WHT, AdvTax, Rental
const F = {
  // Backgrounds
  base:    "#050f14",
  surface: "#071820",
  card:    "#0b2030",
  cardAlt: "#0d253a",
  // Borders
  border:  "#0e3a52",
  borderAccent: "#06b6d4",
  // Text
  textPrimary:   "#e0f7fa",
  textSecondary: "#7ecbdb",
  textMuted:     "#3a6a7a",
  // Accents — cyan / teal family
  accentPrimary:   "#06b6d4",   // cyan-500
  accentSecond:    "#22d3ee",   // cyan-400
  accentGold:      "#f0b429",   // amber (for warnings/money)
  accentGreen:     "#2dd4a7",   // teal-400 (positive)
  accentRed:       "#f43f5e",   // rose-500 (negative/warning)
  accentPurple:    "#a78bfa",   // violet-400 (Pro badge)
  // Gradient backgrounds
  gradCard:   "linear-gradient(135deg,#050f14,#071e2e)",
  gradAccent: "linear-gradient(135deg,#0c3050,#063d56)",
  gradGreen:  "linear-gradient(135deg,#052a22,#07402e)",
  gradRed:    "linear-gradient(135deg,#1f0514,#2e0820)",
  gradGold:   "linear-gradient(135deg,#1a1000,#2c1c00)",
  gradPro:    "linear-gradient(135deg,#1e0a3c,#2d1060)",
  gradBiz:    "linear-gradient(135deg,#1a0d00,#2d1800)",
  // Buttons
  btnPrimary:  "linear-gradient(135deg,#0891b2,#06b6d4)",
  btnSecondary:"linear-gradient(135deg,#065f76,#07809e)",
  btnDanger:   "linear-gradient(135deg,#be123c,#f43f5e)",
  // Nav active indicator for tools tab
  navActive:   "#06b6d4",
  // Input
  inp: {background:"#071820",border:"1px solid #0e3a52",borderRadius:8,padding:"9px 12px",color:"#e0f7fa",fontSize:13,outline:"none",boxSizing:"border-box",width:"100%"},
};

// Tax Tools palette — existing gold/navy (used by Dashboard, Book, Income, Tax, Reports)
const T_PALETTE = {
  base:          "#060d1a",
  accentPrimary: "#b8960c",
  accentSecond:  "#f5d060",
  navActive:     "#b8960c",
};

const S={
  phone:{width:"100%",maxWidth:430,margin:"0 auto",background:"#060d1a",minHeight:"100vh",display:"flex",flexDirection:"column",fontFamily:"Georgia,Cambria,serif",color:"#e2e8f0"},
  screen:{flex:1,overflowY:"auto",paddingBottom:72},
  statusBar:{padding:"7px 14px 5px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#030710",borderBottom:"1px solid #0f172a"},
  nav:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:430,background:"#030710",borderTop:"1px solid #1e293b",display:"flex",padding:"3px 0 6px"},
  navBtn:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4px 1px",background:"none",border:"none",cursor:"pointer"},
  page:{padding:"12px 14px"},
  pageHdr:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:14},
  pageTitle:{fontSize:18,fontWeight:"700",color:"#f1f5f9",letterSpacing:"-0.3px",marginBottom:12},
  yearBadge:{background:"linear-gradient(135deg,#b8960c,#f5d060)",color:"#111",fontSize:10,fontWeight:"800",padding:"4px 8px",borderRadius:8,letterSpacing:0.5,flexShrink:0},
  card:{background:"#0d1829",borderRadius:14,border:"1px solid #1e293b",padding:"14px",marginBottom:12},
  cardTitle:{fontSize:11,fontWeight:"700",color:"#64748b",marginBottom:10,letterSpacing:"0.5px",textTransform:"uppercase"},
  cardRow:{display:"flex",gap:8,marginBottom:12},
  balCard:{flex:1,borderRadius:12,padding:"12px 10px",border:"1px solid rgba(255,255,255,0.05)"},
  balLabel:{color:"rgba(255,255,255,0.65)",fontSize:10,marginBottom:3},
  balAmt:{color:"#fff",fontSize:15,fontWeight:"800"},
  balSub:{color:"rgba(255,255,255,0.45)",fontSize:9,marginTop:2},
  row:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0"},
  divider:{height:1,background:"#1e293b",margin:"8px 0"},
  txnRow:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #1e293b"},
  txnDesc:{color:"#e2e8f0",fontSize:13},
  txnDate:{color:"#64748b",fontSize:10,marginTop:2},
  footerCard:{display:"flex",gap:10,alignItems:"center",padding:"12px",background:"#030710",borderRadius:14,border:"1px solid #1e293b",marginTop:8},
  lbl:{display:"block",color:"#64748b",fontSize:11,marginBottom:4,fontWeight:"600"},
  inp:{width:"100%",background:"#0a1a14",border:"1px solid #334155",borderRadius:8,padding:"9px 12px",color:"#e2e8f0",fontSize:13,outline:"none",boxSizing:"border-box",transition:"border-color 0.2s"},
  submitBtn:{width:"100%",padding:"11px",background:"linear-gradient(135deg,#059669,#10b981)",border:"none",borderRadius:10,color:"#fff",fontWeight:"700",fontSize:14,cursor:"pointer",marginTop:4},
  secBtn:{padding:"11px",background:"#1e293b",border:"1px solid #334155",borderRadius:10,color:"#94a3b8",fontWeight:"600",fontSize:13,cursor:"pointer"},
  addBtn:{background:"#0a1a14",border:"1px solid #b8960c",color:"#f5d060",padding:"6px 12px",borderRadius:8,fontSize:12,fontWeight:"600",cursor:"pointer"},
  filterRow:{display:"flex",gap:8,marginBottom:10},
  fIn:{flex:1,background:"#0a1a14",border:"1px solid #334155",borderRadius:8,padding:"7px 10px",color:"#e2e8f0",fontSize:12,outline:"none"},
  entryCard:{background:"#0d1829",borderRadius:10,padding:"10px 12px",marginBottom:8,border:"1px solid #1e293b"},
  entryDesc:{color:"#e2e8f0",fontSize:13,marginTop:4},
  entryMeta:{color:"#475569",fontSize:10,marginTop:2},
  delBtn:{background:"none",border:"none",cursor:"pointer",fontSize:13,color:"#475569",padding:2,marginTop:2},
  accTab:{minWidth:110,background:"#0d1829",border:"1px solid #1e293b",borderRadius:10,padding:"8px 10px",cursor:"pointer",textAlign:"left",flexShrink:0},
  accTabA:{border:"1px solid #3b82f6",background:"#0f2040"},
  resOpt:{padding:"10px 12px",borderRadius:10,marginBottom:8,border:"1px solid #1e293b",cursor:"pointer",background:"#0a0f1a"},
  resOptA:{border:"1px solid #b8960c",background:"#1a1200"},
  chip:{background:"#0d1829",border:"1px solid #334155",borderRadius:8,padding:"5px 10px",color:"#94a3b8",textDecoration:"none",fontSize:11},
  onbTitle:{fontSize:18,fontWeight:"800",color:"#f1f5f9",marginBottom:4},
  onbSub:{fontSize:12,color:"#64748b",marginBottom:18,lineHeight:1.5},
  empCard:{padding:"14px",borderRadius:12,border:"2px solid #1e293b",background:"#0a0f1a",cursor:"pointer"},
  empCardA:{border:"2px solid #b8960c",background:"linear-gradient(135deg,#1a1200,#2a1c00)"},
  tBtn:{padding:"7px 12px",background:"#0d1829",border:"1px solid #334155",borderRadius:8,color:"#64748b",fontSize:11,cursor:"pointer"},
  tBtnA:{background:"#1a1200",border:"1px solid #b8960c",color:"#f5d060"},
  contactBlock:{display:"flex",gap:12,alignItems:"center",padding:"12px",background:"#0a0f1a",border:"1px solid",borderRadius:10,textDecoration:"none"},
};

ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));
setTimeout(()=>{const l=document.getElementById("loading");if(l){l.style.opacity="0";setTimeout(()=>l.remove(),500);}},100);
</script>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('SW registered:', reg.scope))
          .catch(err => console.log('SW error:', err));
      });
    }
  </script>
</body>
</html>
